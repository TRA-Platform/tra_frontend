import{r as O,o as i,b as c,y as t,p as e,ap as _,aj as I,aD as F,aB as z,E as h,aJ as G,aL as M,q as o,aK as B,D as C,A as p,aY as D,m as f,c as S,b1 as R,C as $,aI as A,w as T,k as x,H as Y,ah as N,a as Q,F as W,t as X}from"./index-7d87a8eb.js";import{u as Z,_ as ee,V as te}from"./ProjectCreateDialog-7328f761.js";import{V as ae}from"./VMenu-6958a89f.js";import{V as se}from"./VList-470d951e.js";import{g as le}from"./formatters-672af25a.js";import{V as re}from"./VChip-cd421db0.js";import{a as b,V as L}from"./VRow-706c6ac6.js";import{b as oe}from"./VTextField-f5713291.js";import{V as q}from"./VSelect-91e46f2c.js";import{V as ie}from"./VDivider-07ddc991.js";import"./VSlideGroup-e116af25.js";import"./ssrBoot-6c797c8c.js";import"./index-824e31d9.js";import"./VSpacer-487bffed.js";import"./VForm-667d3206.js";import"./VCheckboxBtn-70bc8575.js";import"./VDialog-ad09290c.js";const ce={__name:"MoreBtn",props:{menuList:{type:Array,required:!1},itemProps:{type:Boolean,required:!1}},setup(l){const j=l;return(y,n)=>{const r=O("IconBtn");return i(),c(r,{density:"compact",color:"disabled"},{default:t(()=>[e(_,{icon:"tabler-dots-vertical"}),j.menuList?(i(),c(ae,{key:0,activator:"parent"},{default:t(()=>[e(se,{items:j.menuList,"item-props":j.itemProps},null,8,["items","item-props"])]),_:1})):I("",!0)]),_:1})}}},ne={class:"mb-2"},pe={class:"d-flex mt-4 pt-1"},ue={class:"me-2"},de={class:"text-caption"},me={class:"me-2"},_e={class:"text-caption"},fe={key:0},je={class:"text-caption"},ye=F({__name:"ProjectListItem",props:{project:{type:Object,required:!0}},emits:["view","edit","delete"],setup(l,{emit:j}){const y=l,{t:n}=z();h(()=>{switch(y.project.status){case"draft":return"warning";case"active":return"success";case"archived":return"secondary";case"completed":return"info";default:return"primary"}});const r=h(()=>new Date(parseInt(y.project.created_at)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),w=(u,d=100)=>!u||u.length<=d?u:u.substring(0,d)+"...",g={en:n("projects.languages.english"),ru:n("projects.languages.russian"),de:n("projects.languages.german")};return(u,d)=>{const V=ce;return i(),c(A,{class:"project-card h-100",onClick:d[1]||(d[1]=v=>j("view",l.project.id))},{default:t(()=>[e(G,null,{prepend:t(()=>[e(M,{color:"primary",variant:"tonal",rounded:"",size:"42",class:"me-3"},{default:t(()=>[l.project.type_of_application==="website"?(i(),c(_,{key:0,icon:"tabler-world-www"})):l.project.type_of_application==="mobile"?(i(),c(_,{key:1,icon:"tabler-device-mobile"})):l.project.type_of_application==="desktop"?(i(),c(_,{key:2,icon:"tabler-device-desktop"})):l.project.type_of_application==="api"?(i(),c(_,{key:3,icon:"tabler-api"})):(i(),c(_,{key:4,icon:"tabler-code"}))]),_:1})]),append:t(()=>[e(V,{"menu-list":[{title:o(n)("projects.list.actions.view_details"),value:"view",props:{prependIcon:"tabler-eye"}}],onClick:d[0]||(d[0]=v=>j(v,l.project.id))},null,8,["menu-list"])]),default:t(()=>[e(B,null,{default:t(()=>[C(p(l.project.name)+" ",1),e(re,{color:o(le)(l.project.status),size:"small",label:""},{default:t(()=>[C(p(u.$t(`projects.status.${l.project.status}`)),1)]),_:1},8,["color"])]),_:1})]),_:1}),e(D,null,{default:t(()=>{return[f("p",ne,p(w(l.project.short_description)),1),f("div",pe,[f("div",ue,[e(_,{icon:"tabler-calendar",size:"16",class:"me-1"}),f("span",de,p(o(n)("projects.list.details.created_at"))+": "+p(o(r)),1)]),f("div",me,[e(_,{icon:"tabler-code",size:"16",class:"me-1"}),f("span",_e,p(o(n)("projects.list.details.type"))+": "+p(u.$t(`projects.types.${l.project.type_of_application}`)),1)]),l.project.language?(i(),S("div",fe,[e(_,{icon:"tabler-language",size:"16",class:"me-1"}),f("span",je,p(o(n)("projects.list.details.language"))+": "+p((v=l.project.language,g[v]||v)),1)])):I("",!0)])];var v}),_:1}),e(R,null,{default:t(()=>[e($,{variant:"tonal",color:"primary"},{default:t(()=>[C(p(o(n)("projects.list.actions.view_details")),1)]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-c908ae38"]]),ve={class:"text-h5"},be={class:"text-medium-emphasis"},Ae={__name:"index",setup(l){const j=X(),y=Z(),n=T(),{t:r}=z(),w=x(!1),g=x(!1),u=x(""),d=x("created_at"),V=x("desc");h(()=>n.is_admin()),h(()=>n.is_manager());const v=h(()=>n.is_authenticated()),E=[{title:r("projects.filters.sort_by_name"),value:"name"},{title:r("projects.filters.sort_by_created"),value:"created_at"},{title:r("projects.filters.sort_by_status"),value:"status"},{title:r("projects.filters.sort_by_type"),value:"type_of_application"}],H=[{title:r("projects.filters.order_asc"),value:"asc"},{title:r("projects.filters.order_desc"),value:"desc"}],P=h(()=>y.projects.length?y.projects.filter(m=>{if(!u.value)return!0;const s=u.value.toLowerCase();return m.name.toLowerCase().includes(s)||m.short_description.toLowerCase().includes(s)||m.type_of_application.toLowerCase().includes(s)}).sort((m,s)=>{let a=m[d.value],k=s[d.value];return typeof a=="string"&&(a=a.toLowerCase()),typeof k=="string"&&(k=k.toLowerCase()),V.value==="asc"?a>k?1:-1:a<k?1:-1}):[]),U=async()=>{w.value=!0;try{await y.fetchProjects()}catch(m){console.error("Error fetching projects:",m)}finally{w.value=!1}},J=async m=>{g.value=!1;const{data:s,error:a}=await y.createProject(m);s&&!a&&U()},K=m=>{j.push({name:"projects-id",params:{id:m}})};return Y(()=>{U()}),(m,s)=>(i(),c(te,{fluid:""},{default:t(()=>[e(L,null,{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[e(A,null,{default:t(()=>[e(B,{class:"d-flex align-center justify-space-between"},{default:t(()=>[f("h5",ve,p(o(r)("projects.title")),1),o(v)?(i(),c($,{key:0,color:"primary",onClick:s[0]||(s[0]=a=>g.value=!0),"prepend-icon":"tabler-plus"},{default:t(()=>[C(p(o(r)("projects.actions.create")),1)]),_:1})):I("",!0)]),_:1}),e(D,null,{default:t(()=>[e(L,null,{default:t(()=>[e(b,{cols:"12",md:"6"},{default:t(()=>[e(oe,{modelValue:u.value,"onUpdate:modelValue":s[1]||(s[1]=a=>u.value=a),label:o(r)("projects.filters.search"),"prepend-inner-icon":"tabler-search",clearable:"","hide-details":""},null,8,["modelValue","label"])]),_:1}),e(b,{cols:"12",md:"3"},{default:t(()=>[e(q,{modelValue:d.value,"onUpdate:modelValue":s[2]||(s[2]=a=>d.value=a),label:o(r)("projects.filters.sort_by"),items:E,"hide-details":""},null,8,["modelValue","label"])]),_:1}),e(b,{cols:"12",md:"3"},{default:t(()=>[e(q,{modelValue:V.value,"onUpdate:modelValue":s[3]||(s[3]=a=>V.value=a),label:o(r)("projects.filters.order"),items:H,"hide-details":""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(ie,{class:"my-4"}),w.value?(i(),c(L,{key:0},{default:t(()=>[e(b,{cols:"12",class:"text-center"},{default:t(()=>[e(N,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):o(P).length===0?(i(),c(L,{key:1},{default:t(()=>[e(b,{cols:"12",class:"text-center"},{default:t(()=>[f("p",be,p(o(r)("projects.empty")),1)]),_:1})]),_:1})):(i(),c(L,{key:2},{default:t(()=>[(i(!0),S(W,null,Q(o(P),a=>(i(),c(b,{key:a.id,cols:"12",md:"6",lg:"4"},{default:t(()=>[e(ye,{project:a,onView:K},null,8,["project"])]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),e(ee,{modelValue:g.value,"onUpdate:modelValue":s[4]||(s[4]=a=>g.value=a),onSubmit:J},null,8,["modelValue"])]),_:1}))}};export{Ae as default};
