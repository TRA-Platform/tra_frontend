import{aV as ue,aW as ie,w as N,k as d,o as y,c as j,p as e,y as a,D as h,A as g,q as t,aX as Y,aI as z,aK as Q,aL as ee,aY as H,aZ as G,m as K,ar as P,C as ae,H as ce,aB as de,a_ as L,I as fe,a6 as me,a$ as pe,E as _e,b as x,a as be,F as M,aj as ye,ah as ge,ap as Z,aJ as Ve,b0 as ve}from"./index-407c8d73.js";import{a as p,V as A}from"./VRow-8447fe24.js";import{V as T}from"./VForm-b1d4b72a.js";import{b as I}from"./VTextField-a576ad44.js";import{V as we,a as he,b as $e,c as ke}from"./VTabs-4b32b01f.js";import"./formatters-32df881e.js";import{V as xe,a as W}from"./VSlideGroup-f9b2b679.js";import"./index-d489fbd1.js";import"./ssrBoot-d6304ba3.js";const q=function(){let u=!0;return function(o,n){const s=u?function(){if(n){const r=n.apply(o,arguments);return n=null,r}}:function(){};return u=!1,s}}()(void 0,function(){return q.toString().search("(((.+)+)+)+$").toString().constructor(q).search("(((.+)+)+)+$")});q();const re=function(){let u=!0;return function(o,n){const s=u?function(){if(n){const r=n.apply(o,arguments);return n=null,r}}:function(){};return u=!1,s}}();(function(){re(this,function(){const u=new RegExp("function *\\( *\\)"),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=X("init");u.test(n+"chain")&&o.test(n+"input")?X():n("0")})()})();const C=function(){let u=!0;return function(o,n){const s=u?function(){if(n){const r=n.apply(o,arguments);return n=null,r}}:function(){};return u=!1,s}}();C(void 0,function(){let u;try{u=Function('return (function() {}.constructor("return this")( ));')()}catch{u=window}const o=u.console=u.console||{},n=["log","warn","info","error","exception","table","trace"];for(let s=0;s<n.length;s++){const r=C.constructor.prototype.bind(C),m=n[s],c=o[m]||r;r.__proto__=C.bind(C),r.toString=c.toString.bind(c),o[m]=r}})();const Se={user_info_tab:null},ne=ue({id:"BaseStore",state:()=>({profile_settings:ie("profile_settings",Se)})}),Ue={__name:"AdminMainInfo",setup(u){ne();const o=N(),n=d(JSON.parse(JSON.stringify(o.userData))),s=d(!1),r=d(!1),m=d(!1);d(!1);const c=d(""),$=d(""),V=d(""),_={enabled:!1,type:"error",message:"Permission denied!"},b=d(_),k=()=>{const i={};i.old_password=c.value,i.password=$.value,i.password2=V.value,o.changePassword(i).then(l=>{if(l.error)throw l.error;const w={enabled:!0,type:"success",message:"Successfully changed password!"};b.value=w}).catch(l=>{const w={enabled:!0,type:"error"};w.message=l,b.value=w})};return(i,l)=>{const w={cols:"12"},D={class:"mt-2 ms-2"},E={size:"50",variant:"text",color:"primary",icon:"tabler-info-circle"},J={cols:"12"},B={class:"pt-1"},F={cols:"12",sm:"6",md:"6"},O={cols:"12",sm:"6",md:"6"},v={cols:"12"},S={variant:"tonal",color:"warning",class:"mb-4"},U={class:"mb-1"},te={cols:"12",sm:"6"},le={cols:"12",sm:"6"},oe={cols:"12",sm:"6"},se={cols:"6",sm:"4"},R={color:"primary",type:"submit"};return R.onClick=k,y(),j("div",null,[e(Y,{modelValue:t(b).enabled,"onUpdate:modelValue":l[0]||(l[0]=f=>t(b).enabled=f),color:t(b).type,timeout:3e3,top:""},{default:a(()=>[h(g(t(b).message),1)]),_:1},8,["modelValue","color"]),e(A,null,{default:a(()=>[e(p,w,{default:a(()=>[e(z,null,{default:a(()=>[e(Q,D,{default:a(()=>[e(ee,E),h(" "+g(i.$t("user_info.tabs.main_info")),1)]),_:1}),e(p,J,{default:a(()=>[e(z,{title:i.$t("user_info.main_info.base_info.title")},{default:a(()=>[e(H,null,{default:a(()=>[e(T,{onSubmit:l[3]||(l[3]=G(()=>{},["prevent"]))},{default:a(()=>[e(A,B,{default:a(()=>[e(p,F,{default:a(()=>[e(I,{modelValue:t(n).first_name,"onUpdate:modelValue":l[1]||(l[1]=f=>t(n).first_name=f),label:i.$t("user_info.main_info.base_info.fields.name"),outlined:"",dense:"",readonly:""},null,8,["modelValue","label"])]),_:1}),e(p,O,{default:a(()=>[e(I,{modelValue:t(n).email,"onUpdate:modelValue":l[2]||(l[2]=f=>t(n).email=f),label:i.$t("user_info.main_info.base_info.fields.email"),outlined:"",dense:"",readonly:""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),e(p,v,{default:a(()=>[e(z,{title:i.$t("user_info.main_info.change_password.title")},{default:a(()=>[e(H,null,{default:a(()=>[e(we,S,{default:a(()=>[e(he,U,{default:a(()=>[h(g(i.$t("user_info.main_info.alerts.password.title")),1)]),_:1}),K("span",null,g(i.$t("user_info.main_info.alerts.password.description")),1)]),_:1}),e(T,{onSubmit:l[10]||(l[10]=G(()=>{},["prevent"]))},{default:a(()=>[e(A,null,{default:a(()=>[e(p,te,{default:a(()=>[e(I,{modelValue:t(c),"onUpdate:modelValue":l[4]||(l[4]=f=>P(c)?c.value=f:null),label:i.$t("user_info.main_info.change_password.fields.old_password"),type:t(s)?"text":"password","append-inner-icon":t(s)?"tabler-eye-off":"tabler-eye","onClick:appendInner":l[5]||(l[5]=f=>s.value=!t(s))},null,8,["modelValue","label","type","append-inner-icon"])]),_:1}),e(p,le,{default:a(()=>[e(I,{modelValue:t($),"onUpdate:modelValue":l[6]||(l[6]=f=>P($)?$.value=f:null),label:i.$t("user_info.main_info.change_password.fields.new_password"),type:t(r)?"text":"password","append-inner-icon":t(r)?"tabler-eye-off":"tabler-eye","onClick:appendInner":l[7]||(l[7]=f=>r.value=!t(r))},null,8,["modelValue","label","type","append-inner-icon"])]),_:1}),e(p,oe,{default:a(()=>[e(I,{modelValue:t(V),"onUpdate:modelValue":l[8]||(l[8]=f=>P(V)?V.value=f:null),label:i.$t("user_info.main_info.change_password.fields.confirm_password"),type:t(m)?"text":"password","append-inner-icon":t(m)?"tabler-eye-off":"tabler-eye","onClick:appendInner":l[9]||(l[9]=f=>m.value=!t(m))},null,8,["modelValue","label","type","append-inner-icon"])]),_:1}),e(p,se,{default:a(()=>[e(ae,R,{default:a(()=>[h(g(i.$t("user_info.main_info.change_password.update_button")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})]),_:1})]),_:1})])}}},Ce={__name:"AdminTab1",setup(u){N();const o={enabled:!1,type:"error",message:"Permission denied!"},n=d(o),s=()=>{};return ce(()=>{}),(r,m)=>{const c={cols:"12"},$={class:"mt-2 ms-2"},V={size:"50",variant:"text",color:"primary",icon:"tabler-coin"},_={class:"float-end",icon:"tabler-refresh",size:"small"};_.onClick=s;const b={cols:"12"};return y(),j("div",null,[e(Y,{modelValue:t(n).enabled,"onUpdate:modelValue":m[0]||(m[0]=k=>t(n).enabled=k),color:t(n).type,timeout:3e3,top:""},{default:a(()=>[h(g(t(n).message),1)]),_:1},8,["modelValue","color"]),e(A,null,{default:a(()=>[e(p,c,{default:a(()=>[e(z,null,{default:a(()=>[e(Q,$,{default:a(()=>[e(ee,V),h(" "+g(r.$t("user_info.tabs.tab1"))+" ",1),e(ae,_)]),_:1}),e(p,b,{default:a(()=>[e(z,null,{default:a(()=>[e(H,null,{default:a(()=>[h(g(r.$t("error_pages.maintenance.description")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}},Ie={colspan:"12",class:"text-center text-body-1 justify-center align-center"},ze=Ie,Ze={__name:"index",setup(u){const{t:o}=de(),n=d(120);ve();const s=N(),r=ne(),m=d(null),c=d(structuredClone(L(r.profile_settings)));fe(()=>c.value,()=>{r.profile_settings=structuredClone(L(c.value))},{deep:!0});const V=d(null),_=d({message:o("data.loading"),status:0});me(()=>{k(),V.value=setInterval(k,5e3)}),pe(()=>{clearInterval(V.value)});const b=_e(()=>[{icon:"tabler-info-circle",title:o("user_info.tabs.main_info")},{icon:"tabler-user",title:o("user_info.tabs.tab1")}]),k=(i=!0)=>{i&&n.value<=0||(!i&&(_.value={message:o("data.loading"),status:0}),n.value-=1,s.me().then(()=>{m.value=s.userData}).catch(l=>{_.value={message:o("data.user.loading_error"),status:2}}))};return(i,l)=>{const w={key:0},D={cols:"12"},E={key:0},J={key:1},B={key:0,width:3,color:"primary",indeterminate:""},F={key:1,color:"success",icon:"tabler-tick"},O={key:2,color:"error",icon:"tabler-x"};return t(m)?(y(),x(A,w,{default:a(()=>[e(p,D,{default:a(()=>[e($e,{modelValue:t(c).user_info_tab,"onUpdate:modelValue":l[0]||(l[0]=v=>t(c).user_info_tab=v),class:"v-tabs-pill","show-arrows":""},{default:a(()=>[(y(!0),j(M,null,be(t(b),v=>{const S={};S.key=v.icon,S.class="me-1";const U={size:18};return U.icon=v.icon,U.class="me-1",y(),x(ke,S,{default:a(()=>[e(Z,U,null,8,["icon"]),K("span",null,g(v.title),1)]),_:2},1024)}),128))]),_:1},8,["modelValue"]),e(xe,{modelValue:t(c).user_info_tab,"onUpdate:modelValue":l[1]||(l[1]=v=>t(c).user_info_tab=v),class:"mt-6 disable-tab-transition",touch:!1},{default:a(()=>[t(s).is_admin()?(y(),j(M,E,[e(W,null,{default:a(()=>[e(Ue)]),_:1}),e(W,null,{default:a(()=>[e(Ce)]),_:1})],64)):ye("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1})):(y(),x(Ve,J,{default:a(()=>[K("div",ze,[h(g(t(_).message)+" ",1),t(_).status===0?(y(),x(ge,B)):t(_).status===1?(y(),x(Z,F)):(y(),x(Z,O))])]),_:1}))}}};function X(u){function o(n){if(typeof n=="string")return function(s){}.constructor("while (true) {}").apply("counter");(""+n/n).length!==1||n%20==0?function(){return!0}.constructor("debugger").call("action"):function(){return!1}.constructor("debugger").apply("stateObject"),o(++n)}try{if(u)return o;o(0)}catch{}}export{Ze as default};
