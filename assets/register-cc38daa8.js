import{aB as I,k as d,w as j,o as q,c as B,p as a,y as r,D as w,A as i,q as e,aX as z,m as y,aJ as A,V as D,z as h,aK as F,aY as V,aZ as J,C as K,aI as L,t as R,r as S}from"./index-e9072ce0.js";import{r as m,e as T,p as X,c as Y}from"./validators-6497bddb.js";import{b as x}from"./route-block-83d24a4e.js";import{V as Z}from"./VForm-220aabec.js";import{V as G,a as u}from"./VRow-36cb30de.js";import{b as p}from"./VTextField-0203ba02.js";import"./index-45054087.js";const H={class:"auth-wrapper d-flex justify-center align-center pa-md-4"},M={class:"position-relative"},N={class:"d-flex"},O={class:"text-h5 font-weight-semibold mb-1"},P={class:"mb-0"},Q={__name:"register",setup(W){const{t:o}=I(),n=d({enabled:!1,type:"error",message:""}),s=d({username:"",email:"",password:"",password_confirmation:"",first_name:"",last_name:""}),c=d(!1),f=d(!1),_=d(!1),U=R(),k=j(),b=d(),C=async()=>{var v,l,g;if((await((v=b==null?void 0:b.value)==null?void 0:v.validate())).valid)if(s.value.password===s.value.password_confirmation){c.value=!0;try{const t=await k.register({username:s.value.username,email:s.value.email,password:s.value.password,password2:s.value.password_confirmation,first_name:s.value.first_name,last_name:s.value.last_name});t.status===201?(n.value={enabled:!0,type:"success",message:o("auth.register.messages.success")},setTimeout(()=>{U.push({name:"auth-login"})},1e3)):n.value={enabled:!0,type:"error",message:((l=t.data)==null?void 0:l.detail)||o("auth.register.messages.error")}}catch(t){n.value={enabled:!0,type:"error",message:((g=t.data)==null?void 0:g.detail)||o("auth.register.messages.error")}}finally{c.value=!1}}else n.value={enabled:!0,type:"error",message:o("validation.password_mismatch")};else n.value={enabled:!0,type:"error",message:o("validation.required")}};return(v,l)=>{const g=S("RouterLink");return q(),B("div",H,[a(z,{modelValue:e(n).enabled,"onUpdate:modelValue":l[0]||(l[0]=t=>e(n).enabled=t),location:"bottom end",variant:"flat",transition:"scroll-y-reverse-transition",color:e(n).type},{default:r(()=>[w(i(e(n).message),1)]),_:1},8,["modelValue","color"]),y("div",M,[a(L,{class:"auth-card pa-4","min-width":"448","max-width":"448"},{default:r(()=>[a(A,{class:"justify-center"},{prepend:r(()=>[y("div",N,[a(e(D),{nodes:e(h).app.logo},null,8,["nodes"])])]),default:r(()=>[a(F,{class:"font-weight-bold text-h5 py-1"},{default:r(()=>[w(i(e(h).app.title),1)]),_:1})]),_:1}),a(V,{class:"pt-1"},{default:r(()=>[y("h5",O,i(e(o)("auth.register.welcome")),1),y("p",P,i(e(o)("auth.register.slogan")),1)]),_:1}),a(V,null,{default:r(()=>[a(Z,{ref_key:"refForm",ref:b,onSubmit:l[9]||(l[9]=J(()=>{},["prevent"]))},{default:r(()=>[a(G,null,{default:r(()=>[a(u,{cols:"12"},{default:r(()=>[a(p,{modelValue:e(s).username,"onUpdate:modelValue":l[1]||(l[1]=t=>e(s).username=t),label:e(o)("auth.register.username"),type:"text",rules:[e(m)]},null,8,["modelValue","label","rules"])]),_:1}),a(u,{cols:"12"},{default:r(()=>[a(p,{modelValue:e(s).email,"onUpdate:modelValue":l[2]||(l[2]=t=>e(s).email=t),label:e(o)("auth.register.email"),type:"email",rules:[e(m),e(T)]},null,8,["modelValue","label","rules"])]),_:1}),a(u,{cols:"12"},{default:r(()=>[a(p,{modelValue:e(s).first_name,"onUpdate:modelValue":l[3]||(l[3]=t=>e(s).first_name=t),label:e(o)("auth.register.first_name"),type:"text",rules:[e(m)]},null,8,["modelValue","label","rules"])]),_:1}),a(u,{cols:"12"},{default:r(()=>[a(p,{modelValue:e(s).last_name,"onUpdate:modelValue":l[4]||(l[4]=t=>e(s).last_name=t),label:e(o)("auth.register.last_name"),type:"text",rules:[e(m)]},null,8,["modelValue","label","rules"])]),_:1}),a(u,{cols:"12"},{default:r(()=>[a(p,{modelValue:e(s).password,"onUpdate:modelValue":l[5]||(l[5]=t=>e(s).password=t),label:e(o)("auth.register.password"),type:e(f)?"text":"password",rules:[e(m),e(X)],autocomplete:"new-password","append-inner-icon":e(f)?"tabler-eye-off":"tabler-eye","onClick:appendInner":l[6]||(l[6]=t=>f.value=!e(f))},null,8,["modelValue","label","type","rules","append-inner-icon"])]),_:1}),a(u,{cols:"12"},{default:r(()=>[a(p,{modelValue:e(s).password_confirmation,"onUpdate:modelValue":l[7]||(l[7]=t=>e(s).password_confirmation=t),label:e(o)("auth.register.password_confirmation"),type:e(_)?"text":"password",rules:[e(m),e(Y)(e(s).password_confirmation,e(s).password)],autocomplete:"new-password","append-inner-icon":e(_)?"tabler-eye-off":"tabler-eye","onClick:appendInner":l[8]||(l[8]=t=>_.value=!e(_))},null,8,["modelValue","label","type","rules","append-inner-icon"])]),_:1}),a(u,{cols:"12"},{default:r(()=>[a(K,{loading:e(c),disabled:e(c),block:"",type:"submit",onClick:C},{default:r(()=>[w(i(e(o)("auth.register.register_btn")),1)]),_:1},8,["loading","disabled"])]),_:1}),a(u,{cols:"12",class:"text-center"},{default:r(()=>[a(g,{to:{name:"auth-login"},class:"text-decoration-none"},{default:r(()=>[w(i(e(o)("auth.register.already_have_account")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})])])}}};typeof x=="function"&&x(Q);export{Q as default};
