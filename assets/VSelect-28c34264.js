import{d as W,e as q,b as P}from"./VTextField-7c270f59.js";import{bu as G,ac as J,bQ as X,L as Y,ab as Z,aO as ee,aP as ae,k as b,a3 as U,E as w,a9 as le,p as s,F as te,aa as y,b8 as oe,D as ne,bk as ue,bv as se}from"./index-5df66acf.js";import{m as ie,u as re,V as pe,a as A}from"./VList-4ec67c31.js";import{a as ce}from"./VDivider-e3a9082b.js";import{V as de}from"./VMenu-b0ba002b.js";import{d as ve}from"./VCheckboxBtn-2106bebb.js";import{V as me}from"./VChip-23414d09.js";const fe=G({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:J,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:X},...ie({itemChildren:!1})},"v-select"),we=Y()({name:"VSelect",props:{...fe(),...Z(W({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...ee({transition:{component:ce}})},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,F){let{slots:l}=F;const{t:K}=ae(),x=b(),I=b(),D=U(e,"menu"),i=w({get:()=>D.value,set:a=>{var t;D.value&&!a&&((t=I.value)!=null&&t.Î¨openChildren)||(D.value=a)}}),{items:f,transformIn:N,transformOut:H}=re(e),n=U(e,"modelValue",[],a=>N(se(a)),a=>{const t=H(a);return e.multiple?t:t[0]??null}),v=q(),k=w(()=>n.value.map(a=>f.value.find(t=>e.valueComparator(t.value,a.value))||a)),O=w(()=>k.value.map(a=>a.props.value)),h=b(!1);let S,B="";const _=w(()=>e.hideSelected?f.value.filter(a=>!k.value.some(t=>t===a)):f.value),m=b();function L(a){e.openOnClear&&(i.value=!0)}function $(){e.hideNoData&&!f.value.length||e.readonly||v!=null&&v.isReadonly.value||(i.value=!i.value)}function j(a){var g,V,o,d;if(e.readonly||v!=null&&v.isReadonly.value||(["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(a.key)&&a.preventDefault(),["Enter","ArrowDown"," "].includes(a.key)&&(i.value=!0),["Escape","Tab"].includes(a.key)&&(i.value=!1),a.key==="ArrowDown"?(g=m.value)==null||g.focus("next"):a.key==="ArrowUp"?(V=m.value)==null||V.focus("prev"):a.key==="Home"?(o=m.value)==null||o.focus("first"):a.key==="End"&&((d=m.value)==null||d.focus("last")),e.multiple||!function(u){const p=u.key.length===1,c=!u.ctrlKey&&!u.metaKey&&!u.altKey;return p&&c}(a)))return;const t=performance.now();t-S>1e3&&(B=""),B+=a.key.toLowerCase(),S=t;const r=f.value.find(u=>u.title.toLowerCase().startsWith(B));r!==void 0&&(n.value=[r])}function C(a){if(e.multiple){const t=O.value.findIndex(r=>e.valueComparator(r,a.value));if(t===-1)n.value=[...n.value,a];else{const r=[...n.value];r.splice(t,1),n.value=r}}else n.value=[a],i.value=!1}function z(a){var t;(t=m.value)!=null&&t.$el.contains(a.relatedTarget)||(i.value=!1)}function M(a){h.value=!0}function R(a){var t;a.relatedTarget==null&&((t=x.value)==null||t.focus())}return le(()=>{const a=!(!e.chips&&!l.chip),t=!!(!e.hideNoData||_.value.length||l.prepend||l.append||l["no-data"]),r=n.value.length>0,[g]=P.filterProps(e),V=r||!h.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return s(P,y({ref:x},g,{modelValue:n.value.map(o=>o.props.value).join(", "),"onUpdate:modelValue":o=>{o==null&&(n.value=[])},focused:h.value,"onUpdate:focused":o=>h.value=o,validationValue:n.externalValue,dirty:r,class:["v-select",{"v-select--active-menu":i.value,"v-select--chips":!!e.chips,["v-select--"+(e.multiple?"multiple":"single")]:!0,"v-select--selected":n.value.length},e.class],style:e.style,appendInnerIcon:e.menuIcon,readonly:!0,placeholder:V,"onClick:clear":L,"onMousedown:control":$,onBlur:z,onKeydown:j}),{...l,default:()=>s(te,null,[s(de,y({ref:I,modelValue:i.value,"onUpdate:modelValue":o=>i.value=o,activator:"parent",contentClass:"v-select__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition},e.menuProps),{default:()=>[t&&s(pe,{ref:m,selected:O.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:o=>o.preventDefault(),onFocusin:M,onFocusout:R},{default:()=>{var o,d,u;return[!_.value.length&&!e.hideNoData&&(((o=l["no-data"])==null?void 0:o.call(l))??s(A,{title:K(e.noDataText)},null)),(d=l["prepend-item"])==null?void 0:d.call(l),_.value.map((p,c)=>{var E;return l.item?(E=l.item)==null?void 0:E.call(l,{item:p,index:c,props:y(p.props,{onClick:()=>C(p)})}):s(A,y({key:c},p.props,{onClick:()=>C(p)}),{prepend:T=>{let{isSelected:Q}=T;return e.multiple&&!e.hideSelected?s(ve,{modelValue:Q,ripple:!1,tabindex:"-1"},null):void 0}})}),(u=l["append-item"])==null?void 0:u.call(l)]}})]}),k.value.map((o,d)=>{var p;const u={"onClick:close":function(c){c.stopPropagation(),c.preventDefault(),C(o)},modelValue:!0,"onUpdate:modelValue":void 0};return s("div",{key:o.value,class:"v-select__selection"},[a?l.chip?s(oe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:o.title}}},{default:()=>{var c;return[(c=l.chip)==null?void 0:c.call(l,{item:o,index:d,props:u})]}}):s(me,y({key:"chip",closable:e.closableChips,size:"small",text:o.title},u),null):((p=l.selection)==null?void 0:p.call(l,{item:o,index:d}))??s("span",{class:"v-select__selection-text"},[o.title,e.multiple&&d<k.value.length-1&&s("span",{class:"v-select__selection-comma"},[ne(",")])])])})])})}),ue({isFocused:h,menu:i,select:C},x)}});export{we as V,fe as m};
