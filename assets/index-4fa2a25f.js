import{aV as H,aW as K,w as z,k as o,o as _,c as x,p as e,y as a,D as V,A as c,q as l,aX as N,aI as h,aK as O,aL as q,aY as I,aZ as A,m as S,ar as U,C as E,H as L,aB as M,a_ as D,I as T,a6 as W,a$ as G,E as R,b as g,a as X,F as J,aj as Y,ah as Z,ap as C,aJ as Q,b0 as ee}from"./index-53919516.js";import{a as r,V as k}from"./VRow-d763a9a4.js";import{V as P}from"./VForm-58148bc2.js";import{b as w}from"./VTextField-5ba54c6d.js";import{V as ae,a as le,b as se,c as te}from"./VTabs-3bdc27fa.js";import"./formatters-a6f48d06.js";import{V as ne,a as B}from"./VSlideGroup-e5d494dd.js";import"./index-eadd1e36.js";import"./ssrBoot-c4ce3992.js";const F=H({id:"BaseStore",state:()=>({profile_settings:K("profile_settings",{user_info_tab:null})})}),oe={__name:"AdminMainInfo",setup(j){F();const i=z(),p=o(JSON.parse(JSON.stringify(i.userData))),u=o(!1),m=o(!1),b=o(!1);o(!1);const d=o(""),v=o(""),f=o(""),y=o({enabled:!1,type:"error",message:"Permission denied!"}),$=()=>{i.changePassword({old_password:d.value,password:v.value,password2:f.value}).then(n=>{if(n.error)throw n.error;y.value={enabled:!0,type:"success",message:"Successfully changed password!"}}).catch(n=>{y.value={enabled:!0,type:"error",message:n}})};return(n,s)=>(_(),x("div",null,[e(N,{modelValue:l(y).enabled,"onUpdate:modelValue":s[0]||(s[0]=t=>l(y).enabled=t),color:l(y).type,timeout:3e3,top:""},{default:a(()=>[V(c(l(y).message),1)]),_:1},8,["modelValue","color"]),e(k,null,{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(h,null,{default:a(()=>[e(O,{class:"mt-2 ms-2"},{default:a(()=>[e(q,{size:"50",variant:"text",color:"primary",icon:"tabler-info-circle"}),V(" "+c(n.$t("user_info.tabs.main_info")),1)]),_:1}),e(r,{cols:"12"},{default:a(()=>[e(h,{title:n.$t("user_info.main_info.base_info.title")},{default:a(()=>[e(I,null,{default:a(()=>[e(P,{onSubmit:s[3]||(s[3]=A(()=>{},["prevent"]))},{default:a(()=>[e(k,{class:"pt-1"},{default:a(()=>[e(r,{cols:"12",sm:"6",md:"6"},{default:a(()=>[e(w,{modelValue:l(p).first_name,"onUpdate:modelValue":s[1]||(s[1]=t=>l(p).first_name=t),label:n.$t("user_info.main_info.base_info.fields.name"),outlined:"",dense:"",readonly:""},null,8,["modelValue","label"])]),_:1}),e(r,{cols:"12",sm:"6",md:"6"},{default:a(()=>[e(w,{modelValue:l(p).email,"onUpdate:modelValue":s[2]||(s[2]=t=>l(p).email=t),label:n.$t("user_info.main_info.base_info.fields.email"),outlined:"",dense:"",readonly:""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),e(r,{cols:"12"},{default:a(()=>[e(h,{title:n.$t("user_info.main_info.change_password.title")},{default:a(()=>[e(I,null,{default:a(()=>[e(ae,{variant:"tonal",color:"warning",class:"mb-4"},{default:a(()=>[e(le,{class:"mb-1"},{default:a(()=>[V(c(n.$t("user_info.main_info.alerts.password.title")),1)]),_:1}),S("span",null,c(n.$t("user_info.main_info.alerts.password.description")),1)]),_:1}),e(P,{onSubmit:s[10]||(s[10]=A(()=>{},["prevent"]))},{default:a(()=>[e(k,null,{default:a(()=>[e(r,{cols:"12",sm:"6"},{default:a(()=>[e(w,{modelValue:l(d),"onUpdate:modelValue":s[4]||(s[4]=t=>U(d)?d.value=t:null),label:n.$t("user_info.main_info.change_password.fields.old_password"),type:l(u)?"text":"password","append-inner-icon":l(u)?"tabler-eye-off":"tabler-eye","onClick:appendInner":s[5]||(s[5]=t=>u.value=!l(u))},null,8,["modelValue","label","type","append-inner-icon"])]),_:1}),e(r,{cols:"12",sm:"6"},{default:a(()=>[e(w,{modelValue:l(v),"onUpdate:modelValue":s[6]||(s[6]=t=>U(v)?v.value=t:null),label:n.$t("user_info.main_info.change_password.fields.new_password"),type:l(m)?"text":"password","append-inner-icon":l(m)?"tabler-eye-off":"tabler-eye","onClick:appendInner":s[7]||(s[7]=t=>m.value=!l(m))},null,8,["modelValue","label","type","append-inner-icon"])]),_:1}),e(r,{cols:"12",sm:"6"},{default:a(()=>[e(w,{modelValue:l(f),"onUpdate:modelValue":s[8]||(s[8]=t=>U(f)?f.value=t:null),label:n.$t("user_info.main_info.change_password.fields.confirm_password"),type:l(b)?"text":"password","append-inner-icon":l(b)?"tabler-eye-off":"tabler-eye","onClick:appendInner":s[9]||(s[9]=t=>b.value=!l(b))},null,8,["modelValue","label","type","append-inner-icon"])]),_:1}),e(r,{cols:"6",sm:"4"},{default:a(()=>[e(E,{color:"primary",type:"submit",onClick:$},{default:a(()=>[V(c(n.$t("user_info.main_info.change_password.update_button")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})]),_:1})]),_:1})]))}},ie={__name:"AdminTab1",setup(j){z();const i=o({enabled:!1,type:"error",message:"Permission denied!"}),p=()=>{};return L(()=>{}),(u,m)=>(_(),x("div",null,[e(N,{modelValue:l(i).enabled,"onUpdate:modelValue":m[0]||(m[0]=b=>l(i).enabled=b),color:l(i).type,timeout:3e3,top:""},{default:a(()=>[V(c(l(i).message),1)]),_:1},8,["modelValue","color"]),e(k,null,{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(h,null,{default:a(()=>[e(O,{class:"mt-2 ms-2"},{default:a(()=>[e(q,{size:"50",variant:"text",color:"primary",icon:"tabler-coin"}),V(" "+c(u.$t("user_info.tabs.tab1"))+" ",1),e(E,{class:"float-end",icon:"tabler-refresh",size:"small",onClick:p})]),_:1}),e(r,{cols:"12"},{default:a(()=>[e(h,null,{default:a(()=>[e(I,null,{default:a(()=>[V(c(u.$t("error_pages.maintenance.description")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}},re={colspan:"12",class:"text-center text-body-1 justify-center align-center"},Ve={__name:"index",setup(j){const{t:i}=M(),p=o(120);ee();const u=z(),m=F(),b=o(null),d=o(structuredClone(D(m.profile_settings)));T(()=>d.value,()=>{m.profile_settings=structuredClone(D(d.value))},{deep:!0});const v=o(null),f=o({message:i("data.loading"),status:0});W(()=>{$(),v.value=setInterval($,5e3)}),G(()=>{clearInterval(v.value)});const y=R(()=>[{icon:"tabler-info-circle",title:i("user_info.tabs.main_info")},{icon:"tabler-user",title:i("user_info.tabs.tab1")}]),$=(n=!0)=>{n&&p.value<=0||(n||(f.value={message:i("data.loading"),status:0}),p.value-=1,u.me().then(()=>{b.value=u.userData}).catch(s=>{f.value={message:i("data.user.loading_error"),status:2}}))};return(n,s)=>l(b)?(_(),g(k,{key:0},{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(se,{modelValue:l(d).user_info_tab,"onUpdate:modelValue":s[0]||(s[0]=t=>l(d).user_info_tab=t),class:"v-tabs-pill","show-arrows":""},{default:a(()=>[(_(!0),x(J,null,X(l(y),t=>(_(),g(te,{key:t.icon,class:"me-1"},{default:a(()=>[e(C,{size:18,icon:t.icon,class:"me-1"},null,8,["icon"]),S("span",null,c(t.title),1)]),_:2},1024))),128))]),_:1},8,["modelValue"]),e(ne,{modelValue:l(d).user_info_tab,"onUpdate:modelValue":s[1]||(s[1]=t=>l(d).user_info_tab=t),class:"mt-6 disable-tab-transition",touch:!1},{default:a(()=>[l(u).is_admin()?(_(),x(J,{key:0},[e(B,null,{default:a(()=>[e(oe)]),_:1}),e(B,null,{default:a(()=>[e(ie)]),_:1})],64)):Y("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1})):(_(),g(Q,{key:1},{default:a(()=>[S("div",re,[V(c(l(f).message)+" ",1),l(f).status===0?(_(),g(Z,{key:0,width:3,color:"primary",indeterminate:""})):l(f).status===1?(_(),g(C,{key:1,color:"success",icon:"tabler-tick"})):(_(),g(C,{key:2,color:"error",icon:"tabler-x"}))])]),_:1}))}};export{Ve as default};
