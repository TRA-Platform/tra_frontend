import{L as fa,N as ha,b5 as Tl,R as ql,S as Nl,W as El,b6 as Ol,a9 as ya,p as e,G as Wt,a8 as Ur,Z as Jt,E as re,ac as Hl,Q as Gl,b7 as $l,O as Ql,b8 as qr,Y as Ll,a1 as jr,$ as zr,ap as k,b9 as Fr,ba as Mr,bb as Ir,k as D,I as ht,o as n,b as g,y as t,aI as ye,aY as ue,C as M,m as r,A as c,b2 as Pe,D as u,aV as Kt,bc as ve,aD as ot,aJ as Le,aL as _t,q as p,b1 as Xt,aK as ke,c as f,aj as S,F as fe,a as Se,at as Zt,aG as nt,aH as it,r as Ge,aZ as ut,aX as tt,ar as bt,w as Lt,ah as ft,s as jl,bd as Wl,H as zl,aa as Jl,b4 as Zl,b0 as Pr,t as Ar}from"./index-407c8d73.js";import{V as et}from"./VDialog-4b19cd7f.js";import{a as Je,u as Lr,_ as Rr,V as Br}from"./ProjectCreateDialog-e4fbad52.js";import{V as xe,a as L}from"./VRow-8447fe24.js";import{V as ie}from"./VChip-3f2fbfdc.js";import{V as ge}from"./VDivider-bd98b42e.js";import{a as Va,g as We,b as Kl}from"./formatters-32df881e.js";import{V as he}from"./VSpacer-6be7a486.js";import{b as Fl,c as Oe,V as ga,a as Xl}from"./VTabs-4b32b01f.js";import{V as Ml,a as He}from"./VSlideGroup-f9b2b679.js";import{V as xt}from"./VForm-b1d4b72a.js";import{b as ze}from"./VTextField-a576ad44.js";import{V as Ae}from"./VSelect-76a54482.js";import{V as da,a as ma,b as pa}from"./VList-3954c8b5.js";import{V as Tr}from"./VTooltip-58ff9d2e.js";import{b as Rl}from"./route-block-4a0e11e6.js";import{V as Nr}from"./VMenu-f580697e.js";import"./index-d489fbd1.js";import"./VCheckboxBtn-06089fa3.js";import"./ssrBoot-d6304ba3.js";const wa=function(){let l=!0;return function(o,a){const s=l?function(){if(a){const d=a.apply(o,arguments);return a=null,d}}:function(){};return l=!1,s}}()(void 0,function(){return wa.toString().search("(((.+)+)+)+$").toString().constructor(wa).search("(((.+)+)+)+$")});wa();const Dr=function(){let l=!0;return function(o,a){const s=l?function(){if(a){const d=a.apply(o,arguments);return a=null,d}}:function(){};return l=!1,s}}();(function(){Dr(this,function(){const l=new RegExp("function *\\( *\\)"),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),a=Bl("init");l.test(a+"chain")&&o.test(a+"input")?Bl():a("0")})()})();const Gt=function(){let l=!0;return function(o,a){const s=l?function(){if(a){const d=a.apply(o,arguments);return a=null,d}}:function(){};return l=!1,s}}();Gt(void 0,function(){const l=function(){let s;try{s=Function('return (function() {}.constructor("return this")( ));')()}catch{s=window}return s}(),o=l.console=l.console||{},a=["log","warn","info","error","exception","table","trace"];for(let s=0;s<a.length;s++){const d=Gt.constructor.prototype.bind(Gt),i=a[s],v=o[i]||d;d.__proto__=Gt.bind(Gt),d.toString=v.toString.bind(v),o[i]=d}})();const va=fa()({name:"VTable",props:{fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...ha(),...Tl(),...ql(),...Nl()},setup(l,o){let{slots:a}=o;const{themeClasses:s}=El(l),{densityClasses:d}=Ol(l);return ya(()=>e(l.tag,{class:["v-table",{"v-table--fixed-height":!!l.height,"v-table--fixed-header":l.fixedHeader,"v-table--fixed-footer":l.fixedFooter,"v-table--has-top":!!a.top,"v-table--has-bottom":!!a.bottom,"v-table--hover":l.hover},s.value,d.value,l.class],style:l.style},{default:()=>{var i,v,w;return[(i=a.top)==null?void 0:i.call(a),a.default?e("div",{class:"v-table__wrapper",style:{height:Wt(l.height)}},[e("table",null,[a.default()])]):(v=a.wrapper)==null?void 0:v.call(a),(w=a.bottom)==null?void 0:w.call(a)]}})),{}}}),Yl=fa()({name:"VTimeline",props:{align:{type:String,default:"center",validator:l=>["center","start"].includes(l)},direction:{type:String,default:"vertical",validator:l=>["vertical","horizontal"].includes(l)},justify:{type:String,default:"auto",validator:l=>["auto","center"].includes(l)},side:{type:String,validator:l=>l==null||["start","end"].includes(l)},lineInset:{type:[String,Number],default:0},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:l=>["start","end","both"].includes(l)},...ha(),...Tl(),...ql(),...Nl()},setup(l,o){let{slots:a}=o;const{themeClasses:s}=El(l),{densityClasses:d}=Ol(l);Ur({VTimelineDivider:{lineColor:Jt(l,"lineColor")},VTimelineItem:{density:Jt(l,"density"),lineInset:Jt(l,"lineInset")}});const i=re(()=>{const w=l.side?l.side:l.density!=="default"?"end":null;return w&&"v-timeline--side-"+w}),v=re(()=>{const w=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(l.truncateLine){case"both":return w;case"start":return w[0];case"end":return w[1];default:return null}});return ya(()=>e(l.tag,{class:["v-timeline","v-timeline--"+l.direction,"v-timeline--align-"+l.align,"v-timeline--justify-"+l.justify,v.value,{"v-timeline--inset-line":!!l.lineInset},s.value,d.value,i.value,l.class],style:[{"--v-timeline-line-thickness":Wt(l.lineThickness)},l.style]},a)),{}}}),Er=fa()({name:"VTimelineDivider",props:{dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:Hl,iconColor:String,lineColor:String,...ha(),...Gl(),...$l(),...Ql()},setup(l,o){let{slots:a}=o;const{sizeClasses:s,sizeStyles:d}=qr(l,"v-timeline-divider__dot"),{backgroundColorStyles:i,backgroundColorClasses:v}=Ll(Jt(l,"dotColor")),{roundedClasses:w}=jr(l,"v-timeline-divider__dot"),{elevationClasses:m}=zr(l),{backgroundColorClasses:I,backgroundColorStyles:j}=Ll(Jt(l,"lineColor")),_={};_["v-timeline-divider--fill-dot"]=l.fillDot;const R={};R.class=["v-timeline-divider",_,l.class],R.style=l.style;const q={};q.class=["v-timeline-divider__before",I.value],q.style=j.value;const T={key:"dot"};T.class=["v-timeline-divider__dot",m.value,w.value,s.value],T.style=d.value;const B={};B.class=["v-timeline-divider__inner-dot",v.value,w.value],B.style=i.value;const oe={};return oe.class=["v-timeline-divider__after",I.value],oe.style=j.value,ya(()=>e("div",R,[e("div",q,null),!l.hideDot&&e("div",T,[e("div",B,[a.default?e(Fr,{key:"icon-defaults",disabled:!l.icon,defaults:{VIcon:{color:l.iconColor,icon:l.icon,size:l.size}}},a.default):e(k,{key:"icon",color:l.iconColor,icon:l.icon,size:l.size},null)])]),e("div",oe,null)])),{}}}),er=fa()({name:"VTimelineItem",props:{density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:Hl,iconColor:String,lineInset:[Number,String],...ha(),...Mr(),...Ql(),...Gl(),...$l(),...ql()},setup(l,o){let{slots:a}=o;const{dimensionStyles:s}=Ir(l),d=D(0),i=D();ht(i,j=>{var _;j&&(d.value=((_=j.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:_.getBoundingClientRect().width)??0)},{flush:"post"});const w={};w["v-timeline-item--fill-dot"]=l.fillDot;const m={class:"v-timeline-item__body"};m.style=s.value;const I={class:"v-timeline-item__opposite"};return ya(()=>{var j,_;return e("div",{class:["v-timeline-item",w,l.class],style:[{"--v-timeline-dot-size":Wt(d.value),"--v-timeline-line-inset":l.lineInset?"calc(var(--v-timeline-dot-size) / 2 + "+Wt(l.lineInset)+")":Wt(0)},l.style]},[e("div",m,[(j=a.default)==null?void 0:j.call(a)]),e(Er,{ref:i,hideDot:l.hideDot,icon:l.icon,iconColor:l.iconColor,size:l.size,elevation:l.elevation,dotColor:l.dotColor,fillDot:l.fillDot,rounded:l.rounded},{default:a.icon}),l.density!=="compact"&&e("div",I,[!l.hideOpposite&&((_=a.opposite)==null?void 0:_.call(a))])])}),{}}}),Or={class:"text-5xl"},Hr=r("span",Or,"!",-1),Gr={class:"text-lg font-weight-medium"},$r=Gr,Ca={};Ca.type=String,Ca.required=!0;const Sa={};Sa.type=Boolean,Sa.required=!0;const Da={};Da.confirmationMsg=Ca,Da.isDialogVisible=Sa;const Yt={__name:"ConfirmDialog",props:Da,emits:["update:isDialogVisible","confirm"],setup(l,{emit:o}){const a=l,s=v=>{o("update:isDialogVisible",v)},d=()=>{o("confirm",!0),s(!1)},i=()=>{o("confirm",!1),o("update:isDialogVisible",!1)};return(v,w)=>{const m={"max-width":"500"};m["model-value"]=a.isDialogVisible,m["onUpdate:modelValue"]=s;const I={class:"text-center px-10 py-6"},j={width:"88px",height:"88px","pointer-events":"none"},_={icon:"",variant:"outlined",color:"warning",class:"mb-4"};_.style=j;const R={class:"align-center justify-center gap-2"},q={variant:"elevated"};q.onClick=d;const T={color:"secondary",variant:"tonal"};return T.onClick=i,n(),g(et,m,{default:t(()=>[e(ye,I,{default:t(()=>[e(ue,null,{default:t(()=>[e(M,_,{default:t(()=>[Hr]),_:1}),r("h6",$r,c(a.confirmationMsg),1)]),_:1}),e(Pe,R,{default:t(()=>[e(M,q,{default:t(()=>[u(" Confirm ")]),_:1}),e(M,T,{default:t(()=>[u(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Il=Kt({id:"UserStoryStore",state:()=>({userStories:[],currentUserStory:null,loading:!1,error:null}),actions:{async fetchUserStories(l=null){this.loading=!0;try{let o="/service/user-stories/";l&&(o+="?requirement="+l);const a=await ve.get(o);if(a.status===200){this.userStories=a.data;const d={};return d.data=a.data,d.error=null,d}const s={data:[]};return s.error=a.data,s}catch(o){this.error=o.message||"Failed to fetch user stories";const a={data:[]};return a.error=this.error,a}finally{this.loading=!1}},async fetchUserStoryById(l){this.loading=!0;try{const o=await ve.get("/service/user-stories/"+l+"/");if(o.status===200){this.currentUserStory=o.data;const s={};return s.data=o.data,s.error=null,s}const a={data:null};return a.error=o.data,a}catch(o){this.error=o.message||"Failed to fetch user story";const a={data:null};return a.error=this.error,a}finally{this.loading=!1}},async createUserStory(l){this.loading=!0;try{const o=await ve.post("/service/user-stories/",l);if(o.status===201){this.userStories.length&&this.userStories.push(o.data);const s={};return s.data=o.data,s.error=null,s}const a={data:null};return a.error=o.data,a}catch(o){this.error=o.message||"Failed to create user story";const a={data:null};return a.error=this.error,a}finally{this.loading=!1}},async updateUserStory(l,o){this.loading=!0;try{const a=await ve.put("/service/user-stories/"+l+"/",o);if(a.status===200){if(this.userStories.length){const i=this.userStories.findIndex(v=>v.id===l);i!==-1&&(this.userStories[i]=a.data)}this.currentUserStory&&this.currentUserStory.id===l&&(this.currentUserStory=a.data);const d={};return d.data=a.data,d.error=null,d}const s={data:null};return s.error=a.data,s}catch(a){this.error=a.message||"Failed to update user story";const s={data:null};return s.error=this.error,s}finally{this.loading=!1}},async deleteUserStory(l){this.loading=!0;try{const o=await ve.delete("/service/user-stories/"+l+"/");if(o.status===204)return this.userStories.length&&(this.userStories=this.userStories.filter(d=>d.id!==l)),this.currentUserStory&&this.currentUserStory.id===l&&(this.currentUserStory=null),{success:!0,error:null};const a={success:!1};return a.error=o.data,a}catch(o){this.error=o.message||"Failed to delete user story";const a={success:!1};return a.error=this.error,a}finally{this.loading=!1}},async regenerateUserStory(l,o=""){this.loading=!0;try{const a={};a.feedback=o;const s=await ve.post("/service/user-stories/"+l+"/regenerate/",a);if(s.status===202){const i={};return i.data=s.data,i.error=null,i}const d={data:null};return d.error=s.data,d}catch(a){this.error=a.message||"Failed to regenerate user story";const s={data:null};return s.error=this.error,s}finally{this.loading=!1}},async createComment(l,o){this.loading=!0;try{const a={};a.user_story=l,a.text=o.text,a.status=o.status||"active";const s=await ve.post("/service/user-story-comments/",a);if(s.status===201){const i={};return i.data=s.data,i.error=null,i}const d={data:null};return d.error=s.data,d}catch(a){this.error=a.message||"Failed to create comment";const s={data:null};return s.error=this.error,s}finally{this.loading=!1}},async deleteComment(l){this.loading=!0;try{const o=await ve.delete("/service/user-story-comments/"+l+"/");if(o.status===204)return{success:!0,error:null};const a={success:!1};return a.error=o.data,a}catch(o){this.error=o.message||"Failed to delete comment";const a={success:!1};return a.error=this.error,a}finally{this.loading=!1}}}}),Pl=Kt({id:"UmlDiagramStore",state:()=>({diagrams:[],currentDiagram:null,loading:!1,error:null}),actions:{async fetchDiagrams(l=null,o=null){this.loading=!0;try{let a="/service/uml-diagrams/";const s={};l&&(s.project=l),o&&(s.diagram_type=o);const d={};d.params=s;const i=await ve.get(a,d);if(i.status===200){this.diagrams=i.data;const w={};return w.data=i.data,w.error=null,w}const v={data:[]};return v.error=i.data,v}catch(a){this.error=a.message||"Failed to fetch UML diagrams";const s={data:[]};return s.error=this.error,s}finally{this.loading=!1}},async fetchDiagramById(l){this.loading=!0;try{const o=await ve.get("/service/uml-diagrams/"+l+"/");if(o.status===200){this.currentDiagram=o.data;const s={};return s.data=o.data,s.error=null,s}const a={data:null};return a.error=o.data,a}catch(o){this.error=o.message||"Failed to fetch UML diagram";const a={data:null};return a.error=this.error,a}finally{this.loading=!1}},async createDiagram(l){this.loading=!0;try{const o=await ve.post("/service/uml-diagrams/",l);if(o.status===201){this.diagrams.length&&this.diagrams.push(o.data);const s={};return s.data=o.data,s.error=null,s}const a={data:null};return a.error=o.data,a}catch(o){this.error=o.message||"Failed to create UML diagram";const a={data:null};return a.error=this.error,a}finally{this.loading=!1}},async updateDiagram(l,o){this.loading=!0;try{const a=await ve.put("/service/uml-diagrams/"+l+"/",o);if(a.status===200){if(this.diagrams.length){const i=this.diagrams.findIndex(v=>v.id===l);i!==-1&&(this.diagrams[i]=a.data)}this.currentDiagram&&this.currentDiagram.id===l&&(this.currentDiagram=a.data);const d={};return d.data=a.data,d.error=null,d}const s={data:null};return s.error=a.data,s}catch(a){this.error=a.message||"Failed to update UML diagram";const s={data:null};return s.error=this.error,s}finally{this.loading=!1}},async deleteDiagram(l){this.loading=!0;try{const o=await ve.delete("/service/uml-diagrams/"+l+"/");if(o.status===204)return this.diagrams.length&&(this.diagrams=this.diagrams.filter(d=>d.id!==l)),this.currentDiagram&&this.currentDiagram.id===l&&(this.currentDiagram=null),{success:!0,error:null};const a={success:!1};return a.error=o.data,a}catch(o){this.error=o.message||"Failed to delete UML diagram";const a={success:!1};return a.error=this.error,a}finally{this.loading=!1}},async regenerateDiagram(l){this.loading=!0;try{const o=await ve.post("/service/uml-diagrams/"+l+"/regenerate/");if(o.status===202){const s={};return s.data=o.data,s.error=null,s}const a={data:null};return a.error=o.data,a}catch(o){this.error=o.message||"Failed to regenerate UML diagram";const a={data:null};return a.error=this.error,a}finally{this.loading=!1}},async generateDiagrams(l,o="class"){this.loading=!0;try{const a={};a.diagram_type=o;const s=await ve.post("/service/projects/"+l+"/generate_uml_diagrams/",a);if(s.status===202){const i={};return i.data=s.data,i.error=null,i}const d={data:null};return d.error=s.data,d}catch(a){this.error=a.message||"Failed to generate UML diagrams";const s={data:null};return s.error=this.error,s}finally{this.loading=!1}}}}),ct=l=>(nt("data-v-3f565aa3"),l=l(),it(),l),Qr={class:"d-flex flex-column gap-4"},Wr=Qr,Jr={class:"d-flex flex-column gap-2"},Zr=Jr,Kr={class:"d-flex align-center"},Xr=Kr,Yr={"min-width":"120px"},tr={class:"text-medium-emphasis font-weight-medium me-3"};tr.style=Yr;const es=ct(()=>r("span",tr,"Created:",-1)),ts={class:"d-flex align-center"},as=ts,ls={"min-width":"120px"},ar={class:"text-medium-emphasis font-weight-medium me-3"};ar.style=ls;const rs=ct(()=>r("span",ar,"Last Updated:",-1)),ss={class:"d-flex align-center"},os=ss,ns={"min-width":"120px"},lr={class:"text-medium-emphasis font-weight-medium me-3"};lr.style=ns;const is=ct(()=>r("span",lr,"Type:",-1)),us={class:"d-flex align-center"},cs=us,ds={"min-width":"120px"},rr={class:"text-medium-emphasis font-weight-medium me-3"};rr.style=ds;const ms=ct(()=>r("span",rr,"Language:",-1)),ps={key:0,class:"d-flex align-center"},vs=ps,fs={"min-width":"120px"},sr={class:"text-medium-emphasis font-weight-medium me-3"};sr.style=fs;const hs=ct(()=>r("span",sr,"Deadline:",-1)),ys={key:1,class:"d-flex align-center"},gs=ys,_s={"min-width":"120px"},or={class:"text-medium-emphasis font-weight-medium me-3"};or.style=_s;const bs=ct(()=>r("span",or,"Budget:",-1)),xs={key:2,class:"d-flex align-center"},ks=xs,ws={"min-width":"120px"},nr={class:"text-medium-emphasis font-weight-medium me-3"};nr.style=ws;const Vs=ct(()=>r("span",nr,"Color Scheme:",-1)),Cs={class:"d-flex align-center"},Ss=Cs,Ds={class:"ms-2"},Us=Ds,qs={class:"whitespace-pre-wrap"},js=qs,zs={class:"d-flex flex-column gap-4"},Fs=zs,Ms={key:0},Is=Ms,Ps={class:"text-subtitle-1 font-weight-bold mb-2"},As=ct(()=>r("h6",Ps,"Technology Stack",-1)),Ls={class:"whitespace-pre-wrap"},Rs=Ls,Bs={key:1},Ts=Bs,Ns={class:"text-subtitle-1 font-weight-bold mb-2"},Es=ct(()=>r("h6",Ns,"Operating System",-1)),Os={class:"d-flex flex-column gap-4"},Hs=Os,Gs={class:"whitespace-pre-wrap mb-4"},$s=Gs,Qs={key:0,class:"whitespace-pre-wrap"},Ws=Qs,Js={class:"text-subtitle-1 font-weight-bold mb-2"},Zs=ct(()=>r("h6",Js,"Detailed Description",-1)),Ks={class:"whitespace-pre-wrap"},Xs=Ks,Ys={class:"whitespace-pre-wrap"},eo=Ys,to={class:"whitespace-pre-wrap"},ao=to,Ua={};Ua.type=Object,Ua.required=!0;const qa={};qa.type=Boolean,qa.default=!1;const ja={};ja.project=Ua,ja.loading=qa;const lo=ot({__name:"ProjectDetailsInfo",props:ja,setup(l){const o=l,a=w=>{if(!w)return"Not set";const m={year:"numeric",month:"long",day:"numeric"};return new Date(parseInt(w)).toLocaleDateString("en-US",m)},s=re(()=>{switch(o.project.status){case"draft":return"warning";case"active":return"success";case"archived":return"secondary";case"completed":return"info";default:return"primary"}}),d=re(()=>{switch(o.project.type_of_application){case"website":return"tabler-world-www";case"mobile":return"tabler-device-mobile";case"desktop":return"tabler-device-desktop";case"api":return"tabler-api";default:return"tabler-code"}}),i={en:"English",ru:"Russian",de:"German"},v=i;return(w,m)=>{const I={class:"pa-6"},j={cols:"12",md:"6"},_={border:"",class:"project-info-card"},R={color:"primary",variant:"tonal",rounded:"",size:"42"},q={size:"small"},T={size:"small"},B={key:0,border:"",class:"project-info-card"},oe={color:"primary",icon:"tabler-list-details"},ee={key:1,border:"",class:"project-info-card"},de={color:"primary",icon:"tabler-device-laptop-code"},b={cols:"12",md:"6"},h={border:"",class:"project-info-card"},N={color:"primary",icon:"tabler-file-description"},J={key:0,border:"",class:"project-info-card"},se={color:"primary",icon:"tabler-users"},E={key:1,border:"",class:"project-info-card"},F={color:"primary",icon:"tabler-chart-bubble"},V={key:2,border:"",class:"project-info-card"},$={color:"primary",icon:"tabler-star"};return n(),g(ue,I,{default:t(()=>[e(xe,null,{default:t(()=>[e(L,j,{default:t(()=>[r("div",Wr,[e(ye,_,{default:t(()=>[e(Le,null,{prepend:t(()=>[e(_t,R,{default:t(()=>[e(k,{icon:p(d)},null,8,["icon"])]),_:1})]),append:t(()=>[e(ie,{size:"small",color:p(s),label:""},{default:t(()=>[u(c(Xt(l.project.status)),1)]),_:1},8,["color"])]),default:t(()=>[e(ke,null,{default:t(()=>[u("Project Overview")]),_:1})]),_:1}),e(ge),e(ue,null,{default:t(()=>[r("div",Zr,[r("div",Xr,[es,r("span",null,c(a(l.project.created_at)),1)]),r("div",as,[rs,r("span",null,c(a(l.project.updated_at)),1)]),r("div",os,[is,e(ie,q,{default:t(()=>[u(c(l.project.type_of_application),1)]),_:1})]),r("div",cs,[ms,e(ie,T,{default:t(()=>{return[u(c((K=l.project.language,v[K]||K)),1)];var K}),_:1})]),l.project.deadline?(n(),f("div",vs,[hs,r("span",null,c(a(l.project.deadline)),1)])):S("",!0),l.project.preliminary_budget?(n(),f("div",gs,[bs,r("span",null,"$"+c(l.project.preliminary_budget),1)])):S("",!0),l.project.color_scheme?(n(),f("div",ks,[Vs,r("div",Ss,[(n(!0),f(fe,null,Se(l.project.color_scheme.split(","),(K,_e)=>(n(),f("div",{key:_e,class:"color-swatch rounded me-1",style:Zt({backgroundColor:K.trim()}),title:"color"},null,4))),128)),r("span",Us,c(l.project.color_scheme),1)])])):S("",!0)])]),_:1})]),_:1}),l.project.additional_requirements?(n(),g(ye,B,{default:t(()=>[e(Le,null,{prepend:t(()=>[e(k,oe)]),default:t(()=>[e(ke,null,{default:t(()=>[u("Additional Requirements")]),_:1})]),_:1}),e(ge),e(ue,null,{default:t(()=>[r("div",js,c(l.project.additional_requirements),1)]),_:1})]),_:1})):S("",!0),l.project.technology_stack||l.project.operating_system?(n(),g(ye,ee,{default:t(()=>[e(Le,null,{prepend:t(()=>[e(k,de)]),default:t(()=>[e(ke,null,{default:t(()=>[u("Technical Details")]),_:1})]),_:1}),e(ge),e(ue,null,{default:t(()=>[r("div",Fs,[l.project.technology_stack?(n(),f("div",Is,[As,r("div",Rs,c(l.project.technology_stack),1)])):S("",!0),l.project.operating_system?(n(),f("div",Ts,[Es,r("div",null,c(l.project.operating_system),1)])):S("",!0)])]),_:1})]),_:1})):S("",!0)])]),_:1}),e(L,b,{default:t(()=>[r("div",Hs,[e(ye,h,{default:t(()=>[e(Le,null,{prepend:t(()=>[e(k,N)]),default:t(()=>[e(ke,null,{default:t(()=>[u("Description")]),_:1})]),_:1}),e(ge),e(ue,null,{default:t(()=>[r("div",$s,c(l.project.short_description),1),l.project.application_description?(n(),f("div",Ws,[Zs,r("div",null,c(l.project.application_description),1)])):S("",!0)]),_:1})]),_:1}),l.project.target_users?(n(),g(ye,J,{default:t(()=>[e(Le,null,{prepend:t(()=>[e(k,se)]),default:t(()=>[e(ke,null,{default:t(()=>[u("Target Users")]),_:1})]),_:1}),e(ge),e(ue,null,{default:t(()=>[r("div",Xs,c(l.project.target_users),1)]),_:1})]),_:1})):S("",!0),l.project.non_functional_requirements?(n(),g(ye,E,{default:t(()=>[e(Le,null,{prepend:t(()=>[e(k,F)]),default:t(()=>[e(ke,null,{default:t(()=>[u("Non-Functional Requirements")]),_:1})]),_:1}),e(ge),e(ue,null,{default:t(()=>[r("div",eo,c(l.project.non_functional_requirements),1)]),_:1})]),_:1})):S("",!0),l.project.priority_modules?(n(),g(ye,V,{default:t(()=>[e(Le,null,{prepend:t(()=>[e(k,$)]),default:t(()=>[e(ke,null,{default:t(()=>[u("Priority Modules/Features")]),_:1})]),_:1}),e(ge),e(ue,null,{default:t(()=>[r("div",ao,c(l.project.priority_modules),1)]),_:1})]),_:1})):S("",!0)])]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-3f565aa3"]]),ir=Kt({id:"RequirementStore",state:()=>({requirements:[],currentRequirement:null,loading:!1,error:null}),actions:{async fetchRequirements(l=null){this.loading=!0;try{let o="/service/requirements/";l&&(o+="?project="+l);const a=await ve.get(o);if(a.status===200){this.requirements=a.data;const d={};return d.data=a.data,d.error=null,d}const s={data:[]};return s.error=a.data,s}catch(o){this.error=o.message||"Failed to fetch requirements";const a={data:[]};return a.error=this.error,a}finally{this.loading=!1}},async fetchRequirementById(l){this.loading=!0;try{const o=await ve.get("/service/requirements/"+l+"/");if(o.status===200){this.currentRequirement=o.data;const s={};return s.data=o.data,s.error=null,s}const a={data:null};return a.error=o.data,a}catch(o){this.error=o.message||"Failed to fetch requirement";const a={data:null};return a.error=this.error,a}finally{this.loading=!1}},async createRequirement(l){this.loading=!0;try{const o=await ve.post("/service/requirements/",l);if(o.status===201){this.requirements.length&&this.requirements.push(o.data);const s={};return s.data=o.data,s.error=null,s}const a={data:null};return a.error=o.data,a}catch(o){this.error=o.message||"Failed to create requirement";const a={data:null};return a.error=this.error,a}finally{this.loading=!1}},async updateRequirement(l,o){this.loading=!0;try{const a=await ve.put("/service/requirements/"+l+"/",o);if(a.status===200){if(this.requirements.length){const i=this.requirements.findIndex(v=>v.id===l);i!==-1&&(this.requirements[i]=a.data)}this.currentRequirement&&this.currentRequirement.id===l&&(this.currentRequirement=a.data);const d={};return d.data=a.data,d.error=null,d}const s={data:null};return s.error=a.data,s}catch(a){this.error=a.message||"Failed to update requirement";const s={data:null};return s.error=this.error,s}finally{this.loading=!1}},async deleteRequirement(l){this.loading=!0;try{const o=await ve.delete("/service/requirements/"+l+"/");if(o.status===204)return this.requirements.length&&(this.requirements=this.requirements.filter(d=>d.id!==l)),this.currentRequirement&&this.currentRequirement.id===l&&(this.currentRequirement=null),{success:!0,error:null};const a={success:!1};return a.error=o.data,a}catch(o){this.error=o.message||"Failed to delete requirement";const a={success:!1};return a.error=this.error,a}finally{this.loading=!1}},async createComment(l,o){this.loading=!0;try{const a={};a.requirement=l,a.text=o.text,a.status=o.status||"active",a.responsible_user=o.responsibleUser||null;const s=await ve.post("/service/requirement-comments/",a);if(s.status===201){const i={};return i.data=s.data,i.error=null,i}const d={data:null};return d.error=s.data,d}catch(a){this.error=a.message||"Failed to create comment";const s={data:null};return s.error=this.error,s}finally{this.loading=!1}},async deleteComment(l){this.loading=!0;try{const o=await ve.delete("/service/requirement-comments/"+l+"/");if(o.status===204)return{success:!0,error:null};const a={success:!1};return a.error=o.data,a}catch(o){this.error=o.message||"Failed to delete comment";const a={success:!1};return a.error=this.error,a}finally{this.loading=!1}}}}),dt=l=>(nt("data-v-352863e5"),l=l(),it(),l),ro={key:0,class:"text-h5"},so=ro,oo={key:1,class:"text-h5"},no=oo,io={key:0},uo=io,co={key:1},mo=co,po={class:"d-flex align-center mb-5"},vo=po,fo={class:"text-medium-emphasis d-flex align-center"},ho=fo,yo={class:"text-caption me-4"},go=yo,_o={class:"text-caption"},bo=_o,xo={class:"text-h4 mb-4"},ko=xo,wo={class:"text-body-1 whitespace-pre-wrap"},Vo=wo,Co={key:0,class:"text-center pa-6"},So=Co,Do={class:"text-h6 mb-2"},Uo=dt(()=>r("h4",Do,"No User Stories Available",-1)),qo={class:"text-medium-emphasis mb-4"},jo=dt(()=>r("p",qo," This requirement doesn't have any user stories yet. ",-1)),zo={key:1},Fo=zo,Mo={class:"d-flex justify-space-between align-center mb-4"},Io=Mo,Po={class:"text-h5"},Ao=dt(()=>r("h5",Po,"User Stories",-1)),Lo={class:"mb-2"},Ro=Lo,Bo=dt(()=>r("strong",null,"I want to:",-1)),To=dt(()=>r("strong",null,"So that:",-1)),No={key:0,class:"mt-3"},Eo=No,Oo={class:"text-subtitle-2"},Ho=dt(()=>r("div",Oo,"Acceptance Criteria:",-1)),Go={class:"pl-4"},$o=Go,Qo={key:0},Wo=Qo,Jo={key:0,class:"text-center mt-4"},Zo=Jo,Ko={key:0,class:"text-center pa-6"},Xo=Ko,Yo={class:"text-h6 mb-2"},en=dt(()=>r("h4",Yo,"No History Available",-1)),tn={class:"text-medium-emphasis"},an=dt(()=>r("p",tn," This requirement hasn't been modified since its creation. ",-1)),ln={key:1},rn=ln,sn={class:"text-caption"},on=sn,nn={class:"text-caption text-medium-emphasis"},un=nn,cn={class:"d-flex align-center mb-2"},dn=cn,mn={class:"text-caption"},pn=mn,vn={class:"text-body-2 whitespace-pre-wrap"},fn=vn,hn={class:"d-flex justify-end mt-2"},yn=hn,gn={key:1,class:"text-center pa-6"},_n=gn,bn={class:"text-h6 mb-2"},xn=dt(()=>r("h4",bn,"No Comments Yet",-1)),kn={class:"text-medium-emphasis"},wn=dt(()=>r("p",kn," Be the first to comment on this requirement. ",-1)),Vn={key:2},Cn=Vn,Sn={class:"d-flex align-center"},Dn=Sn,Un={class:"d-flex align-center"},qn=Un,jn={class:"text-caption text-medium-emphasis ml-2"},zn=jn,Fn={class:"comment-text mt-2 whitespace-pre-wrap"},Mn=Fn,za={};za.type=Boolean,za.default=!1;const Fa={};Fa.type=Object,Fa.required=!0;const Ma={};Ma.type=Boolean,Ma.default=!1;const Ia={};Ia.type=Boolean,Ia.default=!1;const Pa={};Pa.type=Boolean,Pa.default=!1;const It={};It.modelValue=za,It.requirement=Fa,It.isAdmin=Ma,It.hasManagerPermission=Ia,It.hasModeratorPermission=Pa;const In=ot({__name:"RequirementDetailsDialog",props:It,emits:["update:modelValue","update","delete","view-user-stories"],setup(l,{emit:o}){const a=l,s=re({get:()=>a.modelValue,set:te=>o("update:modelValue",te)}),d=ir(),i=D(0),v=D(!1),w={...a.requirement},m=D(w),I=D(""),j=D(!1),_={show:!1,text:"",color:"success"},R=D(_),q={title:"Functional",value:"functional"},T={title:"Non-Functional",value:"nonfunctional"},B={title:"UI/UX",value:"uiux"},oe={title:"Other",value:"other"},ee=[q,T,B,oe],de={title:"Draft",value:"draft"},b={title:"Active",value:"active"},h={title:"Archived",value:"archived"},N={title:"Completed",value:"completed"},J=[de,b,h,N],se={title:"Feature",value:"feature"},E={title:"Constraint",value:"constraint"},F={title:"Quality",value:"quality"},V={title:"Interface",value:"interface"},$={title:"Security",value:"security"},K={title:"Performance",value:"performance"},_e={title:"Other",value:"other"},Q=[se,E,F,V,$,K,_e],x=re(()=>a.requirement.history||[]),X=re(()=>a.requirement.comments||[]),Z=re(()=>a.requirement.user_stories||[]),z=te=>{if(!te)return"";te=parseInt(te);const H={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(te).toLocaleDateString("en-US",H)},W=()=>{if(v.value){const te={...a.requirement};m.value=te}v.value=!v.value},y=()=>{o("update",m.value),v.value=!1},C=()=>{o("delete")},U=()=>{o("view-user-stories",a.requirement),s.value=!1},le=async()=>{if(I.value.trim()){j.value=!0;try{const te={};te.text=I.value,te.status="active";const{data:H,error:O}=await d.createComment(a.requirement.id,te);if(H&&!O){pe("Comment added successfully"),I.value="";const{data:me}=await d.fetchRequirementById(a.requirement.id);me&&Object.assign(a.requirement,me)}else pe("Failed to add comment","error")}catch(te){pe("Failed to add comment: "+te.message,"error")}finally{j.value=!1}}},pe=(te,H="success")=>{const O={show:!0};O.text=te,O.color=H,R.value=O};return ht(()=>a.requirement,te=>{const H={...te};m.value=H},{deep:!0}),(te,H)=>{const O=Ge("IconBtn"),me={class:"d-flex pt-5 px-5"},we={icon:"tabler-x"},A={class:"pb-0"},ne={value:"0"},Ce={size:"18",icon:"tabler-info-circle",start:""},qe={value:"1"},Be={size:"18",icon:"tabler-user-check",start:""},Te={key:0,size:"x-small",color:"primary",class:"ms-2"},Me={value:"2"},be={size:"18",icon:"tabler-history",start:""},Ie={key:0,size:"x-small",color:"primary",class:"ms-2"},Y={value:"3"},Ze={size:"18",icon:"tabler-messages",start:""},Ke={key:0,size:"x-small",color:"primary",class:"ms-2"},at={"min-height":"400px","max-height":"70vh"},lt={class:"pa-6"};lt.style=at;const ce={value:"0"},$e={class:"mt-3"},mt={cols:"12"},pt={cols:"12",md:"4"},Ne={cols:"12",md:"4"},rt={cols:"12",md:"4"},kt={cols:"12"},Dt={color:"secondary",size:"small",label:"",class:"ms-2"},yt={key:0,color:"info",size:"small",label:"",class:"ms-2"},Rt={size:"18",icon:"tabler-calendar",class:"me-1"},Bt={size:"18",icon:"tabler-calendar-plus",class:"me-1"},Tt={value:"1"},Nt={icon:"tabler-user-check",size:"64",color:"secondary",class:"mb-3"},Ut={color:"primary"};Ut.onClick=U;const qt={color:"primary",variant:"tonal"};qt.onClick=U;const wt={color:"primary",variant:"tonal"};wt.onClick=U;const Et={value:"2"},jt={icon:"tabler-history",size:"64",color:"secondary",class:"mb-3"},zt={density:"compact",align:"start"},Ft={value:"3"},Ot={class:"mt-3"},Mt={cols:"12"},Ht={cols:"12"},G={key:0,class:"mb-4"},Ee={icon:"tabler-messages",size:"64",color:"secondary",class:"mb-3"},Fe={class:"pa-4"},Xe={key:0},st={color:"secondary",variant:"tonal"};st.onClick=W;const gt={key:1},Ye={key:0,color:"error",variant:"tonal","prepend-icon":"tabler-trash"};Ye.onClick=C;const Vt={key:1,color:"info",variant:"tonal","prepend-icon":"tabler-user-check",class:"ms-2"};Vt.onClick=U;const ae={key:2,color:"primary","prepend-icon":"tabler-edit"};ae.onClick=W;const De={icon:"tabler-x"};return n(),g(et,{modelValue:p(s),"onUpdate:modelValue":H[11]||(H[11]=P=>bt(s)?s.value=P:null),"max-width":"900",scrollable:""},{default:t(()=>[e(ye,null,{default:t(()=>[e(ke,me,{default:t(()=>[v.value?(n(),f("h5",so,"Edit Requirement")):(n(),f("h5",no,"Requirement Details")),e(he),e(O,{onClick:H[0]||(H[0]=P=>s.value=!1)},{default:t(()=>[e(k,we)]),_:1})]),_:1}),e(ue,A,{default:t(()=>[e(Fl,{modelValue:i.value,"onUpdate:modelValue":H[1]||(H[1]=P=>i.value=P),"slider-color":"primary","align-tabs":"start"},{default:t(()=>[e(Oe,ne,{default:t(()=>[e(k,Ce),u(" Details ")]),_:1}),e(Oe,qe,{default:t(()=>[e(k,Be),u(" User Stories "),p(Z).length?(n(),g(ie,Te,{default:t(()=>[u(c(p(Z).length),1)]),_:1})):S("",!0)]),_:1}),e(Oe,Me,{default:t(()=>[e(k,be),u(" History "),p(x).length?(n(),g(ie,Ie,{default:t(()=>[u(c(p(x).length),1)]),_:1})):S("",!0)]),_:1}),e(Oe,Y,{default:t(()=>[e(k,Ze),u(" Comments "),p(X).length?(n(),g(ie,Ke,{default:t(()=>[u(c(p(X).length),1)]),_:1})):S("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(ge),e(ue,lt,{default:t(()=>[e(Ml,{modelValue:i.value,"onUpdate:modelValue":H[8]||(H[8]=P=>i.value=P),class:"mt-5"},{default:t(()=>[e(He,ce,{default:t(()=>[v.value?(n(),f("div",uo,[e(xt,{onSubmit:ut(y,["prevent"])},{default:t(()=>[e(xe,$e,{default:t(()=>[e(L,mt,{default:t(()=>[e(ze,{modelValue:m.value.title,"onUpdate:modelValue":H[2]||(H[2]=P=>m.value.title=P),label:"Title",required:"",rules:[P=>!!P||"Title is required"]},null,8,["modelValue","rules"])]),_:1}),e(L,pt,{default:t(()=>[e(Ae,{modelValue:m.value.category,"onUpdate:modelValue":H[3]||(H[3]=P=>m.value.category=P),label:"Category",items:ee,required:""},null,8,["modelValue"])]),_:1}),e(L,Ne,{default:t(()=>[e(Ae,{modelValue:m.value.requirement_type,"onUpdate:modelValue":H[4]||(H[4]=P=>m.value.requirement_type=P),label:"Requirement Type",items:Q,required:""},null,8,["modelValue"])]),_:1}),e(L,rt,{default:t(()=>[e(Ae,{modelValue:m.value.status,"onUpdate:modelValue":H[5]||(H[5]=P=>m.value.status=P),label:"Status",items:J,required:""},null,8,["modelValue"])]),_:1}),e(L,kt,{default:t(()=>[e(Je,{modelValue:m.value.description,"onUpdate:modelValue":H[6]||(H[6]=P=>m.value.description=P),label:"Description",required:"",rows:"8",rules:[P=>!!P||"Description is required"]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])):(n(),f("div",mo,[r("div",vo,[e(ie,{color:p(Va)(l.requirement.category),size:"small",label:"",class:"me-2"},{default:t(()=>[u(c(l.requirement.category),1)]),_:1},8,["color"]),e(ie,{color:p(We)(l.requirement.status),size:"small",label:""},{default:t(()=>{return[u(c((P=l.requirement.status,P?P.charAt(0).toUpperCase()+P.slice(1):"")),1)];var P}),_:1},8,["color"]),e(ie,Dt,{default:t(()=>[u(" v"+c(l.requirement.version_number),1)]),_:1}),l.requirement.requirement_type?(n(),g(ie,yt,{default:t(()=>[u(c(l.requirement.requirement_type),1)]),_:1})):S("",!0),e(he),r("div",ho,[e(k,Rt),r("span",go,"Updated: "+c(z(l.requirement.updated_at)),1),e(k,Bt),r("span",bo,"Created: "+c(z(l.requirement.created_at)),1)])]),r("h4",ko,c(l.requirement.title),1),r("div",Vo,c(l.requirement.description),1)]))]),_:1}),e(He,Tt,{default:t(()=>[p(Z).length===0?(n(),f("div",So,[e(k,Nt),Uo,jo,e(M,Ut,{default:t(()=>[u(" Generate User Stories ")]),_:1})])):(n(),f("div",Fo,[r("div",Io,[Ao,e(M,qt,{default:t(()=>[u(" View All User Stories ")]),_:1})]),(n(!0),f(fe,null,Se(p(Z).slice(0,3),(P,je)=>{const Ue={};return Ue.key=P.id,Ue.class="mb-4",Ue.border="",n(),g(ye,Ue,{default:t(()=>[e(Le,null,{append:t(()=>[e(ie,{color:p(We)(P.status),size:"small",label:""},{default:t(()=>[u(c(P.status),1)]),_:2},1032,["color"])]),default:t(()=>[e(ke,null,{default:t(()=>[u("As a "+c(P.role),1)]),_:2},1024)]),_:2},1024),e(ue,null,{default:t(()=>[r("p",Ro,[Bo,u(" "+c(P.action),1)]),r("p",null,[To,u(" "+c(P.benefit),1)]),P.acceptance_criteria&&P.acceptance_criteria.length>0?(n(),f("div",Eo,[Ho,r("ul",$o,[(n(!0),f(fe,null,Se(P.acceptance_criteria.slice(0,2),(vt,Ct)=>{const Qe={};return Qe.key=Ct,n(),f("li",Qe,c(vt),1)}),128)),P.acceptance_criteria.length>2?(n(),f("li",Wo," ...and "+c(P.acceptance_criteria.length-2)+" more ",1)):S("",!0)])])):S("",!0)]),_:2},1024)]),_:2},1024)}),128)),p(Z).length>3?(n(),f("div",Zo,[e(M,wt,{default:t(()=>[u(" View All "+c(p(Z).length)+" User Stories ",1)]),_:1})])):S("",!0)]))]),_:1}),e(He,Et,{default:t(()=>[p(x).length===0?(n(),f("div",Xo,[e(k,jt),en,an])):(n(),f("div",rn,[e(Yl,zt,{default:t(()=>[(n(!0),f(fe,null,Se(p(x),(P,je)=>{const Ue={};Ue.key=je,Ue["dot-color"]="primary",Ue.size="small";const vt={border:""};return n(),g(er,Ue,{opposite:t(()=>[r("div",on,c(z(P.changed_at)),1),r("div",un,"v"+c(P.version_number),1)]),default:t(()=>[e(ye,vt,{default:t(()=>[e(Le,null,{append:t(()=>[e(ie,{color:p(We)(P.status),size:"small",label:"",class:"ms-2"},{default:t(()=>[u(c(P.status),1)]),_:2},1032,["color"])]),default:t(()=>[e(ke,null,{default:t(()=>[u(c(P.title),1)]),_:2},1024)]),_:2},1024),e(ue,null,{default:t(()=>[r("div",dn,[e(ie,{color:p(Va)(P.category),size:"small",label:"",class:"me-2"},{default:t(()=>[u(c(P.category),1)]),_:2},1032,["color"]),r("span",pn," Changed by: "+c(P.changed_by?P.changed_by.username:"Unknown"),1)]),r("div",fn,c(P.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)}),128))]),_:1})]))]),_:1}),e(He,Ft,{default:t(()=>[e(xe,Ot,{default:t(()=>[e(L,Mt,{default:t(()=>[e(Je,{modelValue:I.value,"onUpdate:modelValue":H[7]||(H[7]=P=>I.value=P),label:"Add a comment",rows:"3",counter:"",disabled:j.value},null,8,["modelValue","disabled"]),r("div",yn,[e(M,{color:"primary",size:"small",loading:j.value,disabled:!I.value.trim(),onClick:le},{default:t(()=>[u(" Add Comment ")]),_:1},8,["loading","disabled"])])]),_:1}),e(L,Ht,{default:t(()=>[p(X).length?(n(),g(ge,G)):S("",!0),p(X).length===0?(n(),f("div",_n,[e(k,Ee),xn,wn])):(n(),f("div",Cn,[(n(!0),f(fe,null,Se(p(X),P=>{const je={};je.key=P.id,je.class="comment-item mb-4";const Ue={border:""},vt={class:"py-2"},Ct={color:"primary",variant:"tonal",size:"36",class:"me-3"},Qe={icon:"tabler-user"},Vr={icon:"tabler-trash",size:"18"};return n(),f("div",je,[e(ye,Ue,{default:t(()=>[e(ue,vt,{default:t(()=>[r("div",Dn,[e(_t,Ct,{default:t(()=>[e(k,Qe)]),_:1}),r("div",null,[r("div",qn,[r("strong",null,c(P.user?P.user.username:"Unknown User"),1),r("div",zn,c(z(P.created_at)),1)])]),e(he),l.isAdmin||l.hasManagerPermission?(n(),g(O,{key:0,size:"small",color:"error",variant:"text",onClick:C1=>(async Cr=>{j.value=!0;try{const{success:ka,error:Sr}=await d.deleteComment(Cr);if(ka&&!Sr){pe("Comment deleted successfully");const{data:Al}=await d.fetchRequirementById(a.requirement.id);Al&&Object.assign(a.requirement,Al)}else pe("Failed to delete comment","error")}catch(ka){pe("Failed to delete comment: "+ka.message,"error")}finally{j.value=!1}})(P.id),disabled:j.value},{default:t(()=>[e(k,Vr)]),_:2},1032,["onClick","disabled"])):S("",!0)]),r("div",Mn,c(P.text),1)]),_:2},1024)]),_:2},1024)])}),128))]))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(ge),e(Pe,Fe,{default:t(()=>[v.value?(n(),f(fe,Xe,[e(M,st,{default:t(()=>[u(" Cancel ")]),_:1}),e(he),e(M,{color:"primary",onClick:y},{default:t(()=>[u(" Save Changes ")]),_:1})],64)):(n(),f(fe,gt,[l.isAdmin?(n(),g(M,Ye,{default:t(()=>[u(" Delete ")]),_:1})):S("",!0),l.hasModeratorPermission&&p(Z).length===0?(n(),g(M,Vt,{default:t(()=>[u(" Generate User Stories ")]),_:1})):S("",!0),e(he),l.hasModeratorPermission?(n(),g(M,ae,{default:t(()=>[u(" Edit ")]),_:1})):S("",!0)],64))]),_:1})]),_:1}),e(tt,{modelValue:R.value.show,"onUpdate:modelValue":H[10]||(H[10]=P=>R.value.show=P),color:R.value.color,timeout:5e3},{actions:t(()=>[e(O,{onClick:H[9]||(H[9]=P=>R.value.show=!1)},{default:t(()=>[e(k,De)]),_:1})]),default:t(()=>[u(c(R.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1},8,["modelValue"])}}},[["__scopeId","data-v-352863e5"]]),Pn={class:"text-h5"},An=Pn,Aa={};Aa.type=Boolean,Aa.default=!1;const La={};La.type=Boolean,La.default=!1;const Ra={};Ra.type=Object,Ra.default=()=>({});const aa={};aa.modelValue=Aa,aa.editMode=La,aa.requirementData=Ra;const Ln={__name:"RequirementCreateDialog",props:aa,emits:["update:modelValue","submit"],setup(l,{emit:o}){const a=l,s=re({get:()=>a.modelValue,set:J=>o("update:modelValue",J)}),d={};d.title=a.editMode&&a.requirementData?a.requirementData.title:"",d.description=a.editMode&&a.requirementData?a.requirementData.description:"",d.category=a.editMode&&a.requirementData?a.requirementData.category:"functional",d.status=a.editMode&&a.requirementData?a.requirementData.status:"draft";const i=D(d),v=[J=>!!J||"Title is required",J=>J.length<=255||"Title must be less than 255 characters"],w=[J=>!!J||"Description is required"],m={title:"Functional",value:"functional"},I={title:"Non-Functional",value:"nonfunctional"},j={title:"UI/UX",value:"uiux"},_={title:"Other",value:"other"},R=[m,I,j,_],q={title:"Draft",value:"draft"},T={title:"Active",value:"active"},B={title:"Archived",value:"archived"},oe={title:"Completed",value:"completed"},ee=[q,T,B,oe],de=D(null),b=()=>{const J={title:"",description:"",category:"functional",status:"draft"};i.value=J,de.value&&de.value.resetValidation()},h=()=>{s.value=!1,b()},N=async()=>{const{valid:J}=await de.value.validate();J&&(o("submit",i.value),s.value=!1,b())};return ht(s,J=>{J||b()}),(J,se)=>{const E=Ge("IconBtn"),F={class:"d-flex pt-5 px-5"},V={};V.onClick=h;const $={icon:"tabler-x"},K={class:"px-5 pt-4"},_e={class:"mt-3"},Q={cols:"12"},x={cols:"12",md:"6"},X={cols:"12",md:"6"},Z={cols:"12"},z={class:"pa-4"},W={variant:"tonal",color:"secondary"};return W.onClick=h,n(),g(et,{modelValue:p(s),"onUpdate:modelValue":se[4]||(se[4]=y=>bt(s)?s.value=y:null),"max-width":"700",persistent:""},{default:t(()=>[e(ye,null,{default:t(()=>[e(ke,F,{default:t(()=>[r("h5",An,c(a.editMode?"Edit Requirement":"Create New Requirement"),1),e(he),e(E,V,{default:t(()=>[e(k,$)]),_:1})]),_:1}),e(ue,K,{default:t(()=>[e(xt,{ref_key:"formRef",ref:de,onSubmit:ut(N,["prevent"])},{default:t(()=>[e(xe,_e,{default:t(()=>[e(L,Q,{default:t(()=>[e(ze,{modelValue:i.value.title,"onUpdate:modelValue":se[0]||(se[0]=y=>i.value.title=y),label:"Requirement Title",rules:v,required:""},null,8,["modelValue"])]),_:1}),e(L,x,{default:t(()=>[e(Ae,{modelValue:i.value.category,"onUpdate:modelValue":se[1]||(se[1]=y=>i.value.category=y),label:"Category",items:R,required:""},null,8,["modelValue"])]),_:1}),e(L,X,{default:t(()=>[e(Ae,{modelValue:i.value.status,"onUpdate:modelValue":se[2]||(se[2]=y=>i.value.status=y),label:"Status",items:ee,required:""},null,8,["modelValue"])]),_:1}),e(L,Z,{default:t(()=>[e(Je,{modelValue:i.value.description,"onUpdate:modelValue":se[3]||(se[3]=y=>i.value.description=y),label:"Description",rules:w,required:"",rows:"6"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),e(ge),e(Pe,z,{default:t(()=>[e(M,W,{default:t(()=>[u(" Cancel ")]),_:1}),e(he),e(M,{color:"primary",onClick:N},{default:t(()=>[u(c(a.editMode?"Update":"Create")+" Requirement ",1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Rn={height:"300px"},ur={key:0,class:"d-flex justify-center align-center"};ur.style=Rn;const Bn=ur,Tn={key:1,class:"text-center pa-4"},Nn=Tn,En={class:"text-h6 mb-2"},On=(ta=()=>r("h4",En,"No Requirements Found",-1),nt("data-v-13a73dd1"),ta=ta(),it(),ta),cr={};var ta;cr.class="text-body-1 text-medium-emphasis mb-6";const Hn=cr,Gn={class:"text-body-2 mb-3"},$n=Gn,Qn={class:"d-flex align-center justify-space-between mb-2"},Wn=Qn,Jn={class:"d-flex align-center"},Zn=Jn,Kn={class:"text-caption text-capitalize"},Xn=Kn,Yn={class:"d-flex align-center"},ei=Yn,ti={class:"text-caption"},ai=ti,li={class:"d-flex align-center"},ri=li,si={class:"text-caption"},oi=si,ni={key:0,class:"mt-3"},ii=ni,Ba={};Ba.type=String,Ba.required=!0;const Ta={};Ta.type=Array,Ta.default=()=>[];const Na={};Na.type=Boolean,Na.default=!1;const la={};la.projectId=Ba,la.requirements=Ta,la.loading=Na;const ui=ot({__name:"ProjectRequirementsList",props:la,emits:["refresh","view-user-stories"],setup(l,{emit:o}){const a=l,s=ir(),d=Lt(),i=D(""),v=D([]),w=D(["draft","active","completed"]),m=D(null),I=D(!1),j=D(!1),_=D(!1),R=D(!1),q={show:!1,text:"",color:"success"},T=D(q),B=re(()=>d.is_admin()),oe=re(()=>d.userData.role>=2),ee=re(()=>d.userData.role>=3),de={title:"Functional",value:"functional"},b={title:"Non-Functional",value:"nonfunctional"},h={title:"UI/UX",value:"uiux"},N={title:"Other",value:"other"},J=[de,b,h,N],se={title:"Draft",value:"draft"},E={title:"Active",value:"active"},F={title:"Archived",value:"archived"},V={title:"Completed",value:"completed"},$=[se,E,F,V],K=re(()=>a.requirements.filter(C=>{const U=!i.value||C.title.toLowerCase().includes(i.value.toLowerCase())||C.description.toLowerCase().includes(i.value.toLowerCase()),le=v.value.length===0||v.value.includes(C.category),pe=w.value.includes(C.status);return U&&le&&pe})),_e=()=>{j.value=!0},Q=async C=>{R.value=!0;try{const U={...C};U.project=a.projectId;const{data:le,error:pe}=await s.createRequirement(U);le&&!pe?(z("Requirement created successfully"),o("refresh")):z("Failed to create requirement","error")}catch(U){z("Failed to create requirement: "+U.message,"error")}finally{R.value=!1}},x=async C=>{R.value=!0;try{const{data:U,error:le}=await s.updateRequirement(m.value.id,C);U&&!le?(z("Requirement updated successfully"),o("refresh")):z("Failed to update requirement","error")}catch(U){z("Failed to update requirement: "+U.message,"error")}finally{R.value=!1}},X=async()=>{if(m.value){R.value=!0,_.value=!1;try{const{success:C,error:U}=await s.deleteRequirement(m.value.id);C&&!U?(z("Requirement deleted successfully"),o("refresh"),I.value=!1):z("Failed to delete requirement","error")}catch(C){z("Failed to delete requirement: "+C.message,"error")}finally{R.value=!1}}},Z=C=>{o("view-user-stories",C)},z=(C,U="success")=>{const le={show:!0};le.text=C,le.color=U,T.value=le},W=(C,U=120)=>!C||C.length<=U?C:C.substring(0,U)+"...",y=C=>{if(!C)return"";C=parseInt(C);const U={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(C).toLocaleDateString("en-US",U)};return(C,U)=>{const le=Yt,pe=Ge("IconBtn"),Ve={class:"pa-6"},te={cols:"12",md:"4"},H={};H.modelValue=i.value,H["onUpdate:modelValue"]=U[0]||(U[0]=Y=>i.value=Y),H.density="compact",H.placeholder="Search requirements...",H["prepend-inner-icon"]="tabler-search",H["hide-details"]="",H.variant="outlined",H.clearable="";const O={cols:"12",md:"3"},me={};me.modelValue=v.value,me["onUpdate:modelValue"]=U[1]||(U[1]=Y=>v.value=Y),me.items=J,me.density="compact",me["hide-details"]="",me.label="Category",me.variant="outlined",me.multiple="",me.chips="";const we={cols:"12",md:"3"},A={};A.modelValue=w.value,A["onUpdate:modelValue"]=U[2]||(U[2]=Y=>w.value=Y),A.items=$,A.density="compact",A["hide-details"]="",A.label="Status",A.variant="outlined",A.multiple="",A.chips="";const ne={cols:"12",md:"2",class:"d-flex align-center"},Ce={key:0,color:"primary","prepend-icon":"tabler-plus"};Ce.onClick=_e,Ce.loading=R.value,Ce.block="";const qe={class:"my-5"},Be={indeterminate:"",color:"primary"},Te={icon:"tabler-file-search",size:"64",color:"secondary",class:"mb-4"},Me={key:0,color:"primary"};Me.onClick=_e,Me["prepend-icon"]="tabler-plus";const be={key:2},Ie={icon:"tabler-x"};return n(),g(ue,Ve,{default:t(()=>[e(xe,null,{default:t(()=>[e(L,te,{default:t(()=>[e(ze,H,null,8,["modelValue"])]),_:1}),e(L,O,{default:t(()=>[e(Ae,me,null,8,["modelValue"])]),_:1}),e(L,we,{default:t(()=>[e(Ae,A,null,8,["modelValue"])]),_:1}),e(L,ne,{default:t(()=>[p(ee)?(n(),g(M,Ce,{default:t(()=>[u(" Add ")]),_:1},8,["loading"])):S("",!0)]),_:1})]),_:1}),e(ge,qe),l.loading?(n(),f("div",Bn,[e(ft,Be)])):p(K).length===0?(n(),f("div",Nn,[e(k,Te),On,r("p",Hn,c(i.value||v.value.length>0||w.value.length>0?"Try adjusting your filters to see more results.":"This project does not have any requirements yet."),1),p(ee)&&!i.value&&v.value.length===0&&w.value.length===0?(n(),g(M,Me,{default:t(()=>[u(" Add Requirement ")]),_:1})):S("",!0)])):(n(),g(xe,be,{default:t(()=>[(n(!0),f(fe,null,Se(p(K),Y=>{const Ze={};Ze.key=Y.id,Ze.cols="12";const Ke={key:0,icon:"tabler-function"},at={key:1,icon:"tabler-chart-bar"},lt={key:2,icon:"tabler-palette"},ce={key:3,icon:"tabler-file-description"},$e={size:"16",icon:"tabler-tag",class:"me-1"},mt={size:"16",icon:"tabler-calendar",class:"me-1"},pt={size:"16",icon:"tabler-history",class:"me-1"};return n(),g(L,Ze,{default:t(()=>[e(ye,{class:"requirement-card",onClick:Ne=>{return rt=Y,m.value=rt,void(I.value=!0);var rt},border:"",hover:""},{default:t(()=>[e(Le,null,{prepend:t(()=>[e(_t,{color:p(Va)(Y.category),variant:"tonal",size:"42"},{default:t(()=>[Y.category==="functional"?(n(),g(k,Ke)):Y.category==="nonfunctional"?(n(),g(k,at)):Y.category==="uiux"?(n(),g(k,lt)):(n(),g(k,ce))]),_:2},1032,["color"])]),append:t(()=>[e(ie,{color:p(We)(Y.status),size:"small",label:""},{default:t(()=>{return[u(c((Ne=Y.status,Ne?Ne.charAt(0).toUpperCase()+Ne.slice(1):"")),1)];var Ne}),_:2},1032,["color"])]),default:t(()=>[e(ke,null,{default:t(()=>[u(c(Y.handle)+" "+c(Y.title),1)]),_:2},1024)]),_:2},1024),e(ue,null,{default:t(()=>[r("p",$n,c(W(Y.description)),1),r("div",Wn,[r("div",Zn,[e(k,$e),r("span",Xn,c(Y.category),1)]),r("div",ei,[e(k,mt),r("span",ai,c(y(Y.updated_at)),1)]),r("div",ri,[e(k,pt),r("span",oi,"v"+c(Y.version_number),1)])]),Y.user_stories&&Y.user_stories.length>0?(n(),f("div",ii,[e(M,{size:"small",variant:"tonal",color:"primary","prepend-icon":"tabler-user-check",onClick:ut(Ne=>Z(Y),["stop"])},{default:t(()=>[u(c(Y.user_stories.length)+" User "+c(Y.user_stories.length===1?"Story":"Stories"),1)]),_:2},1032,["onClick"])])):S("",!0)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)}),128))]),_:1})),m.value?(n(),g(In,{key:3,modelValue:I.value,"onUpdate:modelValue":U[3]||(U[3]=Y=>I.value=Y),requirement:m.value,onDelete:U[4]||(U[4]=Y=>_.value=!0),onUpdate:x,onViewUserStories:Z,"is-admin":p(B),"has-manager-permission":p(oe),"has-moderator-permission":p(ee)},null,8,["modelValue","requirement","is-admin","has-manager-permission","has-moderator-permission"])):S("",!0),e(Ln,{modelValue:j.value,"onUpdate:modelValue":U[5]||(U[5]=Y=>j.value=Y),onSubmit:Q},null,8,["modelValue"]),e(le,{isDialogVisible:_.value,"onUpdate:isDialogVisible":U[6]||(U[6]=Y=>_.value=Y),confirmationMsg:"Are you sure you want to delete this requirement? This action cannot be undone.",onConfirm:X},null,8,["isDialogVisible"]),e(tt,{modelValue:T.value.show,"onUpdate:modelValue":U[8]||(U[8]=Y=>T.value.show=Y),color:T.value.color,timeout:5e3},{actions:t(()=>[e(pe,{onClick:U[7]||(U[7]=Y=>T.value.show=!1)},{default:t(()=>[e(k,Ie)]),_:1})]),default:t(()=>[u(c(T.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1})}}},[["__scopeId","data-v-13a73dd1"]]),dr=Kt({id:"MockupStore",state:()=>({mockups:[],currentMockup:null,loading:!1,error:null}),actions:{async fetchMockups(l=null){this.loading=!0;try{let o="/service/mockups/";l&&(o+="?project="+l);const a=await ve.get(o);if(a.status===200){this.mockups=a.data;const d={};return d.data=a.data,d.error=null,d}const s={data:[]};return s.error=a.data,s}catch(o){this.error=o.message||"Failed to fetch mockups";const a={data:[]};return a.error=this.error,a}finally{this.loading=!1}},async fetchMockupById(l){this.loading=!0;try{const o=await ve.get("/service/mockups/"+l+"/");if(o.status===200){this.currentMockup=o.data;const s={};return s.data=o.data,s.error=null,s}const a={data:null};return a.error=o.data,a}catch(o){this.error=o.message||"Failed to fetch mockup";const a={data:null};return a.error=this.error,a}finally{this.loading=!1}},async createMockup(l){this.loading=!0;try{const o=await ve.post("/service/mockups/",l);if(o.status===201){this.mockups.length&&this.mockups.push(o.data);const s={};return s.data=o.data,s.error=null,s}const a={data:null};return a.error=o.data,a}catch(o){this.error=o.message||"Failed to create mockup";const a={data:null};return a.error=this.error,a}finally{this.loading=!1}},async updateMockup(l,o){this.loading=!0;try{const a=await ve.put("/service/mockups/"+l+"/",o);if(a.status===200){if(this.mockups.length){const i=this.mockups.findIndex(v=>v.id===l);i!==-1&&(this.mockups[i]=a.data)}this.currentMockup&&this.currentMockup.id===l&&(this.currentMockup=a.data);const d={};return d.data=a.data,d.error=null,d}const s={data:null};return s.error=a.data,s}catch(a){this.error=a.message||"Failed to update mockup";const s={data:null};return s.error=this.error,s}finally{this.loading=!1}},async deleteMockup(l){this.loading=!0;try{const o=await ve.delete("/service/mockups/"+l+"/");if(o.status===204)return this.mockups.length&&(this.mockups=this.mockups.filter(d=>d.id!==l)),this.currentMockup&&this.currentMockup.id===l&&(this.currentMockup=null),{success:!0,error:null};const a={success:!1};return a.error=o.data,a}catch(o){this.error=o.message||"Failed to delete mockup";const a={success:!1};return a.error=this.error,a}finally{this.loading=!1}}}}),mr=l=>(nt("data-v-b1d59641"),l=l(),it(),l),ci={key:0,class:"text-h5"},di=ci,mi={class:"text-h5"},pi=mi,vi={key:0},fi=vi,hi={key:1},yi=hi,gi={class:"mockup-metadata d-flex align-center px-6 py-3"},_i=gi,bi={class:"d-flex align-center"},xi=bi,ki={class:"text-caption"},wi=ki,Vi={class:"d-flex align-center ms-4"},Ci=Vi,Si={class:"text-caption"},Di=Si,Ui={key:0,class:"d-flex align-center ms-4"},qi=Ui,ji={class:"text-caption"},zi=ji,Fi={class:"mockup-content pa-0"},Mi=Fi,Ii=["srcdoc"],Pi={height:"400px"},pr={key:1,class:"d-flex flex-column justify-center align-center pa-6"};pr.style=Pi;const Ai=pr,Li={class:"text-h6 mb-2"},Ri=mr(()=>r("h4",Li,"No HTML Content",-1)),Bi={class:"text-medium-emphasis text-center"},Ti=mr(()=>r("p",Bi," This mockup doesn't have any HTML content to display. ",-1)),Ea={};Ea.type=Boolean,Ea.default=!1;const Oa={};Oa.type=Object,Oa.required=!0;const Ha={};Ha.type=Boolean,Ha.default=!1;const Ga={};Ga.type=Boolean,Ga.default=!1;const $t={};$t.modelValue=Ea,$t.mockup=Oa,$t.isAdmin=Ha,$t.hasManagerPermission=Ga;const Ni=ot({__name:"MockupPreviewDialog",props:$t,emits:["update:modelValue","delete"],setup(l,{emit:o}){const a=l,s=re({get:()=>a.modelValue,set:b=>o("update:modelValue",b)}),d=dr(),i=D(!1),v=D(!1),w={...a.mockup},m=D(w),I=D(!1),j={show:!1,text:"",color:"success"},_=D(j),R=b=>{if(!b)return"";const h={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(parseInt(b)).toLocaleDateString("en-US",h)},q=()=>{i.value=!i.value},T=()=>{if(v.value){const b={...a.mockup};m.value=b}v.value=!v.value},B=async()=>{I.value=!0;try{const{data:b,error:h}=await d.updateMockup(a.mockup.id,m.value);b&&!h?(ee("Mockup updated successfully"),Object.assign(a.mockup,b),v.value=!1):ee("Failed to update mockup","error")}catch(b){ee("Failed to update mockup: "+b.message,"error")}finally{I.value=!1}},oe=()=>{o("delete")},ee=(b,h="success")=>{const N={show:!0};N.text=b,N.color=h,_.value=N};return ht(()=>a.mockup,b=>{const h={...b};m.value=h},{deep:!0}),(b,h)=>{const N=Ge("IconBtn"),J={class:"d-flex py-3 px-5"},se={key:1},E={icon:"",variant:"text"};E.onClick=q;const F={icon:"tabler-x"},V={class:"mt-3"},$={cols:"12"},K={cols:"12",md:"6"},_e={title:"Draft",value:"draft"},Q={title:"Active",value:"active"},x={title:"Archived",value:"archived"},X={title:"Completed",value:"completed"},Z={cols:"12"},z={icon:"tabler-calendar",class:"me-2",size:"18"},W={icon:"tabler-calendar-event",class:"me-2",size:"18"},y={icon:"tabler-file-check",class:"me-2",size:"18"},C={width:"100%",border:"none"},U={icon:"tabler-code-off",size:"64",color:"secondary",class:"mb-4"},le={class:"pa-4"},pe={key:0},Ve={color:"secondary",variant:"tonal"};Ve.onClick=T,Ve.disabled=I.value;const te={key:1},H={key:0,color:"error",variant:"tonal","prepend-icon":"tabler-trash"};H.onClick=oe;const O={key:1,color:"primary","prepend-icon":"tabler-edit"};O.onClick=T;const me={key:2,class:"ms-2",color:"primary",variant:"tonal","prepend-icon":"tabler-code"};me.onClick=T;const we={icon:"tabler-x"};return n(),g(et,{modelValue:p(s),"onUpdate:modelValue":h[6]||(h[6]=A=>bt(s)?s.value=A:null),fullscreen:i.value,"max-width":i.value?"100%":"900",scrollable:""},{default:t(()=>[e(ye,null,{default:t(()=>[e(ke,J,{default:t(()=>[v.value?(n(),f("h5",di,"Edit Mockup")):(n(),f(fe,se,[r("h5",pi,c(l.mockup.name),1),e(ie,{color:p(We)(l.mockup.status),size:"small",label:""},{default:t(()=>[u(c(Xt(l.mockup.status)),1)]),_:1},8,["color"])],64)),e(he),e(M,E,{default:t(()=>[e(k,{icon:i.value?"tabler-minimize":"tabler-maximize"},null,8,["icon"])]),_:1}),e(N,{onClick:h[0]||(h[0]=A=>s.value=!1)},{default:t(()=>[e(k,F)]),_:1})]),_:1}),e(ge),e(ue,{class:jl({"pa-0":!v.value,"pa-6":v.value}),style:Zt({height:i.value?"calc(100vh - 120px)":"70vh",maxHeight:"800px"})},{default:t(()=>[v.value?(n(),f("div",fi,[e(xt,{onSubmit:ut(B,["prevent"])},{default:t(()=>[e(xe,V,{default:t(()=>[e(L,$,{default:t(()=>[e(ze,{modelValue:m.value.name,"onUpdate:modelValue":h[1]||(h[1]=A=>m.value.name=A),label:"Mockup Name",required:"",rules:[A=>!!A||"Name is required"]},null,8,["modelValue","rules"])]),_:1}),e(L,K,{default:t(()=>[e(Ae,{modelValue:m.value.status,"onUpdate:modelValue":h[2]||(h[2]=A=>m.value.status=A),label:"Status",items:[_e,Q,x,X],required:""},null,8,["modelValue"])]),_:1}),e(L,Z,{default:t(()=>[e(Je,{modelValue:m.value.html_content,"onUpdate:modelValue":h[3]||(h[3]=A=>m.value.html_content=A),label:"HTML Content",rows:"15",rules:[A=>!!A||"HTML content is required"],monospace:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])):(n(),f("div",yi,[r("div",_i,[r("div",xi,[e(k,z),r("span",wi,"Created: "+c(R(l.mockup.created_at)),1)]),r("div",Ci,[e(k,W),r("span",Di,"Updated: "+c(R(l.mockup.updated_at)),1)]),l.mockup.requirement?(n(),f("div",qi,[e(k,y),r("span",zi,"Requirement: "+c(l.mockup.requirement),1)])):S("",!0)]),e(ge),r("div",Mi,[l.mockup.html_content?(n(),f("iframe",{key:0,srcdoc:l.mockup.html_content,class:"mockup-iframe",style:Zt([C,{height:i.value?"calc(100vh - 180px)":"calc(70vh - 110px)"}]),sandbox:"allow-same-origin allow-scripts allow-popups allow-forms",title:"Mockup Preview"},null,12,Ii)):(n(),f("div",Ai,[e(k,U),Ri,Ti]))])]))]),_:1},8,["class","style"]),e(ge),e(Pe,le,{default:t(()=>[v.value?(n(),f(fe,pe,[e(M,Ve,{default:t(()=>[u(" Cancel ")]),_:1},8,["disabled"]),e(he),e(M,{color:"primary",onClick:B,loading:I.value},{default:t(()=>[u(" Save Changes ")]),_:1},8,["loading"])],64)):(n(),f(fe,te,[l.isAdmin?(n(),g(M,H,{default:t(()=>[u(" Delete ")]),_:1})):S("",!0),e(he),l.hasManagerPermission?(n(),g(M,O,{default:t(()=>[u(" Edit ")]),_:1})):S("",!0),l.hasManagerPermission?(n(),g(M,me,{default:t(()=>[u(" View HTML ")]),_:1})):S("",!0)],64))]),_:1})]),_:1}),e(tt,{modelValue:_.value.show,"onUpdate:modelValue":h[5]||(h[5]=A=>_.value.show=A),color:_.value.color,timeout:5e3},{actions:t(()=>[e(N,{onClick:h[4]||(h[4]=A=>_.value.show=!1)},{default:t(()=>[e(k,we)]),_:1})]),default:t(()=>[u(c(_.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1},8,["modelValue","fullscreen","max-width"])}}},[["__scopeId","data-v-b1d59641"]]),vr=l=>(nt("data-v-fcfe1101"),l=l(),it(),l),Ei={height:"300px"},fr={key:0,class:"d-flex justify-center align-center"};fr.style=Ei;const Oi=fr,Hi={key:1,class:"text-center pa-4"},Gi=Hi,$i={class:"text-h6 mb-2"},Qi=vr(()=>r("h4",$i,"No Mockups Found",-1)),Wi={class:"text-body-1 text-medium-emphasis mb-6"},Ji=Wi,Zi={class:"mockup-preview mb-3"},Ki=Zi,Xi={height:"150px"},hr={class:"overflow-hidden position-relative rounded bg-grey-lighten-4"};hr.style=Xi;const Yi=hr,eu={key:0,class:"html-preview"},tu=eu,au=["innerHTML"],lu={key:1,class:"d-flex justify-center align-center h-100"},ru=lu,su={class:"preview-overlay d-flex justify-center align-center"},ou=su,nu={key:0,class:"mb-2"},iu=nu,uu={class:"text-caption font-weight-medium"},cu=vr(()=>r("span",uu,"Requirement: ",-1)),du={class:"d-flex align-center justify-space-between"},mu=du,pu={class:"d-flex align-center"},vu=pu,fu={class:"text-caption"},hu=fu,$a={};$a.type=String,$a.required=!0;const Qa={};Qa.type=Array,Qa.default=()=>[];const Wa={};Wa.type=Boolean,Wa.default=!1;const ra={};ra.projectId=$a,ra.mockups=Qa,ra.loading=Wa;const yu=ot({__name:"ProjectMockupsList",props:ra,emits:["refresh"],setup(l,{emit:o}){const a=l,s=dr(),d=Lt(),i=D(""),v=D(null),w=D(!1),m=D(!1),I=D(!1),j={show:!1,text:"",color:"success"},_=D(j),R=re(()=>d.is_admin()),q=re(()=>d.userData.role>=2);re(()=>d.userData.role>=3);const T=re(()=>a.mockups.filter(b=>!i.value||b.name.toLowerCase().includes(i.value.toLowerCase())||b.requirement&&b.requirement.title.toLowerCase().includes(i.value.toLowerCase()))),B=b=>{if(!b)return"";const h={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(parseInt(b)).toLocaleDateString("en-US",h)},oe=async()=>{if(v.value){I.value=!0,m.value=!1;try{const{success:b,error:h}=await s.deleteMockup(v.value.id);b&&!h?(ee("Mockup deleted successfully"),o("refresh"),w.value=!1):ee("Failed to delete mockup","error")}catch(b){ee("Failed to delete mockup: "+b.message,"error")}finally{I.value=!1}}},ee=(b,h="success")=>{const N={show:!0};N.text=b,N.color=h,_.value=N},de=(b,h=150)=>{if(!b||b.length<=h)return b;const N=b.replace(/<[^>]*>/g,"");return N.length<=h?b:N.substring(0,h)+"..."};return(b,h)=>{const N=Yt,J=Ge("IconBtn"),se={class:"pa-6"},E={cols:"12",md:"6"},F={};F.modelValue=i.value,F["onUpdate:modelValue"]=h[0]||(h[0]=x=>i.value=x),F.density="compact",F.placeholder="Search mockups...",F["prepend-inner-icon"]="tabler-search",F["hide-details"]="",F.variant="outlined",F.clearable="";const V={class:"my-5"},$={indeterminate:"",color:"primary"},K={icon:"tabler-photo-off",size:"64",color:"secondary",class:"mb-4"},_e={key:2},Q={icon:"tabler-x"};return n(),g(ue,se,{default:t(()=>[e(xe,null,{default:t(()=>[e(L,E,{default:t(()=>[e(ze,F,null,8,["modelValue"])]),_:1})]),_:1}),e(ge,V),l.loading?(n(),f("div",Oi,[e(ft,$)])):p(T).length===0?(n(),f("div",Gi,[e(k,K),Qi,r("p",Ji,c(i.value?"Try adjusting your search to see more results.":"This project does not have any mockups yet."),1)])):(n(),g(xe,_e,{default:t(()=>[(n(!0),f(fe,null,Se(p(T),x=>{const X={};X.key=x.id,X.cols="12",X.md="6",X.lg="4";const Z={icon:"tabler-file-code",size:"48",color:"secondary"},z={color:"primary",variant:"elevated",size:"small","prepend-icon":"tabler-eye"},W={size:"x-small",color:"primary",class:"ms-1"},y={size:"16",icon:"tabler-calendar",class:"me-1"};return n(),g(L,X,{default:t(()=>[e(ye,{class:"mockup-card h-100",onClick:C=>{return U=x,v.value=U,void(w.value=!0);var U},border:"",hover:""},{default:t(()=>[e(Le,null,{append:t(()=>[e(ie,{color:p(We)(x.status),size:"small",label:""},{default:t(()=>[u(c(Xt(x.status)),1)]),_:2},1032,["color"])]),default:t(()=>[e(ke,null,{default:t(()=>[u(c(x.name),1)]),_:2},1024)]),_:2},1024),e(ge),e(ue,null,{default:t(()=>[r("div",Ki,[r("div",Yi,[x.html_content?(n(),f("div",tu,[r("div",{innerHTML:de(x.html_content)},null,8,au)])):(n(),f("div",ru,[e(k,Z)])),r("div",ou,[e(M,z,{default:t(()=>[u(" Preview ")]),_:1})])])]),x.requirement?(n(),f("div",iu,[cu,e(ie,W,{default:t(()=>[u(c(x.requirement),1)]),_:2},1024)])):S("",!0),r("div",mu,[r("div",vu,[e(k,y),r("span",hu,c(B(x.created_at)),1)])])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)}),128))]),_:1})),v.value?(n(),g(Ni,{key:3,modelValue:w.value,"onUpdate:modelValue":h[1]||(h[1]=x=>w.value=x),mockup:v.value,onDelete:h[2]||(h[2]=x=>m.value=!0),"is-admin":p(R),"has-manager-permission":p(q)},null,8,["modelValue","mockup","is-admin","has-manager-permission"])):S("",!0),e(N,{isDialogVisible:m.value,"onUpdate:isDialogVisible":h[3]||(h[3]=x=>m.value=x),confirmationMsg:"Are you sure you want to delete this mockup? This action cannot be undone.",onConfirm:oe},null,8,["isDialogVisible"]),e(tt,{modelValue:_.value.show,"onUpdate:modelValue":h[5]||(h[5]=x=>_.value.show=x),color:_.value.color,timeout:5e3},{actions:t(()=>[e(J,{onClick:h[4]||(h[4]=x=>_.value.show=!1)},{default:t(()=>[e(k,Q)]),_:1})]),default:t(()=>[u(c(_.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1})}}},[["__scopeId","data-v-fcfe1101"]]),yr=Kt({id:"DevelopmentPlanStore",state:()=>({plans:[],currentPlan:null,loading:!1,error:null}),actions:{async fetchDevelopmentPlans(l=null){this.loading=!0;try{let o="/service/development-plans/";l&&(o+="?project="+l);const a=await ve.get(o);if(a.status===200){this.plans=a.data;const d={};return d.data=a.data,d.error=null,d}const s={data:[]};return s.error=a.data,s}catch(o){this.error=o.message||"Failed to fetch development plans";const a={data:[]};return a.error=this.error,a}finally{this.loading=!1}},async fetchDevelopmentPlanById(l){this.loading=!0;try{const o=await ve.get("/service/development-plans/"+l+"/");if(o.status===200){this.currentPlan=o.data;const s={};return s.data=o.data,s.error=null,s}const a={data:null};return a.error=o.data,a}catch(o){this.error=o.message||"Failed to fetch development plan";const a={data:null};return a.error=this.error,a}finally{this.loading=!1}},async createDevelopmentPlan(l){this.loading=!0;try{const o={};o.project=l,o.status="draft";const a=await ve.post("/service/development-plans/",o);if(a.status===201){const d={};return d.data=a.data,d.error=null,d}const s={data:null};return s.error=a.data,s}catch(o){this.error=o.message||"Failed to create development plan";const a={data:null};return a.error=this.error,a}finally{this.loading=!1}},async updateDevelopmentPlan(l,o){this.loading=!0;try{const a=await ve.put("/service/development-plans/"+l+"/",o);if(a.status===200){this.currentPlan&&this.currentPlan.id===l&&(this.currentPlan=a.data);const d={};return d.data=a.data,d.error=null,d}const s={data:null};return s.error=a.data,s}catch(a){this.error=a.message||"Failed to update development plan";const s={data:null};return s.error=this.error,s}finally{this.loading=!1}},async createPlanVersion(l,o){this.loading=!0;try{const a=await ve.post("/service/development-plans/"+l+"/new_version/",o);if(a.status===201){const d={};return d.data=a.data,d.error=null,d}const s={data:null};return s.error=a.data,s}catch(a){this.error=a.message||"Failed to create plan version";const s={data:null};return s.error=this.error,s}finally{this.loading=!1}},async fetchPlanVersionById(l){this.loading=!0;try{const o=await ve.get("/service/development-plan-versions/"+l+"/");if(o.status===200){const s={};return s.data=o.data,s.error=null,s}const a={data:null};return a.error=o.data,a}catch(o){this.error=o.message||"Failed to fetch plan version";const a={data:null};return a.error=this.error,a}finally{this.loading=!1}},async updatePlanVersion(l,o){this.loading=!0;try{const a=await ve.put("/service/development-plan-versions/"+l+"/",o);if(a.status===200){const d={};return d.data=a.data,d.error=null,d}const s={data:null};return s.error=a.data,s}catch(a){this.error=a.message||"Failed to update plan version";const s={data:null};return s.error=this.error,s}finally{this.loading=!1}},async setCurrentPlanVersion(l,o){this.loading=!0;try{const a=await this.fetchDevelopmentPlanById(l);if(!a.data)return{data:null,error:"Plan not found"};const s=await this.fetchPlanVersionById(o);if(!s.data)return{data:null,error:"Version not found"};const d={};return d.current_version_number=s.data.version_number,d.status=a.data.status,await this.updateDevelopmentPlan(l,d)}catch(a){this.error=a.message||"Failed to set current plan version";const s={data:null};return s.error=this.error,s}finally{this.loading=!1}}}}),_a=l=>(nt("data-v-c45d3933"),l=l(),it(),l),gu={key:0,class:"text-h5"},_u=gu,bu={key:1,class:"text-h5"},xu=bu,ku={key:0},wu=ku,Vu={class:"text-subtitle-1 font-weight-bold mb-2"},Cu=_a(()=>r("p",Vu,"Roles & Hours",-1)),Su={key:1},Du=Su,Uu={class:"d-flex flex-wrap justify-space-between mb-4"},qu=Uu,ju={class:"d-flex align-center"},zu=ju,Fu={class:"d-flex align-center"},Mu=Fu,Iu={class:"text-caption"},Pu=Iu,Au={key:0,class:"text-caption ms-3"},Lu=Au,Ru={class:"text-h4 font-weight-bold"},Bu=Ru,Tu={class:"text-caption text-medium-emphasis text-right"},Nu=_a(()=>r("div",Tu," Estimated total cost ",-1)),Eu={class:"text-right"},Ou={class:"text-right"},Hu=_a(()=>r("thead",null,[r("tr",null,[r("th",null,"Role"),r("th",Eu,"Hours"),r("th",Ou,"Cost")])],-1)),Gu={class:"text-right"},$u=Gu,Qu={class:"text-right"},Wu=Qu,Ju={key:0},Zu=Ju,Ku={colspan:"3",class:"text-center"},Xu=[_a(()=>r("td",Ku,"No roles and hours defined",-1))],Yu={class:"text-body-1 whitespace-pre-wrap"},ec=Yu,Ja={};Ja.type=Boolean,Ja.default=!1;const Za={};Za.type=Object,Za.required=!0;const Ka={};Ka.type=Boolean,Ka.default=!1;const Xa={};Xa.type=Boolean,Xa.default=!1;const Ya={};Ya.type=Boolean,Ya.default=!1;const el={};el.type=String,el.default=null;const St={};St.modelValue=Ja,St.version=Za,St.isCurrent=Ka,St.isAdmin=Xa,St.hasManagerPermission=Ya,St.planId=el;const tc=ot({__name:"PlanVersionDialog",props:St,emits:["update:modelValue","refresh"],setup(l,{emit:o}){const a=l,s=re({get:()=>a.modelValue,set:b=>o("update:modelValue",b)}),d=yr(),i=D(!1),v={...a.version},w=D(v),m=D(!1),I={show:!1,text:"",color:"success"},j=D(I),_=b=>{if(!b)return"";const h={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(parseInt(b)).toLocaleDateString("en-US",h)},R=b=>{if(!b&&b!==0)return"-";const h={style:"currency",currency:"USD",minimumFractionDigits:2};return new Intl.NumberFormat("en-US",h).format(b)},q=()=>{if(i.value){const b={...a.version};w.value=b}i.value=!i.value},T=async()=>{m.value=!0;try{const{data:b,error:h}=await d.updatePlanVersion(a.version.id,w.value);b&&!h?(ee("Plan version updated successfully"),Object.assign(a.version,b),i.value=!1,o("refresh")):ee("Failed to update plan version","error")}catch(b){ee("Failed to update plan version: "+b.message,"error")}finally{m.value=!1}},B=async()=>{if(a.planId){m.value=!0;try{const{data:b,error:h}=await d.setCurrentPlanVersion(a.planId,a.version.id);b&&!h?(ee("Set as current version successfully"),o("refresh")):ee("Failed to set as current version","error")}catch(b){ee("Failed to set as current version: "+b.message,"error")}finally{m.value=!1}}},oe=b=>{if(!b)return[];try{return typeof b=="string"?JSON.parse(b):b}catch(h){return console.error("Error parsing roles and hours:",h),[]}},ee=(b,h="success")=>{const N={show:!0};N.text=b,N.color=h,j.value=N};return ht(()=>a.version,b=>{const h={...b};w.value=h},{deep:!0}),(b,h)=>{const N=Ge("IconBtn"),J={class:"d-flex py-3 px-5"},se={key:0,color:"primary",size:"small",label:"",class:"ms-2"},E={icon:"tabler-x"},F={class:"pa-6"},V={class:"mt-3"},$={cols:"12",md:"4"},K={number:!0},_e={cols:"12",md:"4"},Q={title:"Draft",value:"draft"},x={title:"Active",value:"active"},X={title:"Archived",value:"archived"},Z={title:"Completed",value:"completed"},z={cols:"12"},W={cols:"12"},y={class:"mt-3"},C={cols:"12"},U={cols:"12"},le={variant:"outlined",class:"mb-4"},pe={key:0,cols:"12"},Ve={variant:"outlined"},te={class:"pa-4"},H={key:0},O={color:"secondary",variant:"tonal"};O.onClick=q,O.disabled=m.value;const me={key:1},we={key:1,color:"primary","prepend-icon":"tabler-edit"};we.onClick=q;const A={icon:"tabler-x"};return n(),g(et,{modelValue:p(s),"onUpdate:modelValue":h[7]||(h[7]=ne=>bt(s)?s.value=ne:null),"max-width":"900",scrollable:""},{default:t(()=>[e(ye,null,{default:t(()=>[e(ke,J,{default:t(()=>[i.value?(n(),f("h5",_u,"Edit Plan Version")):(n(),f("h5",xu,[u(" Development Plan v"+c(l.version.version_number)+" ",1),l.isCurrent?(n(),g(ie,se,{default:t(()=>[u(" Current ")]),_:1})):S("",!0)])),e(he),e(N,{onClick:h[0]||(h[0]=ne=>s.value=!1)},{default:t(()=>[e(k,E)]),_:1})]),_:1}),e(ge),e(ue,F,{default:t(()=>[i.value?(n(),f("div",wu,[e(xt,{onSubmit:ut(T,["prevent"])},{default:t(()=>[e(xe,V,{default:t(()=>[e(L,$,{default:t(()=>[e(ze,{modelValue:w.value.estimated_cost,"onUpdate:modelValue":h[1]||(h[1]=ne=>w.value.estimated_cost=ne),modelModifiers:K,label:"Estimated Cost ($)",type:"number",required:"",rules:[ne=>!!ne||"Estimated cost is required"]},null,8,["modelValue","rules"])]),_:1}),e(L,_e,{default:t(()=>[e(Ae,{modelValue:w.value.status,"onUpdate:modelValue":h[2]||(h[2]=ne=>w.value.status=ne),label:"Status",items:[Q,x,X,Z],required:""},null,8,["modelValue"])]),_:1}),e(L,z,{default:t(()=>[e(Je,{modelValue:w.value.notes,"onUpdate:modelValue":h[3]||(h[3]=ne=>w.value.notes=ne),label:"Notes",rows:"4"},null,8,["modelValue"])]),_:1}),e(L,W,{default:t(()=>[Cu,e(Je,{modelValue:w.value.roles_and_hours,"onUpdate:modelValue":h[4]||(h[4]=ne=>w.value.roles_and_hours=ne),label:"Roles & Hours (JSON format)",rows:"8",monospace:"",hint:"Format: [{ 'role': 'Developer', 'hours': 40, 'cost': 4000 }]","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])):(n(),f("div",Du,[e(xe,y,{default:t(()=>[e(L,C,{default:t(()=>[r("div",qu,[r("div",zu,[e(ie,{color:p(We)(l.version.status),size:"small",label:""},{default:t(()=>[u(c(Xt(l.version.status)),1)]),_:1},8,["color"])]),r("div",Mu,[r("span",Pu," Created: "+c(_(l.version.created_at)),1),l.version.created_by?(n(),f("span",Lu," Created by: "+c(l.version.created_by.username),1)):S("",!0)]),r("div",null,[r("h4",Bu,c(R(l.version.estimated_cost)),1),Nu])])]),_:1}),e(L,U,{default:t(()=>[e(ye,le,{default:t(()=>[e(ke,null,{default:t(()=>[u("Roles & Hours Breakdown")]),_:1}),e(ue,null,{default:t(()=>[e(va,null,{default:t(()=>[Hu,r("tbody",null,[(n(!0),f(fe,null,Se(oe(l.version.roles_and_hours),(ne,Ce)=>{const qe={};return qe.key=Ce,n(),f("tr",qe,[r("td",null,c(ne.role),1),r("td",$u,c(ne.hours),1),r("td",Wu,c(R(ne.cost)),1)])}),128)),oe(l.version.roles_and_hours).length===0?(n(),f("tr",Zu,Xu)):S("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),l.version.notes?(n(),g(L,pe,{default:t(()=>[e(ye,Ve,{default:t(()=>[e(ke,null,{default:t(()=>[u("Notes")]),_:1}),e(ue,null,{default:t(()=>[r("div",ec,c(l.version.notes),1)]),_:1})]),_:1})]),_:1})):S("",!0)]),_:1})]))]),_:1}),e(ge),e(Pe,te,{default:t(()=>[i.value?(n(),f(fe,H,[e(M,O,{default:t(()=>[u(" Cancel ")]),_:1},8,["disabled"]),e(he),e(M,{color:"primary",onClick:T,loading:m.value},{default:t(()=>[u(" Save Changes ")]),_:1},8,["loading"])],64)):(n(),f(fe,me,[!l.isCurrent&&l.hasManagerPermission?(n(),g(M,{key:0,color:"primary",variant:"tonal",onClick:B,loading:m.value,"prepend-icon":"tabler-check"},{default:t(()=>[u(" Set as Current ")]),_:1},8,["loading"])):S("",!0),e(he),l.hasManagerPermission?(n(),g(M,we,{default:t(()=>[u(" Edit ")]),_:1})):S("",!0)],64))]),_:1})]),_:1}),e(tt,{modelValue:j.value.show,"onUpdate:modelValue":h[6]||(h[6]=ne=>j.value.show=ne),color:j.value.color,timeout:5e3},{actions:t(()=>[e(N,{onClick:h[5]||(h[5]=ne=>j.value.show=!1)},{default:t(()=>[e(k,A)]),_:1})]),default:t(()=>[u(c(j.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1},8,["modelValue"])}}},[["__scopeId","data-v-c45d3933"]]),ac={class:"text-h5"},lc=r("h5",ac,"Create New Plan Version",-1),rc={class:"text-subtitle-1 mb-4"},sc=rc,tl={};tl.type=Boolean,tl.default=!1;const al={};al.type=String,al.required=!0;const ll={};ll.type=Number,ll.default=0;const sa={};sa.modelValue=tl,sa.planId=al,sa.currentVersionNumber=ll;const oc={__name:"PlanVersionCreateDialog",props:sa,emits:["update:modelValue","submit"],setup(l,{emit:o}){const a=l,s=re({get:()=>a.modelValue,set:R=>o("update:modelValue",R)}),d={roles_and_hours:'[{"role": "Project Manager", "hours": 20, "cost": 2000}, {"role": "Developer", "hours": 80, "cost": 8000}]',estimated_cost:1e4,notes:"",status:"draft"},i=D(d),v=[R=>!!R||"Estimated cost is required",R=>!isNaN(parseFloat(R))||"Estimated cost must be a number"],w=[R=>{try{return JSON.parse(R),!0}catch{return"Roles and hours must be valid JSON"}}],m=D(null),I=()=>{const R={roles_and_hours:'[{"role": "Project Manager", "hours": 20, "cost": 2000}, {"role": "Developer", "hours": 80, "cost": 8000}]',estimated_cost:1e4,notes:"",status:"draft"};i.value=R,m.value&&m.value.resetValidation()},j=()=>{s.value=!1,I()},_=async()=>{const{valid:R}=await m.value.validate();if(R){const q={...i.value};q.estimated_cost=parseFloat(q.estimated_cost),o("submit",q),s.value=!1,I()}};return ht(s,R=>{R||I()}),(R,q)=>{const T=Ge("IconBtn"),B={class:"d-flex pt-5 px-5"},oe={};oe.onClick=j;const ee={icon:"tabler-x"},de={class:"px-5 pt-4"},b={class:"mt-3"},h={cols:"12",md:"6"},N={number:!0},J={cols:"12",md:"6"},se={title:"Draft",value:"draft"},E={title:"Active",value:"active"},F={title:"Archived",value:"archived"},V={title:"Completed",value:"completed"},$={cols:"12"},K={cols:"12"},_e={class:"pa-4"},Q={variant:"tonal",color:"secondary"};return Q.onClick=j,n(),g(et,{modelValue:p(s),"onUpdate:modelValue":q[4]||(q[4]=x=>bt(s)?s.value=x:null),"max-width":"700",persistent:""},{default:t(()=>[e(ye,null,{default:t(()=>[e(ke,B,{default:t(()=>[lc,e(he),e(T,oe,{default:t(()=>[e(k,ee)]),_:1})]),_:1}),e(ue,de,{default:t(()=>[r("p",sc," Creating version "+c(l.currentVersionNumber+1)+" for this development plan. ",1),e(xt,{ref_key:"formRef",ref:m,onSubmit:ut(_,["prevent"])},{default:t(()=>[e(xe,b,{default:t(()=>[e(L,h,{default:t(()=>[e(ze,{modelValue:i.value.estimated_cost,"onUpdate:modelValue":q[0]||(q[0]=x=>i.value.estimated_cost=x),modelModifiers:N,label:"Estimated Cost ($)",type:"number",rules:v,required:""},null,8,["modelValue"])]),_:1}),e(L,J,{default:t(()=>[e(Ae,{modelValue:i.value.status,"onUpdate:modelValue":q[1]||(q[1]=x=>i.value.status=x),label:"Status",items:[se,E,F,V],required:""},null,8,["modelValue"])]),_:1}),e(L,$,{default:t(()=>[e(Je,{modelValue:i.value.roles_and_hours,"onUpdate:modelValue":q[2]||(q[2]=x=>i.value.roles_and_hours=x),label:"Roles & Hours (JSON format)",rules:w,rows:"6",monospace:"",hint:"Format: [{ 'role': 'Developer', 'hours': 40, 'cost': 4000 }]","persistent-hint":""},null,8,["modelValue"])]),_:1}),e(L,K,{default:t(()=>[e(Je,{modelValue:i.value.notes,"onUpdate:modelValue":q[3]||(q[3]=x=>i.value.notes=x),label:"Notes",rows:"4"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),e(ge),e(Pe,_e,{default:t(()=>[e(M,Q,{default:t(()=>[u(" Cancel ")]),_:1}),e(he),e(M,{color:"primary",onClick:_},{default:t(()=>[u(" Create Version ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},nc={height:"300px"},gr={key:0,class:"d-flex justify-center align-center"};gr.style=nc;const ic=gr,uc={key:1,class:"text-center pa-6"},cc=uc,dc={class:"text-h6 mb-2"},mc=r("h4",dc,"No Development Plan",-1),pc={class:"text-body-1 text-medium-emphasis mb-6"},vc=r("p",pc," This project does not have a development plan yet. ",-1),fc={key:2},hc=fc,yc={class:"d-flex flex-column"},gc=yc,_c={class:"text-h6 mb-2"},bc=r("div",_c,"Estimated Cost",-1),xc={class:"text-h4 font-weight-bold"},kc=xc,wc={class:"text-caption text-medium-emphasis"},Vc=wc,Cc={class:"text-h6 mb-3"},Sc=r("div",Cc,"Roles & Hours Breakdown",-1),Dc={class:"text-right"},Uc={class:"text-right"},qc=r("thead",null,[r("tr",null,[r("th",null,"Role"),r("th",Dc,"Hours"),r("th",Uc,"Cost")])],-1),jc={class:"text-right"},zc=jc,Fc={class:"text-right"},Mc=Fc,Ic={class:"d-flex align-center justify-space-between mb-4"},Pc=Ic,Ac={class:"text-h5"},Lc=r("h5",Ac,"Version History",-1),Rc={class:"text-right"},Bc={class:"text-right"},Tc=r("thead",null,[r("tr",null,[r("th",null,"Version"),r("th",null,"Created"),r("th",null,"Status"),r("th",Rc,"Estimated Cost"),r("th",Bc,"Actions")])],-1),Nc=["onClick"],Ec={class:"d-flex align-center"},Oc=Ec,Hc={class:"font-weight-medium"},Gc=Hc,$c={class:"text-right"},Qc=$c,Wc={class:"text-right"},Jc=Wc,Zc={key:1,class:"text-center pa-4"},Kc=Zc,Xc={class:"text-medium-emphasis"},Yc=[r("p",Xc," Only one version available. Create more versions to see the history. ",-1)],ed={key:2,class:"text-center pa-4"},td=ed,ad={class:"text-medium-emphasis"},ld=[r("p",ad," No versions available yet. ",-1)],rl={};rl.type=String,rl.required=!0;const sl={};sl.type=Object,sl.default=()=>({});const ol={};ol.type=Boolean,ol.default=!1;const oa={};oa.projectId=rl,oa.developmentPlan=sl,oa.loading=ol;const rd={__name:"ProjectDevelopmentPlan",props:oa,emits:["refresh"],setup(l,{emit:o}){const a=l,s=yr(),d=Lt(),i=D(null),v=D(!1),w=D(!1),m=D(!1),I={show:!1,text:"",color:"success"},j=D(I),_=re(()=>d.is_admin()),R=re(()=>d.userData.role>=2),q=re(()=>a.developmentPlan&&a.developmentPlan.id),T=re(()=>q.value&&a.developmentPlan.versions?[...a.developmentPlan.versions].sort((E,F)=>F.version_number-E.version_number):[]),B=re(()=>q.value?T.value.find(E=>E.version_number===a.developmentPlan.current_version_number):null),oe=E=>{if(!E)return"";const F={year:"numeric",month:"short",day:"numeric"};return new Date(parseInt(E)).toLocaleDateString("en-US",F)},ee=E=>{if(!E&&E!==0)return"-";const F={style:"currency",currency:"USD",minimumFractionDigits:2};return new Intl.NumberFormat("en-US",F).format(E)},de=E=>{i.value=E,v.value=!0},b=()=>{w.value=!0},h=async E=>{m.value=!0;try{const{data:F,error:V}=await s.createPlanVersion(a.developmentPlan.id,E);F&&!V?(J("Plan version created successfully"),o("refresh")):J("Failed to create plan version","error")}catch(F){J("Failed to create plan version: "+F.message,"error")}finally{m.value=!1,w.value=!1}},N=async()=>{m.value=!0;try{const{data:E,error:F}=await s.createDevelopmentPlan(a.projectId);E&&!F?(J("Development plan created successfully"),o("refresh")):J("Failed to create development plan","error")}catch(E){J("Failed to create development plan: "+E.message,"error")}finally{m.value=!1}},J=(E,F="success")=>{const V={show:!0};V.text=E,V.color=F,j.value=V},se=E=>{if(!E)return[];try{return typeof E=="string"?JSON.parse(E):E}catch(F){return console.error("Error parsing roles and hours:",F),[]}};return(E,F)=>{const V=Ge("IconBtn"),$={class:"pa-6"},K={indeterminate:"",color:"primary"},_e={icon:"tabler-calendar-time",size:"64",color:"secondary",class:"mb-4"},Q={key:0,color:"primary"};Q.onClick=N,Q.loading=m.value;const x={cols:"12"},X={border:"",class:"mb-4"},Z={color:"primary",variant:"tonal",rounded:"",size:"42"},z={icon:"tabler-calendar-stats"},W={color:"primary",size:"small",label:"",class:"me-2"},y={key:0},C={cols:"12",md:"4"},U={cols:"12",md:"8"},le={density:"compact"},pe={cols:"12"},Ve={key:0,color:"primary","prepend-icon":"tabler-plus"};Ve.onClick=b,Ve.disabled=m.value;const te={key:0},H={icon:"tabler-x"};return n(),g(ue,$,{default:t(()=>[l.loading?(n(),f("div",ic,[e(ft,K)])):p(q)?(n(),f("div",hc,[e(xe,null,{default:t(()=>[e(L,x,{default:t(()=>[e(ye,X,{default:t(()=>[e(Le,null,{prepend:t(()=>[e(_t,Z,{default:t(()=>[e(k,z)]),_:1})]),append:t(()=>[e(ie,W,{default:t(()=>[u(" v"+c(l.developmentPlan.current_version_number),1)]),_:1}),e(ie,{color:l.developmentPlan.status==="active"?"success":"warning",size:"small",label:""},{default:t(()=>[u(c(l.developmentPlan.status),1)]),_:1},8,["color"])]),default:t(()=>[e(ke,null,{default:t(()=>[u("Current Development Plan")]),_:1})]),_:1}),e(ge),p(B)?(n(),g(ue,y,{default:t(()=>[e(xe,null,{default:t(()=>[e(L,C,{default:t(()=>[r("div",gc,[bc,r("div",kc,c(ee(p(B).estimated_cost)),1),r("div",Vc," Last updated: "+c(oe(p(B).created_at)),1)])]),_:1}),e(L,U,{default:t(()=>[Sc,e(va,le,{default:t(()=>[qc,r("tbody",null,[(n(!0),f(fe,null,Se(se(p(B).roles_and_hours),(O,me)=>{const we={};return we.key=me,n(),f("tr",we,[r("td",null,c(O.role),1),r("td",zc,c(O.hours),1),r("td",Mc,c(ee(O.cost)),1)])}),128))])]),_:1}),e(M,{color:"primary",variant:"tonal",class:"mt-4",size:"small",onClick:F[0]||(F[0]=O=>de(p(B)))},{default:t(()=>[u(" View Full Details ")]),_:1})]),_:1})]),_:1})]),_:1})):S("",!0)]),_:1})]),_:1}),e(L,pe,{default:t(()=>[r("div",Pc,[Lc,p(R)?(n(),g(M,Ve,{default:t(()=>[u(" New Version ")]),_:1},8,["disabled"])):S("",!0)]),p(T).length>1?(n(),g(va,te,{default:t(()=>[Tc,r("tbody",null,[(n(!0),f(fe,null,Se(p(T),O=>{const me={cursor:"pointer"},we={key:0,color:"primary",size:"x-small",label:"",class:"ms-2"},A={icon:"tabler-eye"};return n(),f("tr",{key:O.id,class:jl({"bg-primary-lighten-5":O.version_number===l.developmentPlan.current_version_number}),style:me,onClick:ne=>de(O)},[r("td",null,[r("div",Oc,[r("span",Gc,"v"+c(O.version_number),1),O.version_number===l.developmentPlan.current_version_number?(n(),g(ie,we,{default:t(()=>[u(" Current ")]),_:1})):S("",!0)])]),r("td",null,c(oe(O.created_at)),1),r("td",null,[e(ie,{color:O.status==="active"?"success":"warning",size:"small",label:""},{default:t(()=>[u(c(O.status),1)]),_:2},1032,["color"])]),r("td",Qc,c(ee(O.estimated_cost)),1),r("td",Jc,[e(M,{icon:"",variant:"text",size:"small",color:"primary",onClick:ut(ne=>de(O),["stop"])},{default:t(()=>[e(k,A)]),_:2},1032,["onClick"])])],10,Nc)}),128))])]),_:1})):p(T).length===1?(n(),f("div",Kc,Yc)):(n(),f("div",td,ld))]),_:1})]),_:1})])):(n(),f("div",cc,[e(k,_e),mc,vc,p(R)?(n(),g(M,Q,{default:t(()=>[u(" Create Development Plan ")]),_:1},8,["loading"])):S("",!0)])),i.value?(n(),g(tc,{key:3,modelValue:v.value,"onUpdate:modelValue":F[1]||(F[1]=O=>v.value=O),version:i.value,"is-current":i.value&&l.developmentPlan&&i.value.version_number===l.developmentPlan.current_version_number,"is-admin":p(_),"has-manager-permission":p(R),"plan-id":l.developmentPlan?l.developmentPlan.id:null,onRefresh:F[2]||(F[2]=O=>o("refresh"))},null,8,["modelValue","version","is-current","is-admin","has-manager-permission","plan-id"])):S("",!0),e(oc,{modelValue:w.value,"onUpdate:modelValue":F[3]||(F[3]=O=>w.value=O),"plan-id":l.developmentPlan?l.developmentPlan.id:null,"current-version-number":l.developmentPlan?l.developmentPlan.current_version_number:0,onSubmit:h},null,8,["modelValue","plan-id","current-version-number"]),e(tt,{modelValue:j.value.show,"onUpdate:modelValue":F[5]||(F[5]=O=>j.value.show=O),color:j.value.color,timeout:5e3},{actions:t(()=>[e(V,{onClick:F[4]||(F[4]=O=>j.value.show=!1)},{default:t(()=>[e(k,H)]),_:1})]),default:t(()=>[u(c(j.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1})}}},Re=l=>(nt("data-v-5ae692aa"),l=l(),it(),l),sd={key:0,class:"text-h5"},od=sd,nd={key:1,class:"text-h5"},id=nd,ud={key:0},cd=ud,dd={class:"align-center justify-space-between mb-3"},md=dd,pd={class:"text-subtitle-1 font-weight-medium"},vd=Re(()=>r("div",pd,"Acceptance Criteria",-1)),fd={key:1,class:"text-medium-emphasis text-center pa-4 rounded bg-grey-lighten-5"},hd=fd,yd={key:1},gd=yd,_d={class:"d-flex align-center mb-5"},bd=_d,xd={class:"text-medium-emphasis d-flex align-center"},kd=xd,wd={class:"text-caption me-4"},Vd=wd,Cd={class:"text-caption"},Sd=Cd,Dd={class:"user-story-format mb-6"},Ud=Dd,qd={class:"text-h5 mb-4"},jd=qd,zd={class:"text-primary"},Fd=Re(()=>r("span",zd,"As a",-1)),Md={class:"text-h5 mb-4"},Id=Md,Pd={class:"text-primary"},Ad=Re(()=>r("span",Pd,"I want to",-1)),Ld={class:"text-h5 mb-4"},Rd=Ld,Bd={class:"text-primary"},Td=Re(()=>r("span",Bd,"so that",-1)),Nd={key:0},Ed=Nd,Od={class:"text-h6 mb-3"},Hd=Re(()=>r("div",Od,"Acceptance Criteria",-1)),Gd={key:1,class:"text-medium-emphasis text-center pa-4"},$d=Gd,Qd={key:2,class:"mt-6"},Wd=Qd,Jd=Re(()=>r("p",null,"This user story is currently being regenerated. Please check back shortly.",-1)),Zd={key:0,class:"text-center pa-6"},Kd=Zd,Xd={class:"text-h6 mb-2"},Yd=Re(()=>r("h4",Xd,"No History Available",-1)),em={class:"text-medium-emphasis"},tm=Re(()=>r("p",em," This user story hasn't been modified since its creation. ",-1)),am={key:1},lm=am,rm={class:"text-caption"},sm=rm,om={class:"text-caption text-medium-emphasis"},nm=om,im={class:"text-primary"},um=Re(()=>r("span",im,"As a",-1)),cm={class:"mb-2"},dm=cm,mm={class:"text-primary"},pm=Re(()=>r("span",mm,"I want to",-1)),vm={class:"mb-4"},fm=vm,hm={class:"text-primary"},ym=Re(()=>r("span",hm,"so that",-1)),gm={key:0},_m=gm,bm={class:"text-subtitle-2 font-weight-medium mb-2"},xm=Re(()=>r("div",bm,"Acceptance Criteria:",-1)),km={class:"ms-3"},wm=km,Vm={class:"text-caption mt-3"},Cm=Vm,Sm={class:"d-flex justify-end mt-2"},Dm=Sm,Um={key:1,class:"text-center pa-6"},qm=Um,jm={class:"text-h6 mb-2"},zm=Re(()=>r("h4",jm,"No Comments Yet",-1)),Fm={class:"text-medium-emphasis"},Mm=Re(()=>r("p",Fm," Be the first to comment on this user story. ",-1)),Im={key:2},Pm=Im,Am={class:"d-flex align-center"},Lm=Am,Rm={class:"d-flex align-center"},Bm=Rm,Tm={class:"text-caption text-medium-emphasis ml-2"},Nm=Tm,Em={class:"comment-text mt-2 whitespace-pre-wrap"},Om=Em,Hm={class:"text-body-1 mb-3"},Gm=Re(()=>r("p",Hm," This will use AI to regenerate this user story based on your feedback and the associated requirement. ",-1)),nl={};nl.type=Boolean,nl.default=!1;const il={};il.type=Object,il.required=!0;const ul={};ul.type=Boolean,ul.default=!1;const cl={};cl.type=Boolean,cl.default=!1;const dl={};dl.type=Boolean,dl.default=!1;const Pt={};Pt.modelValue=nl,Pt.userStory=il,Pt.isAdmin=ul,Pt.hasManagerPermission=cl,Pt.hasModeratorPermission=dl;const $m=ot({__name:"UserStoryDetailsDialog",props:Pt,emits:["update:modelValue","update","delete","regenerate"],setup(l,{emit:o}){const a=l,s=re({get:()=>a.modelValue,set:Z=>o("update:modelValue",Z)}),d=Il(),i=D(0),v=D(!1),w={...a.userStory},m=D(w),I=D(""),j=D(""),_=D(""),R=D(!1),q=D(!1),T={show:!1,text:"",color:"success"},B=D(T),oe={title:"Draft",value:"draft"},ee={title:"Active",value:"active"},de={title:"Archived",value:"archived"},b={title:"Completed",value:"completed"},h=[oe,ee,de,b],N=re(()=>a.userStory.history||[]),J=re(()=>a.userStory.comments||[]),se=Z=>{if(!Z)return"";Z=parseInt(Z);const z={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(Z).toLocaleDateString("en-US",z)},E=()=>{if(v.value){const Z={...a.userStory};m.value=Z,I.value=""}v.value=!v.value},F=()=>{I.value.trim()&&(!m.value.acceptance_criteria&&(m.value.acceptance_criteria=[]),m.value.acceptance_criteria.push(I.value.trim()),I.value="")},V=()=>{o("update",m.value),v.value=!1},$=()=>{o("delete")},K=()=>{_.value="",R.value=!0},_e=()=>{o("regenerate",_.value),R.value=!1},Q=async()=>{if(j.value.trim()){q.value=!0;try{const Z={};Z.text=j.value,Z.status="active";const{data:z,error:W}=await d.createComment(a.userStory.id,Z);if(z&&!W){x("Comment added successfully"),j.value="";const{data:y}=await d.fetchUserStoryById(a.userStory.id);y&&Object.assign(a.userStory,y)}else x("Failed to add comment","error")}catch(Z){x("Failed to add comment: "+Z.message,"error")}finally{q.value=!1}}},x=(Z,z="success")=>{const W={show:!0};W.text=Z,W.color=z,B.value=W};return ht(()=>a.userStory,Z=>{const z={...Z};m.value=z},{deep:!0}),(Z,z)=>{const W=Ge("IconBtn"),y={class:"d-flex pt-5 px-5"},C={icon:"tabler-x"},U={class:"pb-0"},le={value:"0"},pe={size:"18",icon:"tabler-user-check",start:""},Ve={value:"1"},te={size:"18",icon:"tabler-history",start:""},H={key:0,size:"x-small",color:"primary",class:"ms-2"},O={value:"2"},me={size:"18",icon:"tabler-messages",start:""},we={key:0,size:"x-small",color:"primary",class:"ms-2"},A={"min-height":"400px","max-height":"70vh"},ne={class:"pa-6"};ne.style=A;const Ce={value:"0"},qe={class:"mt-3"},Be={cols:"12"},Te={cols:"12"},Me={cols:"12"},be={cols:"12",md:"6"},Ie={cols:"12"},Y={class:"w-100"},Ze={cols:"10",sm:"8"},Ke={cols:"2",sm:"4"},at={key:0},lt={color:"secondary",size:"small",label:"",class:"ms-2"},ce={size:"18",icon:"tabler-calendar",class:"me-1"},$e={size:"18",icon:"tabler-calendar-plus",class:"me-1"},mt={class:"mb-4"},pt={color:"info",variant:"tonal",icon:"tabler-refresh"},Ne={value:"1"},rt={icon:"tabler-history",size:"64",color:"secondary",class:"mb-3"},kt={density:"compact",align:"start"},Dt={value:"2"},yt={class:"mt-3"},Rt={cols:"12"},Bt={cols:"12"},Tt={key:0,class:"mb-4"},Nt={icon:"tabler-messages",size:"64",color:"secondary",class:"mb-3"},Ut={class:"pa-4"},qt={key:0},wt={color:"secondary",variant:"tonal"};wt.onClick=E;const Et={key:1},jt={key:0,color:"error",variant:"tonal","prepend-icon":"tabler-trash"};jt.onClick=$;const zt={key:1,color:"info",variant:"tonal","prepend-icon":"tabler-refresh",class:"ms-2"};zt.onClick=K;const Ft={key:2,color:"primary","prepend-icon":"tabler-edit"};Ft.onClick=E;const Ot={class:"pt-3 pb-0"},Mt={color:"primary"};Mt.onClick=_e;const Ht={icon:"tabler-x"};return n(),g(et,{modelValue:p(s),"onUpdate:modelValue":z[14]||(z[14]=G=>bt(s)?s.value=G:null),"max-width":"900",scrollable:""},{default:t(()=>[e(ye,null,{default:t(()=>[e(ke,y,{default:t(()=>[v.value?(n(),f("h5",od,"Edit User Story")):(n(),f("h5",id,"User Story Details")),e(he),e(W,{onClick:z[0]||(z[0]=G=>s.value=!1)},{default:t(()=>[e(k,C)]),_:1})]),_:1}),e(ue,U,{default:t(()=>[e(Fl,{modelValue:i.value,"onUpdate:modelValue":z[1]||(z[1]=G=>i.value=G),"slider-color":"primary","align-tabs":"start"},{default:t(()=>[e(Oe,le,{default:t(()=>[e(k,pe),u(" Details ")]),_:1}),e(Oe,Ve,{default:t(()=>[e(k,te),u(" History "),p(N).length?(n(),g(ie,H,{default:t(()=>[u(c(p(N).length),1)]),_:1})):S("",!0)]),_:1}),e(Oe,O,{default:t(()=>[e(k,me),u(" Comments "),p(J).length?(n(),g(ie,we,{default:t(()=>[u(c(p(J).length),1)]),_:1})):S("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(ge),e(ue,ne,{default:t(()=>[e(Ml,{modelValue:i.value,"onUpdate:modelValue":z[8]||(z[8]=G=>i.value=G),class:"mt-5"},{default:t(()=>[e(He,Ce,{default:t(()=>[v.value?(n(),f("div",cd,[e(xt,{onSubmit:ut(V,["prevent"])},{default:t(()=>[e(xe,qe,{default:t(()=>[e(L,Be,{default:t(()=>[e(ze,{modelValue:m.value.role,"onUpdate:modelValue":z[2]||(z[2]=G=>m.value.role=G),label:"Role (As a...)",required:"",rules:[G=>!!G||"Role is required"]},null,8,["modelValue","rules"])]),_:1}),e(L,Te,{default:t(()=>[e(ze,{modelValue:m.value.action,"onUpdate:modelValue":z[3]||(z[3]=G=>m.value.action=G),label:"Action (I want to...)",required:"",rules:[G=>!!G||"Action is required"]},null,8,["modelValue","rules"])]),_:1}),e(L,Me,{default:t(()=>[e(ze,{modelValue:m.value.benefit,"onUpdate:modelValue":z[4]||(z[4]=G=>m.value.benefit=G),label:"Benefit (So that...)",required:"",rules:[G=>!!G||"Benefit is required"]},null,8,["modelValue","rules"])]),_:1}),e(L,be,{default:t(()=>[e(Ae,{modelValue:m.value.status,"onUpdate:modelValue":z[5]||(z[5]=G=>m.value.status=G),label:"Status",items:h,required:""},null,8,["modelValue"])]),_:1}),e(L,Ie,{default:t(()=>[r("div",md,[vd,e(xe,Y,{default:t(()=>[e(L,Ze,{default:t(()=>[e(ze,{modelValue:I.value,"onUpdate:modelValue":z[6]||(z[6]=G=>I.value=G),placeholder:"Add new criterion",density:"compact","hide-details":"",class:"me-2",onKeyup:Wl(F,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(L,Ke,{default:t(()=>[e(M,{color:"primary",size:"small",disabled:!I.value.trim(),onClick:F},{default:t(()=>[u(" Add ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),m.value.acceptance_criteria&&m.value.acceptance_criteria.length>0?(n(),g(da,at,{default:t(()=>[(n(!0),f(fe,null,Se(m.value.acceptance_criteria,(G,Ee)=>{const Fe={};Fe.key=Ee;const Xe={icon:"tabler-check",color:"success"},st={icon:"tabler-trash",size:"18"};return n(),g(ma,Fe,{prepend:t(()=>[e(k,Xe)]),append:t(()=>[e(W,{color:"error",variant:"text",size:"small",onClick:gt=>{return Ye=Ee,void m.value.acceptance_criteria.splice(Ye,1);var Ye}},{default:t(()=>[e(k,st)]),_:2},1032,["onClick"])]),default:t(()=>[e(pa,null,{default:t(()=>[u(c(G),1)]),_:2},1024)]),_:2},1024)}),128))]),_:1})):(n(),f("div",hd," No acceptance criteria added yet "))]),_:1})]),_:1})]),_:1},8,["onSubmit"])])):(n(),f("div",gd,[r("div",bd,[e(ie,{color:p(We)(l.userStory.status),size:"small",label:"",class:"me-2"},{default:t(()=>[u(c(Xt(l.userStory.status)),1)]),_:1},8,["color"]),e(ie,lt,{default:t(()=>[u(" v"+c(l.userStory.version_number),1)]),_:1}),e(he),r("div",kd,[e(k,ce),r("span",Vd,"Updated: "+c(se(l.userStory.updated_at)),1),e(k,$e),r("span",Sd,"Created: "+c(se(l.userStory.created_at)),1)])]),r("div",Ud,[r("div",jd,[Fd,u(" "+c(l.userStory.role)+", ",1)]),r("div",Id,[Ad,u(" "+c(l.userStory.action)+", ",1)]),r("div",Rd,[Td,u(" "+c(l.userStory.benefit)+". ",1)])]),e(ge,mt),l.userStory.acceptance_criteria&&l.userStory.acceptance_criteria.length>0?(n(),f("div",Ed,[Hd,e(da,null,{default:t(()=>[(n(!0),f(fe,null,Se(l.userStory.acceptance_criteria,(G,Ee)=>{const Fe={};Fe.key=Ee,Fe.class="px-0";const Xe={icon:"tabler-check",color:"success",class:"me-2"};return n(),g(ma,Fe,{prepend:t(()=>[e(k,Xe)]),default:t(()=>[e(pa,null,{default:t(()=>[u(c(G),1)]),_:2},1024)]),_:2},1024)}),128))]),_:1})])):(n(),f("div",$d," No acceptance criteria defined for this user story. ")),l.userStory.generation_status==="in_progress"?(n(),f("div",Wd,[e(ga,pt,{default:t(()=>[e(Xl,null,{default:t(()=>[u("Regenerating User Story")]),_:1}),Jd]),_:1})])):S("",!0)]))]),_:1}),e(He,Ne,{default:t(()=>[p(N).length===0?(n(),f("div",Kd,[e(k,rt),Yd,tm])):(n(),f("div",lm,[e(Yl,kt,{default:t(()=>[(n(!0),f(fe,null,Se(p(N),(G,Ee)=>{const Fe={};Fe.key=Ee,Fe["dot-color"]="primary",Fe.size="small";const Xe={border:""},st={color:"primary",variant:"tonal",size:"36"},gt={icon:"tabler-user-check"};return n(),g(er,Fe,{opposite:t(()=>[r("div",sm,c(se(G.changed_at)),1),r("div",nm,"v"+c(G.version_number),1)]),default:t(()=>[e(ye,Xe,{default:t(()=>[e(Le,null,{prepend:t(()=>[e(_t,st,{default:t(()=>[e(k,gt)]),_:1})]),append:t(()=>[e(ie,{color:p(We)(G.status),size:"small",label:"",class:"ms-2"},{default:t(()=>[u(c(G.status),1)]),_:2},1032,["color"])]),default:t(()=>[e(ke,null,{default:t(()=>[um,u(" "+c(G.role),1)]),_:2},1024)]),_:2},1024),e(ue,null,{default:t(()=>[r("p",dm,[pm,u(" "+c(G.action),1)]),r("p",fm,[ym,u(" "+c(G.benefit),1)]),G.acceptance_criteria&&G.acceptance_criteria.length>0?(n(),f("div",_m,[xm,r("ul",wm,[(n(!0),f(fe,null,Se(G.acceptance_criteria,(Ye,Vt)=>{const ae={};return ae.key=Vt,n(),f("li",ae,c(Ye),1)}),128))])])):S("",!0),r("div",Cm," Changed by: "+c(G.changed_by?G.changed_by.username:"System"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)}),128))]),_:1})]))]),_:1}),e(He,Dt,{default:t(()=>[e(xe,yt,{default:t(()=>[e(L,Rt,{default:t(()=>[e(Je,{modelValue:j.value,"onUpdate:modelValue":z[7]||(z[7]=G=>j.value=G),label:"Add a comment",rows:"3",counter:"",disabled:q.value},null,8,["modelValue","disabled"]),r("div",Dm,[e(M,{color:"primary",size:"small",loading:q.value,disabled:!j.value.trim(),onClick:Q},{default:t(()=>[u(" Add Comment ")]),_:1},8,["loading","disabled"])])]),_:1}),e(L,Bt,{default:t(()=>[p(J).length?(n(),g(ge,Tt)):S("",!0),p(J).length===0?(n(),f("div",qm,[e(k,Nt),zm,Mm])):(n(),f("div",Pm,[(n(!0),f(fe,null,Se(p(J),G=>{const Ee={};Ee.key=G.id,Ee.class="comment-item mb-4";const Fe={border:""},Xe={class:"py-2"},st={color:"primary",variant:"tonal",size:"36",class:"me-3"},gt={icon:"tabler-user"},Ye={icon:"tabler-trash",size:"18"};return n(),f("div",Ee,[e(ye,Fe,{default:t(()=>[e(ue,Xe,{default:t(()=>[r("div",Lm,[e(_t,st,{default:t(()=>[e(k,gt)]),_:1}),r("div",null,[r("div",Bm,[r("strong",null,c(G.user?G.user.username:"Unknown User"),1),r("div",Nm,c(se(G.created_at)),1)])]),e(he),l.isAdmin||l.hasManagerPermission?(n(),g(W,{key:0,size:"small",color:"error",variant:"text",onClick:Vt=>(async ae=>{q.value=!0;try{const{success:De,error:P}=await d.deleteComment(ae);if(De&&!P){x("Comment deleted successfully");const{data:je}=await d.fetchUserStoryById(a.userStory.id);je&&Object.assign(a.userStory,je)}else x("Failed to delete comment","error")}catch(De){x("Failed to delete comment: "+De.message,"error")}finally{q.value=!1}})(G.id),disabled:q.value},{default:t(()=>[e(k,Ye)]),_:2},1032,["onClick","disabled"])):S("",!0)]),r("div",Om,c(G.text),1)]),_:2},1024)]),_:2},1024)])}),128))]))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(ge),e(Pe,Ut,{default:t(()=>[v.value?(n(),f(fe,qt,[e(M,wt,{default:t(()=>[u(" Cancel ")]),_:1}),e(he),e(M,{color:"primary",onClick:V},{default:t(()=>[u(" Save Changes ")]),_:1})],64)):(n(),f(fe,Et,[l.isAdmin?(n(),g(M,jt,{default:t(()=>[u(" Delete ")]),_:1})):S("",!0),l.hasModeratorPermission?(n(),g(M,zt,{default:t(()=>[u(" Regenerate ")]),_:1})):S("",!0),e(he),l.hasModeratorPermission?(n(),g(M,Ft,{default:t(()=>[u(" Edit ")]),_:1})):S("",!0)],64))]),_:1})]),_:1}),e(et,{modelValue:R.value,"onUpdate:modelValue":z[11]||(z[11]=G=>R.value=G),"max-width":"600",persistent:""},{default:t(()=>[e(ye,null,{default:t(()=>[e(ke,Ot,{default:t(()=>[u(" Regenerate User Story ")]),_:1}),e(ue,null,{default:t(()=>[Gm,e(Je,{modelValue:_.value,"onUpdate:modelValue":z[9]||(z[9]=G=>_.value=G),label:"Feedback for Regeneration",placeholder:"Explain what you want to improve about this user story...",rows:"4",counter:""},null,8,["modelValue"])]),_:1}),e(Pe,null,{default:t(()=>[e(M,{color:"secondary",variant:"tonal",onClick:z[10]||(z[10]=G=>R.value=!1)},{default:t(()=>[u(" Cancel ")]),_:1}),e(he),e(M,Mt,{default:t(()=>[u(" Regenerate ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(tt,{modelValue:B.value.show,"onUpdate:modelValue":z[13]||(z[13]=G=>B.value.show=G),color:B.value.color,timeout:5e3},{actions:t(()=>[e(W,{onClick:z[12]||(z[12]=G=>B.value.show=!1)},{default:t(()=>[e(k,Ht)]),_:1})]),default:t(()=>[u(c(B.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1},8,["modelValue"])}}},[["__scopeId","data-v-5ae692aa"]]),Qm={class:"text-h5"},Wm=Qm,Jm={class:"text-subtitle-1 font-weight-medium"},Zm=r("div",Jm,"Acceptance Criteria",-1),Km={class:"d-flex align-center justify-space-between mb-3"},Xm=Km,Ym={key:1,class:"text-medium-emphasis text-center pa-4 rounded bg-grey-lighten-5"},ep=Ym,ml={};ml.type=Boolean,ml.default=!1;const pl={};pl.type=Boolean,pl.default=!1;const vl={};vl.type=Object,vl.default=()=>({});const na={};na.modelValue=ml,na.editMode=pl,na.userStoryData=vl;const tp={__name:"UserStoryCreateDialog",props:na,emits:["update:modelValue","submit"],setup(l,{emit:o}){const a=l,s=re({get:()=>a.modelValue,set:h=>o("update:modelValue",h)}),d={};d.role=a.editMode&&a.userStoryData?a.userStoryData.role:"",d.action=a.editMode&&a.userStoryData?a.userStoryData.action:"",d.benefit=a.editMode&&a.userStoryData?a.userStoryData.benefit:"",d.acceptance_criteria=a.editMode&&a.userStoryData?[...a.userStoryData.acceptance_criteria]:[],d.status=a.editMode&&a.userStoryData?a.userStoryData.status:"draft";const i=D(d),v=D(""),w=D(null),m=[h=>!!h||"Role is required"],I=[h=>!!h||"Action is required"],j=[h=>!!h||"Benefit is required"],_={title:"Draft",value:"draft"},R={title:"Active",value:"active"},q={title:"Archived",value:"archived"},T={title:"Completed",value:"completed"},B=[_,R,q,T],oe=()=>{v.value.trim()&&(!i.value.acceptance_criteria&&(i.value.acceptance_criteria=[]),i.value.acceptance_criteria.push(v.value.trim()),v.value="")},ee=()=>{const h={role:"",action:"",benefit:"",acceptance_criteria:[],status:"draft"};i.value=h,v.value="",w.value&&w.value.resetValidation()},de=()=>{s.value=!1,ee()},b=async()=>{const{valid:h}=await w.value.validate();h&&(o("submit",i.value),s.value=!1,ee())};return ht(s,h=>{h||ee()}),(h,N)=>{const J=Ge("IconBtn"),se={class:"d-flex pt-5 px-5"},E={};E.onClick=de;const F={icon:"tabler-x"},V={class:"px-5 pt-4"},$={class:"mt-3"},K={cols:"12"},_e={cols:"12"},Q={cols:"12"},x={cols:"12",md:"6"},X={cols:"12"},Z={class:"w-100"},z={cols:"10",sm:"8"},W={cols:"2",sm:"4"},y={key:0},C={class:"pa-4"},U={variant:"tonal",color:"secondary"};return U.onClick=de,n(),g(et,{modelValue:p(s),"onUpdate:modelValue":N[5]||(N[5]=le=>bt(s)?s.value=le:null),"max-width":"700",persistent:""},{default:t(()=>[e(ye,null,{default:t(()=>[e(ke,se,{default:t(()=>[r("h5",Wm,c(a.editMode?"Edit User Story":"Create New User Story"),1),e(he),e(J,E,{default:t(()=>[e(k,F)]),_:1})]),_:1}),e(ue,V,{default:t(()=>[e(xt,{ref_key:"formRef",ref:w,onSubmit:ut(b,["prevent"])},{default:t(()=>[e(xe,$,{default:t(()=>[e(L,K,{default:t(()=>[e(ze,{modelValue:i.value.role,"onUpdate:modelValue":N[0]||(N[0]=le=>i.value.role=le),label:"Role (As a...)",rules:m,placeholder:"e.g. registered user, system administrator, customer",required:""},null,8,["modelValue"])]),_:1}),e(L,_e,{default:t(()=>[e(ze,{modelValue:i.value.action,"onUpdate:modelValue":N[1]||(N[1]=le=>i.value.action=le),label:"Action (I want to...)",rules:I,placeholder:"e.g. search for products, export reports, reset my password",required:""},null,8,["modelValue"])]),_:1}),e(L,Q,{default:t(()=>[e(ze,{modelValue:i.value.benefit,"onUpdate:modelValue":N[2]||(N[2]=le=>i.value.benefit=le),label:"Benefit (So that...)",rules:j,placeholder:"e.g. I can find what I need quickly, I can analyze the data offline",required:""},null,8,["modelValue"])]),_:1}),e(L,x,{default:t(()=>[e(Ae,{modelValue:i.value.status,"onUpdate:modelValue":N[3]||(N[3]=le=>i.value.status=le),label:"Status",items:B,required:""},null,8,["modelValue"])]),_:1}),e(L,X,{default:t(()=>[Zm,r("div",Xm,[e(xe,Z,{default:t(()=>[e(L,z,{default:t(()=>[e(ze,{modelValue:v.value,"onUpdate:modelValue":N[4]||(N[4]=le=>v.value=le),placeholder:"Add new criterion",density:"compact","hide-details":"",class:"me-2",onKeyup:Wl(oe,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(L,W,{default:t(()=>[e(M,{color:"primary",size:"small",disabled:!v.value.trim(),onClick:oe},{default:t(()=>[u(" Add ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),i.value.acceptance_criteria&&i.value.acceptance_criteria.length>0?(n(),g(da,y,{default:t(()=>[(n(!0),f(fe,null,Se(i.value.acceptance_criteria,(le,pe)=>{const Ve={};Ve.key=pe;const te={icon:"tabler-check",color:"success"},H={icon:"tabler-trash",size:"18"};return n(),g(ma,Ve,{prepend:t(()=>[e(k,te)]),append:t(()=>[e(J,{color:"error",variant:"text",size:"small",onClick:O=>{return me=pe,void i.value.acceptance_criteria.splice(me,1);var me}},{default:t(()=>[e(k,H)]),_:2},1032,["onClick"])]),default:t(()=>[e(pa,null,{default:t(()=>[u(c(le),1)]),_:2},1024)]),_:2},1024)}),128))]),_:1})):(n(),f("div",ep," No acceptance criteria added yet. Add at least one criterion to help clarify when this user story is considered done. "))]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),e(ge),e(Pe,C,{default:t(()=>[e(M,U,{default:t(()=>[u(" Cancel ")]),_:1}),e(he),e(M,{color:"primary",onClick:b},{default:t(()=>[u(c(a.editMode?"Update":"Create")+" User Story ",1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},ba=l=>(nt("data-v-50fff0f2"),l=l(),it(),l),ap={height:"300px"},_r={key:0,class:"d-flex justify-center align-center"};_r.style=ap;const lp=_r,rp={key:1,class:"text-center pa-4"},sp=rp,op={class:"text-h6 mb-2"},np=ba(()=>r("h4",op,"No User Stories Found",-1)),ip={class:"text-body-1 text-medium-emphasis mb-6"},up=ip,cp={class:"text-body-1 mb-2"},dp=cp,mp={class:"font-weight-medium text-primary"},pp=ba(()=>r("span",mp,"I want to:",-1)),vp={class:"text-body-1 mb-4"},fp=vp,hp={class:"font-weight-medium text-primary"},yp=ba(()=>r("span",hp,"So that:",-1)),gp={key:0},_p=gp,bp={class:"text-subtitle-2 font-weight-medium mb-2 text-primary"},xp=ba(()=>r("div",bp,"Acceptance Criteria:",-1)),kp={class:"ml-4"},wp=kp,Vp={key:0},Cp=Vp,Sp={class:"d-flex align-center justify-space-between mt-3"},Dp=Sp,Up={class:"d-flex align-center"},qp=Up,jp={class:"text-caption"},zp=jp,Fp={class:"d-flex align-center"},Mp=Fp,Ip={class:"text-caption"},Pp=Ip,fl={};fl.type=String,fl.required=!0;const ia={};ia.type=String,ia.required=!1,ia.default=null;const hl={};hl.type=Array,hl.default=()=>[];const yl={};yl.type=Boolean,yl.default=!1;const Qt={};Qt.projectId=fl,Qt.requirementId=ia,Qt.userStories=hl,Qt.loading=yl;const Ap=ot({__name:"UserStoriesList",props:Qt,emits:["refresh"],setup(l,{emit:o}){const a=l,s=Il(),d=Lt(),i=D(""),v=D(["draft","active","completed"]),w=D(null),m=D(!1),I=D(!1),j=D(!1),_=D(!1),R={show:!1,text:"",color:"success"},q=D(R),T=re(()=>d.is_admin()),B=re(()=>d.userData.role>=2),oe=re(()=>d.userData.role>=3),ee={title:"Draft",value:"draft"},de={title:"Active",value:"active"},b={title:"Archived",value:"archived"},h={title:"Completed",value:"completed"},N=[ee,de,b,h],J=re(()=>a.userStories.filter(Q=>{const x=!i.value||Q.role.toLowerCase().includes(i.value.toLowerCase())||Q.action.toLowerCase().includes(i.value.toLowerCase())||Q.benefit.toLowerCase().includes(i.value.toLowerCase()),X=v.value.includes(Q.status);return x&&X})),se=()=>{I.value=!0},E=async Q=>{_.value=!0;try{const x={...Q};x.requirement=a.requirementId;const{data:X,error:Z}=await s.createUserStory(x);X&&!Z?(K("User story created successfully"),o("refresh")):K("Failed to create user story","error")}catch(x){K("Failed to create user story: "+x.message,"error")}finally{_.value=!1}},F=async Q=>{_.value=!0;try{const{data:x,error:X}=await s.updateUserStory(w.value.id,Q);x&&!X?(K("User story updated successfully"),o("refresh")):K("Failed to update user story","error")}catch(x){K("Failed to update user story: "+x.message,"error")}finally{_.value=!1}},V=async()=>{if(w.value){_.value=!0,j.value=!1;try{const{success:Q,error:x}=await s.deleteUserStory(w.value.id);Q&&!x?(K("User story deleted successfully"),o("refresh"),m.value=!1):K("Failed to delete user story","error")}catch(Q){K("Failed to delete user story: "+Q.message,"error")}finally{_.value=!1}}},$=async(Q="")=>{if(w.value){_.value=!0;try{const{data:x,error:X}=await s.regenerateUserStory(w.value.id,Q);x&&!X?(K("User story regeneration started"),setTimeout(()=>{o("refresh")},3e3)):K("Failed to regenerate user story","error")}catch(x){K("Failed to regenerate user story: "+x.message,"error")}finally{_.value=!1}}},K=(Q,x="success")=>{const X={show:!0};X.text=Q,X.color=x,q.value=X},_e=Q=>{if(!Q)return"";Q=parseInt(Q);const x={year:"numeric",month:"short",day:"numeric"};return new Date(Q).toLocaleDateString("en-US",x)};return zl(()=>{a.requirementId&&!a.userStories.length&&!a.loading&&s.fetchUserStories(a.requirementId).then(({data:Q})=>{Q&&o("refresh")})}),(Q,x)=>{const X=Yt,Z=Ge("IconBtn"),z={class:"pa-6"},W={cols:"12",md:"6"},y={};y.modelValue=i.value,y["onUpdate:modelValue"]=x[0]||(x[0]=A=>i.value=A),y.density="compact",y.placeholder="Search user stories...",y["prepend-inner-icon"]="tabler-search",y["hide-details"]="",y.variant="outlined",y.clearable="";const C={cols:"12",md:"4"},U={};U.modelValue=v.value,U["onUpdate:modelValue"]=x[1]||(x[1]=A=>v.value=A),U.items=N,U.density="compact",U["hide-details"]="",U.label="Status",U.variant="outlined",U.multiple="",U.chips="";const le={cols:"12",md:"2",class:"d-flex align-center"},pe={key:0,color:"primary","prepend-icon":"tabler-plus"};pe.onClick=se,pe.loading=_.value,pe.block="";const Ve={class:"my-5"},te={indeterminate:"",color:"primary"},H={icon:"tabler-notebook",size:"64",color:"secondary",class:"mb-4"},O={key:0,color:"primary"};O.onClick=se,O["prepend-icon"]="tabler-plus";const me={key:2},we={icon:"tabler-x"};return n(),g(ue,z,{default:t(()=>[e(xe,null,{default:t(()=>[e(L,W,{default:t(()=>[e(ze,y,null,8,["modelValue"])]),_:1}),e(L,C,{default:t(()=>[e(Ae,U,null,8,["modelValue"])]),_:1}),e(L,le,{default:t(()=>[p(oe)&&l.requirementId?(n(),g(M,pe,{default:t(()=>[u(" Add ")]),_:1},8,["loading"])):S("",!0)]),_:1})]),_:1}),e(ge,Ve),l.loading?(n(),f("div",lp,[e(ft,te)])):p(J).length===0?(n(),f("div",sp,[e(k,H),np,r("p",up,c(i.value||v.value.length>0?"Try adjusting your filters to see more results.":"This requirement does not have any user stories yet."),1),p(oe)&&l.requirementId&&!i.value&&v.value.length===0?(n(),g(M,O,{default:t(()=>[u(" Add User Story ")]),_:1})):S("",!0)])):(n(),g(xe,me,{default:t(()=>[(n(!0),f(fe,null,Se(p(J),A=>{const ne={};ne.key=A.id,ne.cols="12",ne.md="6";const Ce={color:"primary",variant:"tonal",size:"42"},qe={icon:"tabler-user-check"},Be={class:"d-flex flex-column"},Te={size:"16",icon:"tabler-calendar",class:"me-1"},Me={size:"16",icon:"tabler-history",class:"me-1"};return n(),g(L,ne,{default:t(()=>[e(ye,{class:"user-story-card h-100 d-flex flex-column",onClick:be=>{return Ie=A,w.value=Ie,void(m.value=!0);var Ie},border:"",hover:""},{default:t(()=>[e(Le,null,{prepend:t(()=>[e(_t,Ce,{default:t(()=>[e(k,qe)]),_:1})]),append:t(()=>[e(ie,{color:p(We)(A.status),size:"small",label:""},{default:t(()=>[u(c(A.status),1)]),_:2},1032,["color"])]),default:t(()=>[e(ke,null,{default:t(()=>[u("As a "+c(A.role),1)]),_:2},1024)]),_:2},1024),e(ue,Be,{default:t(()=>[r("p",dp,[pp,u(" "+c(A.action),1)]),r("p",fp,[yp,u(" "+c(A.benefit),1)]),A.acceptance_criteria&&A.acceptance_criteria.length>0?(n(),f("div",_p,[xp,r("ul",wp,[(n(!0),f(fe,null,Se(A.acceptance_criteria.slice(0,2),(be,Ie)=>{const Y={};return Y.key=Ie,n(),f("li",Y,c(be),1)}),128)),A.acceptance_criteria.length>2?(n(),f("li",Cp," ...and "+c(A.acceptance_criteria.length-2)+" more ",1)):S("",!0)])])):S("",!0),e(he),r("div",Dp,[r("div",qp,[e(k,Te),r("span",zp,c(_e(A.updated_at)),1)]),r("div",Mp,[e(k,Me),r("span",Pp,"v"+c(A.version_number),1)])])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)}),128))]),_:1})),w.value?(n(),g($m,{key:3,modelValue:m.value,"onUpdate:modelValue":x[2]||(x[2]=A=>m.value=A),"user-story":w.value,onDelete:x[3]||(x[3]=A=>j.value=!0),onUpdate:F,onRegenerate:$,"is-admin":p(T),"has-manager-permission":p(B),"has-moderator-permission":p(oe)},null,8,["modelValue","user-story","is-admin","has-manager-permission","has-moderator-permission"])):S("",!0),e(tp,{modelValue:I.value,"onUpdate:modelValue":x[4]||(x[4]=A=>I.value=A),onSubmit:E},null,8,["modelValue"]),e(X,{isDialogVisible:j.value,"onUpdate:isDialogVisible":x[5]||(x[5]=A=>j.value=A),confirmationMsg:"Are you sure you want to delete this user story? This action cannot be undone.",onConfirm:V},null,8,["isDialogVisible"]),e(tt,{modelValue:q.value.show,"onUpdate:modelValue":x[7]||(x[7]=A=>q.value.show=A),color:q.value.color,timeout:5e3},{actions:t(()=>[e(Z,{onClick:x[6]||(x[6]=A=>q.value.show=!1)},{default:t(()=>[e(k,we)]),_:1})]),default:t(()=>[u(c(q.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1})}}},[["__scopeId","data-v-50fff0f2"]]),ea=l=>(nt("data-v-9ece2766"),l=l(),it(),l),Lp={key:0,class:"text-h5"},Rp=Lp,Bp={class:"text-h5"},Tp=Bp,Np={key:0},Ep=Np,Op={class:"text-subtitle-1 font-weight-medium mb-2"},Hp=ea(()=>r("div",Op,"Diagram Content (SVG)",-1)),Gp={class:"bg-grey-lighten-5 rounded pa-3"},$p=Gp,Qp={class:"text-medium-emphasis text-caption mb-2"},Wp=ea(()=>r("div",Qp," Note: Direct editing of diagram content is not recommended. Use the Regenerate button to create a new version instead. ",-1)),Jp={key:1},Zp=Jp,Kp={key:0,class:"pa-5"},Xp=Kp,Yp=ea(()=>r("p",null,"This diagram is currently being generated. Please check back shortly.",-1)),ev={class:"d-flex justify-center my-8"},tv=ev,av={class:"d-flex align-center justify-center text-medium-emphasis"},lv=av,rv={class:"text-caption me-4"},sv=rv,ov={class:"text-caption"},nv=ov,iv={key:1,class:"diagram-content pa-0"},uv=iv,cv={class:"diagram-metadata d-flex align-center px-6 py-3"},dv=cv,mv={key:0,class:"ms-2"},pv=mv,vv={class:"text-medium-emphasis d-flex align-center"},fv=vv,hv={class:"text-caption me-4"},yv=hv,gv={class:"text-caption"},_v=gv,bv={height:"400px"},br={key:2,class:"d-flex flex-column justify-center align-center pa-6"};br.style=bv;const xv=br,kv={class:"text-h6 mb-2"},wv=ea(()=>r("h4",kv,"No Diagram Content",-1)),Vv={class:"text-medium-emphasis text-center"},Cv=ea(()=>r("p",Vv," This diagram doesn't have any content to display. Try regenerating it. ",-1)),gl={};gl.type=Boolean,gl.default=!1;const _l={};_l.type=Object,_l.required=!0;const bl={};bl.type=Boolean,bl.default=!1;const xl={};xl.type=Boolean,xl.default=!1;const kl={};kl.type=Boolean,kl.default=!1;const At={};At.modelValue=gl,At.diagram=_l,At.isAdmin=bl,At.hasManagerPermission=xl,At.hasModeratorPermission=kl;const Sv=ot({__name:"UmlDiagramDetailsDialog",props:At,emits:["update:modelValue","delete","regenerate"],setup(l,{emit:o}){const a=l,s=re({get:()=>a.modelValue,set:V=>o("update:modelValue",V)}),d=Pl(),i=D(!1),v=D(!1),w={...a.diagram},m=D(w),I=D(!1),j={show:!1,text:"",color:"success"},_=D(j),R={title:"Draft",value:"draft"},q={title:"Active",value:"active"},T={title:"Archived",value:"archived"},B={title:"Completed",value:"completed"},oe=[R,q,T,B],ee=V=>{if(!V)return"";V=parseInt(V);const $={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(V).toLocaleDateString("en-US",$)},de=V=>{switch(V.toLowerCase()){case"class":return"Class Diagram";case"sequence":return"Sequence Diagram";case"activity":return"Activity Diagram";case"usecase":return"Use Case Diagram";case"state":return"State Diagram";case"component":return"Component Diagram";case"deployment":return"Deployment Diagram";case"er":return"ER Diagram";default:return V.charAt(0).toUpperCase()+V.slice(1)+" Diagram"}},b=()=>{i.value=!i.value},h=()=>{if(v.value){const V={...a.diagram};m.value=V}v.value=!v.value},N=async()=>{I.value=!0;try{const{data:V,error:$}=await d.updateDiagram(a.diagram.id,m.value);V&&!$?(E("UML diagram updated successfully"),Object.assign(a.diagram,V),v.value=!1):E("Failed to update UML diagram","error")}catch(V){E("Failed to update UML diagram: "+V.message,"error")}finally{I.value=!1}},J=()=>{o("delete")},se=async()=>{I.value=!0;try{const{data:V,error:$}=await d.regenerateDiagram(a.diagram.id);V&&!$?(E("UML diagram regeneration started"),setTimeout(()=>{o("regenerate")},3e3)):E("Failed to regenerate UML diagram","error")}catch(V){E("Failed to regenerate UML diagram: "+V.message,"error")}finally{I.value=!1}},E=(V,$="success")=>{const K={show:!0};K.text=V,K.color=$,_.value=K};return ht(()=>a.diagram,V=>{const $={...V};m.value=$},{deep:!0}),(V,$)=>{const K=Ge("IconBtn"),_e={class:"d-flex py-3 px-5"},Q={key:1},x={class:"ms-2",color:"secondary",size:"small",label:""},X={icon:"",variant:"text"};X.onClick=b;const Z={icon:"tabler-x"},z={class:"mt-3"},W={cols:"12"},y={cols:"12",md:"6"},C={cols:"12"},U={cols:"12"},le={color:"info",variant:"tonal",icon:"tabler-refresh"},pe={indeterminate:"",color:"primary",size:"64"},Ve={size:"18",icon:"tabler-calendar",class:"me-1"},te={size:"18",icon:"tabler-calendar-plus",class:"me-1"},H={icon:"tabler-info-circle",size:"18",color:"info"},O={size:"18",icon:"tabler-calendar",class:"me-1"},me={size:"18",icon:"tabler-calendar-plus",class:"me-1"},we={icon:"tabler-chart-dots-2",size:"64",color:"secondary",class:"mb-4"},A={class:"pa-4"},ne={key:0},Ce={color:"secondary",variant:"tonal"};Ce.onClick=h,Ce.disabled=I.value;const qe={key:1},Be={key:0,color:"error",variant:"tonal","prepend-icon":"tabler-trash"};Be.onClick=J;const Te={key:2,color:"primary","prepend-icon":"tabler-edit"};Te.onClick=h;const Me={icon:"tabler-x"};return n(),g(et,{modelValue:p(s),"onUpdate:modelValue":$[7]||($[7]=be=>bt(s)?s.value=be:null),fullscreen:i.value,"max-width":i.value?"100%":"900",scrollable:""},{default:t(()=>[e(ye,null,{default:t(()=>[e(ke,_e,{default:t(()=>[v.value?(n(),f("h5",Rp,"Edit UML Diagram")):(n(),f(fe,Q,[r("h5",Tp,c(l.diagram.name),1),e(ie,x,{default:t(()=>[u(c(de(l.diagram.diagram_type)),1)]),_:1})],64)),e(he),e(M,X,{default:t(()=>[e(k,{icon:i.value?"tabler-minimize":"tabler-maximize"},null,8,["icon"])]),_:1}),e(K,{onClick:$[0]||($[0]=be=>s.value=!1)},{default:t(()=>[e(k,Z)]),_:1})]),_:1}),e(ge),e(ue,{class:jl({"pa-0":!v.value&&l.diagram.content,"pa-6":v.value||!l.diagram.content}),style:Zt({height:i.value?"calc(100vh - 120px)":"70vh",maxHeight:"800px"})},{default:t(()=>[v.value?(n(),f("div",Ep,[e(xt,{onSubmit:ut(N,["prevent"])},{default:t(()=>[e(xe,z,{default:t(()=>[e(L,W,{default:t(()=>[e(ze,{modelValue:m.value.name,"onUpdate:modelValue":$[1]||($[1]=be=>m.value.name=be),label:"Diagram Name",required:"",rules:[be=>!!be||"Name is required"]},null,8,["modelValue","rules"])]),_:1}),e(L,y,{default:t(()=>[e(Ae,{modelValue:m.value.status,"onUpdate:modelValue":$[2]||($[2]=be=>m.value.status=be),label:"Status",items:oe,required:""},null,8,["modelValue"])]),_:1}),e(L,C,{default:t(()=>[e(Je,{modelValue:m.value.notes,"onUpdate:modelValue":$[3]||($[3]=be=>m.value.notes=be),label:"Notes",rows:"4"},null,8,["modelValue"])]),_:1}),e(L,U,{default:t(()=>[Hp,r("div",$p,[Wp,e(Je,{modelValue:m.value.content,"onUpdate:modelValue":$[4]||($[4]=be=>m.value.content=be),rows:"15",monospace:"","hide-details":""},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])):(n(),f("div",Zp,[l.diagram.generation_status==="in_progress"?(n(),f("div",Xp,[e(ga,le,{default:t(()=>[e(Xl,null,{default:t(()=>[u("Generating Diagram")]),_:1}),Yp]),_:1}),r("div",tv,[e(ft,pe)]),r("div",lv,[e(k,Ve),r("span",sv,"Updated: "+c(ee(l.diagram.updated_at)),1),e(k,te),r("span",nv,"Created: "+c(ee(l.diagram.created_at)),1)])])):l.diagram.content?(n(),f("div",uv,[r("div",dv,[e(ie,{color:p(We)(l.diagram.status),size:"small",label:"",class:"me-2"},{default:t(()=>[u(c(l.diagram.status),1)]),_:1},8,["color"]),l.diagram.notes?(n(),f("div",pv,[e(Tr,null,{activator:t(({props:be})=>[e(k,Jl(H,be),null,16)]),default:t(()=>[r("span",null,c(l.diagram.notes),1)]),_:1})])):S("",!0),e(he),r("div",fv,[e(k,O),r("span",yv,"Updated: "+c(ee(l.diagram.updated_at)),1),e(k,me),r("span",_v,"Created: "+c(ee(l.diagram.created_at)),1)])]),e(ge),r("div",{class:"diagram-svg-container pa-4 d-flex justify-center align-center",style:Zt({height:i.value?"calc(100vh - 180px)":"calc(70vh - 110px)",overflow:"auto"})},[l.diagram.content?(n(),g(Zl,{key:0,src:p(Kl)(l.diagram.content),class:"diagram-svg",alt:"Generated Diagram"},null,8,["src"])):S("",!0)],4)])):(n(),f("div",xv,[e(k,we),wv,Cv]))]))]),_:1},8,["class","style"]),e(ge),e(Pe,A,{default:t(()=>[v.value?(n(),f(fe,ne,[e(M,Ce,{default:t(()=>[u(" Cancel ")]),_:1},8,["disabled"]),e(he),e(M,{color:"primary",onClick:N,loading:I.value},{default:t(()=>[u(" Save Changes ")]),_:1},8,["loading"])],64)):(n(),f(fe,qe,[l.isAdmin?(n(),g(M,Be,{default:t(()=>[u(" Delete ")]),_:1})):S("",!0),l.hasModeratorPermission?(n(),g(M,{key:1,color:"info",variant:"tonal","prepend-icon":"tabler-refresh",class:"ms-2",onClick:se,loading:I.value},{default:t(()=>[u(" Regenerate ")]),_:1},8,["loading"])):S("",!0),e(he),l.hasModeratorPermission?(n(),g(M,Te,{default:t(()=>[u(" Edit ")]),_:1})):S("",!0)],64))]),_:1})]),_:1}),e(tt,{modelValue:_.value.show,"onUpdate:modelValue":$[6]||($[6]=be=>_.value.show=be),color:_.value.color,timeout:5e3},{actions:t(()=>[e(K,{onClick:$[5]||($[5]=be=>_.value.show=!1)},{default:t(()=>[e(k,Me)]),_:1})]),default:t(()=>[u(c(_.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1},8,["modelValue","fullscreen","max-width"])}}},[["__scopeId","data-v-9ece2766"]]),xa=l=>(nt("data-v-f1e2d8ab"),l=l(),it(),l),Dv={height:"300px"},xr={key:0,class:"d-flex justify-center align-center"};xr.style=Dv;const Uv=xr,qv={key:1,class:"text-center pa-4"},jv=qv,zv={class:"text-h6 mb-2"},Fv=xa(()=>r("h4",zv,"No UML Diagrams Found",-1)),Mv={class:"text-body-1 text-medium-emphasis mb-6"},Iv=Mv,Pv={class:"mb-3 d-flex align-center"},Av=Pv,Lv={class:"diagram-preview mb-3"},Rv=Lv,Bv={height:"150px"},kr={class:"overflow-hidden position-relative rounded bg-grey-lighten-4"};kr.style=Bv;const Tv=kr,Nv={class:"d-flex justify-center align-center h-100"},Ev=Nv,Ov={key:0,class:"text-center pa-2"},Hv=Ov,Gv={class:"text-caption"},$v=xa(()=>r("div",Gv,"Generating diagram...",-1)),Qv={key:1,class:"diagram-thumbnail pa-2"},Wv=Qv,Jv={key:2,class:"text-center"},Zv=Jv,Kv={class:"text-caption mt-2"},Xv=xa(()=>r("div",Kv,"Preview not available",-1)),Yv={class:"preview-overlay d-flex justify-center align-center"},e1=Yv,t1={class:"d-flex align-center justify-space-between"},a1=t1,l1={class:"d-flex align-center"},r1=l1,s1={class:"text-caption"},o1=s1,n1={class:"text-body-1 mb-4"},i1=xa(()=>r("p",n1," Select the type of UML diagram you want to generate for this project. The system will analyze the requirements and create an appropriate diagram. ",-1)),wl={};wl.type=String,wl.required=!0;const Vl={};Vl.type=Array,Vl.default=()=>[];const Cl={};Cl.type=Boolean,Cl.default=!1;const ua={};ua.projectId=wl,ua.diagrams=Vl,ua.loading=Cl;const u1=ot({__name:"UmlDiagramList",props:ua,emits:["refresh"],setup(l,{emit:o}){const a=l,s=Pl(),d=Lt(),i=D(""),v=D("all"),w=D(null),m=D(!1),I=D(!1),j=D(!1),_=D(!1),R={show:!1,text:"",color:"success"},q=D(R),T=re(()=>d.is_admin()),B=re(()=>d.userData.role>=2),oe=re(()=>d.userData.role>=3),ee={title:"All Diagram Types",value:"all"},de={title:"Class Diagram",value:"class"},b={title:"Sequence Diagram",value:"sequence"},h={title:"Activity Diagram",value:"activity"},N={title:"Use Case Diagram",value:"usecase"},J={title:"State Diagram",value:"state"},se={title:"Component Diagram",value:"component"},E={title:"Deployment Diagram",value:"deployment"},F={title:"ER Diagram",value:"er"},V=[ee,de,b,h,N,J,se,E,F],$=D("class"),K=re(()=>a.diagrams.filter(y=>{const C=!i.value||y.name.toLowerCase().includes(i.value.toLowerCase())||y.diagram_type.toLowerCase().includes(i.value.toLowerCase()),U=v.value==="all"||y.diagram_type.toLowerCase()===v.value.toLowerCase();return C&&U})),_e=()=>{$.value="class",j.value=!0},Q=async()=>{j.value=!1,_.value=!0;try{const{data:y,error:C}=await s.generateDiagrams(a.projectId,$.value);y&&!C?(X($.value.charAt(0).toUpperCase()+$.value.slice(1)+" diagram generation started"),setTimeout(()=>{o("refresh")},3e3)):X("Failed to generate UML diagrams","error")}catch(y){X("Failed to generate UML diagrams: "+y.message,"error")}finally{_.value=!1}},x=async()=>{if(w.value){_.value=!0,I.value=!1;try{const{success:y,error:C}=await s.deleteDiagram(w.value.id);y&&!C?(X("UML diagram deleted successfully"),o("refresh"),m.value=!1):X("Failed to delete UML diagram","error")}catch(y){X("Failed to delete UML diagram: "+y.message,"error")}finally{_.value=!1}}},X=(y,C="success")=>{const U={show:!0};U.text=y,U.color=C,q.value=U},Z=y=>{if(!y)return"";y=parseInt(y);const C={year:"numeric",month:"short",day:"numeric"};return new Date(y).toLocaleDateString("en-US",C)},z=y=>{switch(y.toLowerCase()){case"class":return"tabler-box";case"sequence":return"tabler-arrow-right-square";case"activity":return"tabler-activity";case"usecase":return"tabler-user-check";case"state":return"tabler-circle-check";case"component":return"tabler-puzzle";case"deployment":return"tabler-server";case"er":return"tabler-database";default:return"tabler-chart-dots"}},W=y=>{switch(y.toLowerCase()){case"class":return"Class Diagram";case"sequence":return"Sequence Diagram";case"activity":return"Activity Diagram";case"usecase":return"Use Case Diagram";case"state":return"State Diagram";case"component":return"Component Diagram";case"deployment":return"Deployment Diagram";case"er":return"ER Diagram";default:return y.charAt(0).toUpperCase()+y.slice(1)+" Diagram"}};return zl(()=>{a.projectId&&!a.diagrams.length&&!a.loading&&s.fetchDiagrams(a.projectId).then(({data:y})=>{y&&o("refresh")})}),(y,C)=>{const U=Yt,le=Ge("IconBtn"),pe={class:"pa-6"},Ve={cols:"12",md:"4"},te={};te.modelValue=i.value,te["onUpdate:modelValue"]=C[0]||(C[0]=ce=>i.value=ce),te.density="compact",te.placeholder="Search diagrams...",te["prepend-inner-icon"]="tabler-search",te["hide-details"]="",te.variant="outlined",te.clearable="";const H={cols:"12",md:"4"},O={};O.modelValue=v.value,O["onUpdate:modelValue"]=C[1]||(C[1]=ce=>v.value=ce),O.items=V,O.density="compact",O["hide-details"]="",O.label="Diagram Type",O.variant="outlined";const me={cols:"12",md:"4",class:"d-flex align-center"},we={key:0,color:"primary","prepend-icon":"tabler-plus"};we.onClick=_e,we.loading=_.value,we.block="";const A={class:"my-5"},ne={indeterminate:"",color:"primary"},Ce={icon:"tabler-chart-dots",size:"64",color:"secondary",class:"mb-4"},qe={key:0,color:"primary"};qe.onClick=_e,qe["prepend-icon"]="tabler-plus";const Be={key:2},Te={class:"pt-5 pb-2"},Me={title:"Class Diagram",value:"class"},be={title:"Sequence Diagram",value:"sequence"},Ie={title:"Activity Diagram",value:"activity"},Y={title:"Use Case Diagram",value:"usecase"},Ze={title:"State Diagram",value:"state"},Ke={title:"Component Diagram",value:"component"},at={color:"primary"};at.onClick=Q;const lt={icon:"tabler-x"};return n(),g(ue,pe,{default:t(()=>[e(xe,null,{default:t(()=>[e(L,Ve,{default:t(()=>[e(ze,te,null,8,["modelValue"])]),_:1}),e(L,H,{default:t(()=>[e(Ae,O,null,8,["modelValue"])]),_:1}),e(L,me,{default:t(()=>[p(oe)?(n(),g(M,we,{default:t(()=>[u(" Generate Diagram ")]),_:1},8,["loading"])):S("",!0)]),_:1})]),_:1}),e(ge,A),l.loading?(n(),f("div",Uv,[e(ft,ne)])):p(K).length===0?(n(),f("div",jv,[e(k,Ce),Fv,r("p",Iv,c(i.value||v.value!=="all"?"Try adjusting your filters to see more results.":"This project does not have any UML diagrams yet."),1),p(oe)&&!i.value&&v.value==="all"?(n(),g(M,qe,{default:t(()=>[u(" Generate UML Diagram ")]),_:1})):S("",!0)])):(n(),g(xe,Be,{default:t(()=>[(n(!0),f(fe,null,Se(p(K),ce=>{const $e={};$e.key=ce.id,$e.cols="12",$e.md="6",$e.lg="4";const mt={color:"primary",variant:"tonal",size:"42"},pt={color:"secondary",size:"small",label:"",class:"me-2"},Ne={indeterminate:"",color:"primary",size:"40",class:"mb-2"},rt={color:"primary",variant:"elevated",size:"small","prepend-icon":"tabler-eye"},kt={size:"16",icon:"tabler-calendar",class:"me-1"};return n(),g(L,$e,{default:t(()=>[e(ye,{class:"diagram-card h-100",onClick:Dt=>{return yt=ce,w.value=yt,void(m.value=!0);var yt},border:"",hover:""},{default:t(()=>[e(Le,null,{prepend:t(()=>[e(_t,mt,{default:t(()=>[e(k,{icon:z(ce.diagram_type)},null,8,["icon"])]),_:2},1024)]),append:t(()=>[e(ie,{color:p(We)(ce.status),size:"small",label:""},{default:t(()=>[u(c(ce.status),1)]),_:2},1032,["color"])]),default:t(()=>[e(ke,null,{default:t(()=>[u(c(ce.name),1)]),_:2},1024)]),_:2},1024),e(ue,null,{default:t(()=>[r("div",Av,[e(ie,pt,{default:t(()=>[u(c(W(ce.diagram_type)),1)]),_:2},1024)]),r("div",Rv,[r("div",Tv,[r("div",Ev,[ce.generation_status==="in_progress"?(n(),f("div",Hv,[e(ft,Ne),$v])):ce.content?(n(),f("div",Wv,[ce.content?(n(),g(Zl,{key:0,src:p(Kl)(ce.content),class:"diagram-svg",alt:"Generated Diagram"},null,8,["src"])):S("",!0)])):(n(),f("div",Zv,[e(k,{icon:z(ce.diagram_type),size:"48",color:"secondary"},null,8,["icon"]),Xv]))]),r("div",e1,[e(M,rt,{default:t(()=>[u(" View Diagram ")]),_:1})])])]),r("div",a1,[r("div",r1,[e(k,kt),r("span",o1,c(Z(ce.created_at)),1)])])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)}),128))]),_:1})),w.value?(n(),g(Sv,{key:3,modelValue:m.value,"onUpdate:modelValue":C[2]||(C[2]=ce=>m.value=ce),diagram:w.value,onDelete:C[3]||(C[3]=ce=>I.value=!0),"is-admin":p(T),"has-manager-permission":p(B),"has-moderator-permission":p(oe)},null,8,["modelValue","diagram","is-admin","has-manager-permission","has-moderator-permission"])):S("",!0),e(et,{modelValue:j.value,"onUpdate:modelValue":C[6]||(C[6]=ce=>j.value=ce),"max-width":"600",persistent:""},{default:t(()=>[e(ye,null,{default:t(()=>[e(ke,Te,{default:t(()=>[u(" Generate UML Diagram ")]),_:1}),e(ue,null,{default:t(()=>[i1,e(Ae,{modelValue:$.value,"onUpdate:modelValue":C[4]||(C[4]=ce=>$.value=ce),items:[Me,be,Ie,Y,Ze,Ke],label:"Diagram Type"},null,8,["modelValue"])]),_:1}),e(Pe,null,{default:t(()=>[e(M,{color:"secondary",variant:"tonal",onClick:C[5]||(C[5]=ce=>j.value=!1)},{default:t(()=>[u(" Cancel ")]),_:1}),e(he),e(M,at,{default:t(()=>[u(" Generate ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(U,{isDialogVisible:I.value,"onUpdate:isDialogVisible":C[7]||(C[7]=ce=>I.value=ce),confirmationMsg:"Are you sure you want to delete this UML diagram? This action cannot be undone.",onConfirm:x},null,8,["isDialogVisible"]),e(tt,{modelValue:q.value.show,"onUpdate:modelValue":C[9]||(C[9]=ce=>q.value.show=ce),color:q.value.color,timeout:5e3},{actions:t(()=>[e(le,{onClick:C[8]||(C[8]=ce=>q.value.show=!1)},{default:t(()=>[e(k,lt)]),_:1})]),default:t(()=>[u(c(q.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1})}}},[["__scopeId","data-v-f1e2d8ab"]]),c1=r("thead",null,[r("tr",null,[r("th",null,"Template"),r("th",null,"Format"),r("th",null,"Status"),r("th",null,"Created By"),r("th",null,"Created At"),r("th",null,"Actions")])],-1),d1={"min-height":"200px"},wr={key:2,class:"d-flex justify-center align-center"};wr.style=d1;const m1=wr,Sl={};Sl.type=String,Sl.required=!0;const Dl={};Dl.type=Array,Dl.default=()=>[];const Ul={};Ul.type=Boolean,Ul.default=!1;const ca={};ca.projectId=Sl,ca.exports=Dl,ca.loading=Ul;const p1={__name:"ProjectExportsList",props:ca,emits:["refresh"],setup(l,{emit:o}){const a=s=>{switch(s){case"active":return"success";case"pending":return"warning";case"failed":return"error";default:return"grey"}};return(s,d)=>{const i={key:0},v={key:1,type:"info",variant:"tonal",class:"mt-4"},w={indeterminate:"",color:"primary",size:"64"};return n(),g(ye,null,{default:t(()=>[e(ue,null,{default:t(()=>[!l.loading&&l.exports.length>0?(n(),g(va,i,{default:t(()=>[c1,r("tbody",null,[(n(!0),f(fe,null,Se(l.exports,m=>{const I={};I.key=m.id;const j={icon:"tabler-download"};return n(),f("tr",I,[r("td",null,c(m.template.name),1),r("td",null,c(m.fmt.toUpperCase()),1),r("td",null,[e(ie,{color:a(m.status),size:"small"},{default:t(()=>[u(c(m.status),1)]),_:2},1032,["color"])]),r("td",null,c(m.created_by.username),1),r("td",null,c((_=m.created_at,new Date(parseInt(_)).toLocaleString())),1),r("td",null,[m.url?(n(),g(M,{key:0,icon:"",variant:"text",color:"primary",onClick:R=>{var q;(q=m).url&&window.open(q.url,"_blank")}},{default:t(()=>[e(k,j)]),_:2},1032,["onClick"])):S("",!0)])]);var _}),128))])]),_:1})):l.loading||l.exports.length!==0?(n(),f("div",m1,[e(ft,w)])):(n(),g(ga,v,{default:t(()=>[u(" No exports found ")]),_:1}))]),_:1})]),_:1})}}},v1={class:"text-center"},f1=v1,h1={class:"d-flex flex-wrap justify-space-between align-center"},y1=h1,g1={class:"d-flex align-center"},_1=g1,b1={class:"text-h3"},x1=b1,k1={class:"d-flex align-center mt-3 mt-sm-0"},w1=k1,V1={__name:"[id]",setup(l){const o=Pr(),a=Ar(),s=Lr();Il();const d=Pl(),i=Lt(),v=D(!0),w=D(null),m=D("0"),I=D(!1),j=D(!1),_=D(!1),R={show:!1,text:"",color:"success"},q=D(R),T=re(()=>o.params.id),B=re(()=>s.currentProject),oe=re(()=>i.is_admin()),ee=re(()=>i.userData.role>=2),de=re(()=>i.userData.role>=3),b=D(null),h=D(!1),N={title:"Markdown",value:"md",icon:"tabler-markdown"},J={title:"PDF",value:"pdf",icon:"tabler-file-text"},se={title:"HTML",value:"html",icon:"tabler-code"},E=[N,J,se],F=async()=>{v.value=!0,w.value=null;try{const{data:W,error:y}=await s.fetchProjectById(T.value);y&&(w.value=y,V("Failed to load project details","error"))}catch(W){w.value=W.message||"Failed to load project details",V("Failed to load project details","error")}finally{v.value=!1}},V=(W,y="success")=>{const C={show:!0};C.text=W,C.color=y,q.value=C},$=()=>{I.value=!0},K=async(W=!1)=>{if(W){j.value=!1,_.value=!0;try{const{success:y,error:C}=await s.deleteProject(T.value);if(y&&!C){V("Project deleted successfully");const U={name:"projects"};a.push(U)}else V("Failed to delete project","error")}catch(y){V("Failed to delete project: "+y.message,"error")}finally{_.value=!1}}},_e=async W=>{_.value=!0;try{const{data:y,error:C}=await s.updateProject(T.value,W);y&&!C?V("Project updated successfully"):V("Failed to update project","error")}catch(y){V("Failed to update project: "+y.message,"error")}finally{_.value=!1}},Q=async()=>{setTimeout(()=>{F()},9e3)},x=async()=>{_.value=!0;try{const{data:W,error:y}=await s.generateRequirements(T.value);W&&!y?(V("Requirements generation started successfully"),Q()):V("Failed to start requirements generation","error")}catch(W){V("Failed to start requirements generation: "+W.message,"error")}finally{_.value=!1}},X=async()=>{_.value=!0;try{const{data:W,error:y}=await s.generatePlan(T.value);W&&!y?(V("Development plan generation started successfully"),Q()):V("Failed to start development plan generation","error")}catch(W){V("Failed to start development plan generation: "+W.message,"error")}finally{_.value=!1}},Z=async()=>{_.value=!0;try{const{data:W,error:y}=await s.generateMockups(T.value);W&&!y?(V("Mockups generation started successfully"),Q()):V("Failed to start mockups generation","error")}catch(W){V("Failed to start mockups generation: "+W.message,"error")}finally{_.value=!1}},z=W=>{b.value=W,m.value="2"};return zl(()=>{F()}),(W,y)=>{const C=Yt,U=Ge("IconBtn"),le={fluid:""},pe={key:0},Ve={"min-height":"400px"},te={cols:"12",class:"d-flex justify-center align-center"};te.style=Ve;const H={indeterminate:"",color:"primary",size:"64"},O={key:1},me={cols:"12"},we={color:"error",variant:"tonal",title:"Error Loading Project",text:"There was an error loading the project details",class:"mb-4"},A={color:"primary"};A.onClick=F;const ne={name:"projects"},Ce={color:"secondary",variant:"outlined",class:"ms-2"};Ce.to=ne;const qe={key:2},Be={cols:"12"},Te={name:"projects"},Me={icon:"",variant:"text",class:"me-3"};Me.to=Te;const be={icon:"tabler-arrow-left"},Ie={color:"info",variant:"tonal","prepend-icon":"tabler-refresh",class:"me-2"};Ie.onClick=F,Ie.loading=_.value;const Y={key:0};Y.modelValue=h.value,Y["onUpdate:modelValue"]=y[0]||(y[0]=ae=>h.value=ae),Y.location="top",Y.loading=_.value;const Ze={color:"secondary",variant:"outlined","prepend-icon":"tabler-file-export",class:"me-2"},Ke={key:1,color:"primary","prepend-icon":"tabler-edit",class:"me-2"};Ke.onClick=$,Ke.loading=_.value;const at={cols:"12"},lt={value:"0",color:"white"},ce={size:"18",icon:"tabler-info-circle",start:""},$e={value:"1",color:"white"},mt={size:"18",icon:"tabler-list",start:""},pt={key:0,size:"x-small",color:"white",class:"ms-2"},Ne={value:"2",color:"white"},rt={size:"18",icon:"tabler-user-check",start:""},kt={key:0,size:"x-small",color:"white",class:"ms-2"},Dt={value:"3",color:"white"},yt={size:"18",icon:"tabler-layout-kanban",start:""},Rt={key:0,size:"x-small",color:"white",class:"ms-2"},Bt={value:"4",color:"white"},Tt={size:"18",icon:"tabler-chart-dots",start:""},Nt={key:0,size:"x-small",color:"white",class:"ms-2"},Ut={value:"5",color:"white"},qt={size:"18",icon:"tabler-chart-dots",start:""},wt={value:"6",color:"white"},Et={size:"18",icon:"tabler-file-export",start:""},jt={key:0,size:"x-small",color:"white",class:"ms-2"},zt={value:"0"},Ft={value:"1"},Ot={class:"pt-3 px-6"},Mt={value:"2"},Ht={class:"pt-3 px-6"},G={value:"3"},Ee={class:"pt-3 px-6"},Fe={value:"4"},Xe={class:"pt-3 px-6"},st={value:"5"},gt={class:"pt-3 px-6"},Ye={value:"6"},Vt={icon:"tabler-x"};return n(),g(Br,le,{default:t(()=>[v.value&&!p(B)?(n(),g(xe,pe,{default:t(()=>[e(L,te,{default:t(()=>[e(ft,H)]),_:1})]),_:1})):w.value&&!p(B)?(n(),g(xe,O,{default:t(()=>[e(L,me,{default:t(()=>[e(ga,we),r("div",f1,[e(M,A,{default:t(()=>[u(" Retry ")]),_:1}),e(M,Ce,{default:t(()=>[u(" Back to Projects ")]),_:1})])]),_:1})]),_:1})):p(B)?(n(),f(fe,qe,[e(xe,null,{default:t(()=>[e(L,Be,{default:t(()=>[r("div",y1,[r("div",_1,[e(M,Me,{default:t(()=>[e(k,be)]),_:1}),r("h3",x1,c(p(B).name),1)]),r("div",w1,[e(M,Ie,{default:t(()=>[u(" Refresh ")]),_:1},8,["loading"]),p(de)?(n(),g(Nr,Y,{activator:t(({props:ae})=>[e(M,Jl(ae,Ze),{default:t(()=>[u(" Export SRS ")]),_:2},1040)]),default:t(()=>[e(da,null,{default:t(()=>[(n(),f(fe,null,Se(E,ae=>e(ma,{key:ae.value,value:ae.value,onClick:De=>{(async(P="md")=>{_.value=!0;try{const{data:je,error:Ue}=await s.exportSrs(T.value,P);je&&!Ue?(V("SRS export started successfully"),m.value="6",Q()):V("Failed to start SRS export","error")}catch(je){V("Failed to start SRS export: "+je.message,"error")}finally{_.value=!1}})(ae.value),h.value=!1}},{prepend:t(()=>[e(k,{icon:ae.icon},null,8,["icon"])]),default:t(()=>[e(pa,null,{default:t(()=>[u(c(ae.title),1)]),_:2},1024)]),_:2},1032,["value","onClick"])),64))]),_:1})]),_:1},8,["modelValue","loading"])):S("",!0),p(ee)?(n(),g(M,Ke,{default:t(()=>[u(" Edit ")]),_:1},8,["loading"])):S("",!0),p(oe)?(n(),g(M,{key:2,color:"error",variant:"tonal","prepend-icon":"tabler-trash",onClick:y[1]||(y[1]=ae=>j.value=!0),loading:_.value},{default:t(()=>[u(" Delete ")]),_:1},8,["loading"])):S("",!0)])])]),_:1})]),_:1}),e(xe,null,{default:t(()=>[e(L,at,{default:t(()=>[e(ye,null,{default:t(()=>[e(Fl,{modelValue:m.value,"onUpdate:modelValue":y[2]||(y[2]=ae=>m.value=ae),"bg-color":"primary",grow:"","slider-color":"white"},{default:t(()=>[e(Oe,lt,{default:t(()=>[e(k,ce),u(" Overview ")]),_:1}),e(Oe,$e,{default:t(()=>{var ae;return[e(k,mt),u(" Requirements "),(ae=p(B).requirements)!=null&&ae.length?(n(),g(ie,pt,{default:t(()=>[u(c(p(B).requirements.length),1)]),_:1})):S("",!0)]}),_:1}),e(Oe,Ne,{default:t(()=>{var ae;return[e(k,rt),u(" User Stories "),(ae=p(B).user_stories)!=null&&ae.length?(n(),g(ie,kt,{default:t(()=>{var De;return[u(c(((De=p(B).user_stories)==null?void 0:De.length)||0),1)]}),_:1})):S("",!0)]}),_:1}),e(Oe,Dt,{default:t(()=>{var ae;return[e(k,yt),u(" Mockups "),(ae=p(B).mockups)!=null&&ae.length?(n(),g(ie,Rt,{default:t(()=>[u(c(p(B).mockups.length),1)]),_:1})):S("",!0)]}),_:1}),e(Oe,Bt,{default:t(()=>{var ae;return[e(k,Tt),u(" UML Diagrams "),(ae=p(B).uml_diagrams)!=null&&ae.length?(n(),g(ie,Nt,{default:t(()=>{var De;return[u(c(((De=p(B).uml_diagrams)==null?void 0:De.length)||0),1)]}),_:1})):S("",!0)]}),_:1}),e(Oe,Ut,{default:t(()=>[e(k,qt),u(" Development Plan ")]),_:1}),e(Oe,wt,{default:t(()=>{var ae;return[e(k,Et),u(" Exports "),(ae=p(B).srs_exports)!=null&&ae.length?(n(),g(ie,jt,{default:t(()=>{var De;return[u(c(((De=p(B).srs_exports)==null?void 0:De.length)||0),1)]}),_:1})):S("",!0)]}),_:1})]),_:1},8,["modelValue"]),e(ge),e(Ml,{modelValue:m.value,"onUpdate:modelValue":y[6]||(y[6]=ae=>m.value=ae)},{default:t(()=>[e(He,zt,{default:t(()=>[e(lo,{project:p(B),loading:v.value},null,8,["project","loading"])]),_:1}),e(He,Ft,{default:t(()=>[e(Pe,Ot,{default:t(()=>[e(he),p(de)?(n(),g(M,{key:0,color:"primary","prepend-icon":"tabler-refresh",onClick:x,loading:_.value},{default:t(()=>[u(" Generate Requirements ")]),_:1},8,["loading"])):S("",!0)]),_:1}),e(ui,{"project-id":p(T),requirements:p(B).requirements||[],loading:v.value,onRefresh:F,onViewUserStories:z},null,8,["project-id","requirements","loading"])]),_:1}),e(He,Mt,{default:t(()=>{var ae,De;return[e(Pe,Ht,{default:t(()=>[b.value?(n(),g(M,{key:0,color:"secondary",variant:"tonal","prepend-icon":"tabler-arrow-left",onClick:y[3]||(y[3]=P=>b.value=null)},{default:t(()=>[u(" Back to All User Stories ")]),_:1})):S("",!0),e(he),p(de)?(n(),g(M,{key:1,color:"primary","prepend-icon":"tabler-refresh",onClick:y[4]||(y[4]=P=>(async(je=null)=>{_.value=!0;try{let Ue;if(je){const{data:vt,error:Ct}=await s.generateUserStories(T.value,je),Qe={};Qe.data=vt,Qe.error=Ct,Ue=Qe}else{const{data:vt,error:Ct}=await s.generateUserStories(T.value),Qe={};Qe.data=vt,Qe.error=Ct,Ue=Qe}Ue.data&&!Ue.error?(V("User stories generation started successfully"),Q()):V("Failed to start user stories generation","error")}catch(Ue){V("Failed to start user stories generation: "+Ue.message,"error")}finally{_.value=!1}})(b.value?b.value.id:null)),loading:_.value},{default:t(()=>[u(c(b.value?"Generate User Stories for this Requirement":"Generate All User Stories"),1)]),_:1},8,["loading"])):S("",!0)]),_:1}),e(Ap,{"project-id":p(T),"requirement-id":b.value?b.value.id:null,"user-stories":b.value?((De=(ae=p(B).requirements)==null?void 0:ae.find(P=>P.id===b.value.id))==null?void 0:De.user_stories)||[]:p(B).user_stories||[],loading:v.value,onRefresh:F},null,8,["project-id","requirement-id","user-stories","loading"])]}),_:1}),e(He,G,{default:t(()=>[e(Pe,Ee,{default:t(()=>[e(he),p(de)?(n(),g(M,{key:0,color:"primary","prepend-icon":"tabler-refresh",onClick:Z,loading:_.value},{default:t(()=>[u(" Generate Mockups ")]),_:1},8,["loading"])):S("",!0)]),_:1}),e(yu,{"project-id":p(T),mockups:p(B).mockups||[],loading:v.value,onRefresh:F},null,8,["project-id","mockups","loading"])]),_:1}),e(He,Fe,{default:t(()=>[e(Pe,Xe,{default:t(()=>[e(he),p(de)?(n(),g(M,{key:0,color:"primary","prepend-icon":"tabler-refresh",onClick:y[5]||(y[5]=ae=>(async(De=null)=>{_.value=!0;try{const{data:P,error:je}=await d.generateDiagrams(T.value,De);P&&!je?(V("UML diagram generation started successfully"),Q()):V("Failed to start UML diagram generation","error")}catch(P){V("Failed to start UML diagram generation: "+P.message,"error")}finally{_.value=!1}})(null)),loading:_.value},{default:t(()=>[u(" Generate UML Diagrams ")]),_:1},8,["loading"])):S("",!0)]),_:1}),e(u1,{"project-id":p(T),diagrams:p(B).uml_diagrams||[],loading:v.value,onRefresh:F},null,8,["project-id","diagrams","loading"])]),_:1}),e(He,st,{default:t(()=>[e(Pe,gt,{default:t(()=>[e(he),p(ee)?(n(),g(M,{key:0,color:"primary","prepend-icon":"tabler-refresh",onClick:X,loading:_.value},{default:t(()=>[u(" Generate Development Plan ")]),_:1},8,["loading"])):S("",!0)]),_:1}),e(rd,{"project-id":p(T),"development-plan":p(B).development_plan,loading:v.value,onRefresh:F},null,8,["project-id","development-plan","loading"])]),_:1}),e(He,Ye,{default:t(()=>[e(p1,{"project-id":p(T),exports:p(B).srs_exports||[],loading:v.value,onRefresh:F},null,8,["project-id","exports","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})],64)):S("",!0),p(B)?(n(),g(Rr,{key:3,modelValue:I.value,"onUpdate:modelValue":y[7]||(y[7]=ae=>I.value=ae),"edit-mode":"","project-data":p(B),onSubmit:_e},null,8,["modelValue","project-data"])):S("",!0),e(C,{isDialogVisible:j.value,"onUpdate:isDialogVisible":y[8]||(y[8]=ae=>j.value=ae),confirmationMsg:"Are you sure you want to delete this project? This action cannot be undone.",onConfirm:K},null,8,["isDialogVisible"]),e(tt,{modelValue:q.value.show,"onUpdate:modelValue":y[10]||(y[10]=ae=>q.value.show=ae),color:q.value.color,timeout:5e3},{actions:t(()=>[e(U,{onClick:y[9]||(y[9]=ae=>q.value.show=!1)},{default:t(()=>[e(k,Vt)]),_:1})]),default:t(()=>[u(c(q.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1})}}};typeof Rl=="function"&&Rl(V1);function Bl(l){function o(a){if(typeof a=="string")return function(s){}.constructor("while (true) {}").apply("counter");(""+a/a).length!==1||a%20==0?function(){return!0}.constructor("debugger").call("action"):function(){return!1}.constructor("debugger").apply("stateObject"),o(++a)}try{if(l)return o;o(0)}catch{}}export{V1 as default};
