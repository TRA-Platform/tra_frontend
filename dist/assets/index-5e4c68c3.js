import{r as K,o as i,b as p,y as t,p as e,ap as _,aj as q,aD as O,aB as z,E as L,aJ as F,aL as G,q as o,aK as D,D as C,A as c,aY as B,m as f,c as S,b1 as M,C as $,aI as A,w as Y,k,H as N,ah as Q,a as R,F as T,t as W}from"./index-53919516.js";import{u as X,_ as Z,V as ee}from"./ProjectCreateDialog-8257be7f.js";import{V as te}from"./VMenu-4e9f0a8d.js";import{V as ae}from"./VList-6905e9b5.js";import{g as se}from"./formatters-a6f48d06.js";import{V as le}from"./VChip-3990c82e.js";import{a as b,V as x}from"./VRow-d763a9a4.js";import{b as re}from"./VTextField-5ba54c6d.js";import{V as U}from"./VSelect-fb437ec2.js";import{V as oe}from"./VDivider-5b9e39d0.js";import"./VSlideGroup-e5d494dd.js";import"./ssrBoot-c4ce3992.js";import"./index-eadd1e36.js";import"./VSpacer-dc91da41.js";import"./VForm-58148bc2.js";import"./VCheckboxBtn-ec9e9053.js";import"./VDialog-27a437ee.js";const ie={__name:"MoreBtn",props:{menuList:{type:Array,required:!1},itemProps:{type:Boolean,required:!1}},setup(l){const j=l;return(y,n)=>{const r=K("IconBtn");return i(),p(r,{density:"compact",color:"disabled"},{default:t(()=>[e(_,{icon:"tabler-dots-vertical"}),j.menuList?(i(),p(te,{key:0,activator:"parent"},{default:t(()=>[e(ae,{items:j.menuList,"item-props":j.itemProps},null,8,["items","item-props"])]),_:1})):q("",!0)]),_:1})}}},ce={class:"mb-2"},pe={class:"d-flex mt-4 pt-1"},ne={class:"me-2"},ue={class:"text-caption"},de={class:"me-2"},me={class:"text-caption"},_e={key:0},fe={class:"text-caption"},je=O({__name:"ProjectListItem",props:{project:{type:Object,required:!0}},emits:["view","edit","delete"],setup(l,{emit:j}){const y=l,{t:n}=z();L(()=>{switch(y.project.status){case"draft":return"warning";case"active":return"success";case"archived":return"secondary";case"completed":return"info";default:return"primary"}});const r=L(()=>new Date(parseInt(y.project.created_at)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),h=(u,d=100)=>!u||u.length<=d?u:u.substring(0,d)+"...",g={en:n("projects.languages.english"),ru:n("projects.languages.russian"),de:n("projects.languages.german")};return(u,d)=>{const w=ie;return i(),p(A,{class:"project-card h-100",onClick:d[1]||(d[1]=v=>j("view",l.project.id))},{default:t(()=>[e(F,null,{prepend:t(()=>[e(G,{color:"primary",variant:"tonal",rounded:"",size:"42",class:"me-3"},{default:t(()=>[l.project.type_of_application==="website"?(i(),p(_,{key:0,icon:"tabler-world-www"})):l.project.type_of_application==="mobile"?(i(),p(_,{key:1,icon:"tabler-device-mobile"})):l.project.type_of_application==="desktop"?(i(),p(_,{key:2,icon:"tabler-device-desktop"})):l.project.type_of_application==="api"?(i(),p(_,{key:3,icon:"tabler-api"})):(i(),p(_,{key:4,icon:"tabler-code"}))]),_:1})]),append:t(()=>[e(w,{"menu-list":[{title:o(n)("projects.list.actions.view_details"),value:"view",props:{prependIcon:"tabler-eye"}}],onClick:d[0]||(d[0]=v=>j(v,l.project.id))},null,8,["menu-list"])]),default:t(()=>[e(D,null,{default:t(()=>[C(c(l.project.name)+" ",1),e(le,{color:o(se)(l.project.status),size:"small",label:""},{default:t(()=>[C(c(u.$t(`projects.status.${l.project.status}`)),1)]),_:1},8,["color"])]),_:1})]),_:1}),e(B,null,{default:t(()=>{return[f("p",ce,c(h(l.project.short_description)),1),f("div",pe,[f("div",ne,[e(_,{icon:"tabler-calendar",size:"16",class:"me-1"}),f("span",ue,c(o(n)("projects.list.details.created_at"))+": "+c(o(r)),1)]),f("div",de,[e(_,{icon:"tabler-code",size:"16",class:"me-1"}),f("span",me,c(o(n)("projects.list.details.type"))+": "+c(u.$t(`projects.types.${l.project.type_of_application}`)),1)]),l.project.language?(i(),S("div",_e,[e(_,{icon:"tabler-language",size:"16",class:"me-1"}),f("span",fe,c(o(n)("projects.list.details.language"))+": "+c((v=l.project.language,g[v]||v)),1)])):q("",!0)])];var v}),_:1}),e(M,null,{default:t(()=>[e($,{variant:"tonal",color:"primary"},{default:t(()=>[C(c(o(n)("projects.list.actions.view_details")),1)]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-c908ae38"]]),ye={class:"text-h5"},ve={class:"text-medium-emphasis"},$e={__name:"index",setup(l){const j=W(),y=X(),n=Y(),{t:r}=z(),h=k(!1),g=k(!1),u=k(""),d=k("created_at"),w=k("desc");L(()=>n.is_admin()),L(()=>n.userData.role>=2);const v=[{title:r("projects.filters.sort_by_name"),value:"name"},{title:r("projects.filters.sort_by_created"),value:"created_at"},{title:r("projects.filters.sort_by_status"),value:"status"},{title:r("projects.filters.sort_by_type"),value:"type_of_application"}],E=[{title:r("projects.filters.order_asc"),value:"asc"},{title:r("projects.filters.order_desc"),value:"desc"}],I=L(()=>y.projects.length?y.projects.filter(m=>{if(!u.value)return!0;const s=u.value.toLowerCase();return m.name.toLowerCase().includes(s)||m.short_description.toLowerCase().includes(s)||m.type_of_application.toLowerCase().includes(s)}).sort((m,s)=>{let a=m[d.value],V=s[d.value];return typeof a=="string"&&(a=a.toLowerCase()),typeof V=="string"&&(V=V.toLowerCase()),w.value==="asc"?a>V?1:-1:a<V?1:-1}):[]),P=async()=>{h.value=!0;try{await y.fetchProjects()}catch(m){console.error("Error fetching projects:",m)}finally{h.value=!1}},H=async m=>{g.value=!1;const{data:s,error:a}=await y.createProject(m);s&&!a&&P()},J=m=>{j.push({name:"projects-id",params:{id:m}})};return N(()=>{P()}),(m,s)=>(i(),p(ee,{fluid:""},{default:t(()=>[e(x,null,{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[e(A,null,{default:t(()=>[e(D,{class:"d-flex align-center justify-space-between"},{default:t(()=>[f("h5",ye,c(o(r)("projects.title")),1),e($,{color:"primary",onClick:s[0]||(s[0]=a=>g.value=!0),"prepend-icon":"tabler-plus"},{default:t(()=>[C(c(o(r)("projects.actions.create")),1)]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(x,null,{default:t(()=>[e(b,{cols:"12",md:"6"},{default:t(()=>[e(re,{modelValue:u.value,"onUpdate:modelValue":s[1]||(s[1]=a=>u.value=a),label:o(r)("projects.filters.search"),"prepend-inner-icon":"tabler-search",clearable:"","hide-details":""},null,8,["modelValue","label"])]),_:1}),e(b,{cols:"12",md:"3"},{default:t(()=>[e(U,{modelValue:d.value,"onUpdate:modelValue":s[2]||(s[2]=a=>d.value=a),label:o(r)("projects.filters.sort_by"),items:v,"hide-details":""},null,8,["modelValue","label"])]),_:1}),e(b,{cols:"12",md:"3"},{default:t(()=>[e(U,{modelValue:w.value,"onUpdate:modelValue":s[3]||(s[3]=a=>w.value=a),label:o(r)("projects.filters.order"),items:E,"hide-details":""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(oe,{class:"my-4"}),h.value?(i(),p(x,{key:0},{default:t(()=>[e(b,{cols:"12",class:"text-center"},{default:t(()=>[e(Q,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):o(I).length===0?(i(),p(x,{key:1},{default:t(()=>[e(b,{cols:"12",class:"text-center"},{default:t(()=>[f("p",ve,c(o(r)("projects.empty")),1)]),_:1})]),_:1})):(i(),p(x,{key:2},{default:t(()=>[(i(!0),S(T,null,R(o(I),a=>(i(),p(b,{key:a.id,cols:"12",md:"6",lg:"4"},{default:t(()=>[e(je,{project:a,onView:J},null,8,["project"])]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),e(Z,{modelValue:g.value,"onUpdate:modelValue":s[4]||(s[4]=a=>g.value=a),onSubmit:H},null,8,["modelValue"])]),_:1}))}};export{$e as default};
