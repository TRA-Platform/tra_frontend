import{r as F,o as i,b as p,y as t,p as e,ap as _,aj as q,aD as H,aB as z,E as x,aJ as M,aL as R,q as r,aK as D,D as L,A as c,b1 as Y,aY as P,m as f,c as B,b2 as G,C as S,aI as A,w as N,k as V,H as Q,ah as T,a as W,F as X,t as Z}from"./index-7675577c.js";import{u as $,_ as ee,V as te}from"./ProjectCreateDialog-d8650e7a.js";import{V as ae}from"./VMenu-db61968c.js";import{V as le}from"./VList-12873fe5.js";import{g as se}from"./formatters-61b2616d.js";import{V as oe}from"./VChip-0e25079c.js";import{a as v,V as k}from"./VRow-4662fa7c.js";import{b as re}from"./VTextField-74f641fe.js";import{V as U}from"./VSelect-62cc520e.js";import{V as ie}from"./VDivider-4a81dced.js";import"./VSlideGroup-0dc95b98.js";import"./ssrBoot-bac4086a.js";import"./index-07da1904.js";import"./VSpacer-0f38eeeb.js";import"./VForm-a35e3561.js";import"./VCheckboxBtn-01e7f2e1.js";import"./VDialog-d70ac910.js";const ce={__name:"MoreBtn",props:{menuList:{type:Array,required:!1},itemProps:{type:Boolean,required:!1}},setup(s){const y=s;return(j,m)=>{const o=F("IconBtn");return i(),p(o,{density:"compact",color:"disabled"},{default:t(()=>[e(_,{icon:"tabler-dots-vertical"}),y.menuList?(i(),p(ae,{key:0,activator:"parent"},{default:t(()=>[e(le,{items:y.menuList,"item-props":y.itemProps},null,8,["items","item-props"])]),_:1})):q("",!0)]),_:1})}}},pe={class:"mb-2"},ne={class:"d-flex mt-4 pt-1"},ue={class:"me-2"},de={class:"text-caption"},me={class:"me-2"},_e={class:"text-caption"},fe={key:0},ye={class:"text-caption"},je=H({__name:"ProjectListItem",props:{project:{type:Object,required:!0}},emits:["view","edit","delete"],setup(s,{emit:y}){const j=s,{t:m}=z();x(()=>{switch(j.project.status){case"draft":return"warning";case"active":return"success";case"archived":return"secondary";case"completed":return"info";default:return"primary"}});const o=x(()=>new Date(parseInt(j.project.created_at)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),h=(d,n=100)=>!d||d.length<=n?d:d.substring(0,n)+"...";return(d,n)=>{const b=ce;return i(),p(A,{class:"project-card h-100",onClick:n[1]||(n[1]=w=>y("view",s.project.id))},{default:t(()=>[e(M,null,{prepend:t(()=>[e(R,{color:"primary",variant:"tonal",rounded:"",size:"42",class:"me-3"},{default:t(()=>[s.project.type_of_application==="website"?(i(),p(_,{key:0,icon:"tabler-world-www"})):s.project.type_of_application==="mobile"?(i(),p(_,{key:1,icon:"tabler-device-mobile"})):s.project.type_of_application==="desktop"?(i(),p(_,{key:2,icon:"tabler-device-desktop"})):s.project.type_of_application==="api"?(i(),p(_,{key:3,icon:"tabler-api"})):(i(),p(_,{key:4,icon:"tabler-code"}))]),_:1})]),append:t(()=>[e(b,{"menu-list":[{title:r(m)("projects.list.actions.view_details"),value:"view",props:{prependIcon:"tabler-eye"}}],onClick:n[0]||(n[0]=w=>y(w,s.project.id))},null,8,["menu-list"])]),default:t(()=>[e(D,null,{default:t(()=>[L(c(s.project.name)+" ",1),e(oe,{color:r(se)(s.project.status),size:"small",label:""},{default:t(()=>[L(c(Y(s.project.status)),1)]),_:1},8,["color"])]),_:1})]),_:1}),e(P,null,{default:t(()=>[f("p",pe,c(h(s.project.short_description)),1),f("div",ne,[f("div",ue,[e(_,{icon:"tabler-calendar",size:"16",class:"me-1"}),f("span",de,c(r(m)("projects.list.details.created_at"))+": "+c(r(o)),1)]),f("div",me,[e(_,{icon:"tabler-code",size:"16",class:"me-1"}),f("span",_e,c(r(m)("projects.list.details.type"))+": "+c(s.project.type_of_application),1)]),s.project.language?(i(),B("div",fe,[e(_,{icon:"tabler-language",size:"16",class:"me-1"}),f("span",ye,c(r(m)("projects.list.details.language"))+": "+c(s.project.language),1)])):q("",!0)])]),_:1}),e(G,null,{default:t(()=>[e(S,{variant:"tonal",color:"primary"},{default:t(()=>[L(c(r(m)("projects.list.actions.view_details")),1)]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-640b1927"]]),ve={class:"text-h5"},be={class:"text-medium-emphasis"},Ee={__name:"index",setup(s){const y=Z(),j=$(),m=N(),{t:o}=z(),h=V(!1),d=V(!1),n=V(""),b=V("created_at"),w=V("desc");x(()=>m.is_admin()),x(()=>m.userData.role>=2);const E=[{title:o("projects.filters.sort_by_name"),value:"name"},{title:o("projects.filters.sort_by_created"),value:"created_at"},{title:o("projects.filters.sort_by_status"),value:"status"},{title:o("projects.filters.sort_by_type"),value:"type_of_application"}],J=[{title:o("projects.filters.order_asc"),value:"asc"},{title:o("projects.filters.order_desc"),value:"desc"}],C=x(()=>j.projects.length?j.projects.filter(u=>{if(!n.value)return!0;const l=n.value.toLowerCase();return u.name.toLowerCase().includes(l)||u.short_description.toLowerCase().includes(l)||u.type_of_application.toLowerCase().includes(l)}).sort((u,l)=>{let a=u[b.value],g=l[b.value];return typeof a=="string"&&(a=a.toLowerCase()),typeof g=="string"&&(g=g.toLowerCase()),w.value==="asc"?a>g?1:-1:a<g?1:-1}):[]),I=async()=>{h.value=!0;try{await j.fetchProjects()}catch(u){console.error("Error fetching projects:",u)}finally{h.value=!1}},K=async u=>{d.value=!1;const{data:l,error:a}=await j.createProject(u);l&&!a&&I()},O=u=>{y.push({name:"projects-id",params:{id:u}})};return Q(()=>{I()}),(u,l)=>(i(),p(te,{fluid:""},{default:t(()=>[e(k,null,{default:t(()=>[e(v,{cols:"12"},{default:t(()=>[e(A,null,{default:t(()=>[e(D,{class:"d-flex align-center justify-space-between"},{default:t(()=>[f("h5",ve,c(r(o)("projects.title")),1),e(S,{color:"primary",onClick:l[0]||(l[0]=a=>d.value=!0),"prepend-icon":"tabler-plus"},{default:t(()=>[L(c(r(o)("projects.actions.create")),1)]),_:1})]),_:1}),e(P,null,{default:t(()=>[e(k,null,{default:t(()=>[e(v,{cols:"12",md:"6"},{default:t(()=>[e(re,{modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=a=>n.value=a),label:r(o)("projects.filters.search"),"prepend-inner-icon":"tabler-search",clearable:"","hide-details":""},null,8,["modelValue","label"])]),_:1}),e(v,{cols:"12",md:"3"},{default:t(()=>[e(U,{modelValue:b.value,"onUpdate:modelValue":l[2]||(l[2]=a=>b.value=a),label:r(o)("projects.filters.sort_by"),items:E,"hide-details":""},null,8,["modelValue","label"])]),_:1}),e(v,{cols:"12",md:"3"},{default:t(()=>[e(U,{modelValue:w.value,"onUpdate:modelValue":l[3]||(l[3]=a=>w.value=a),label:r(o)("projects.filters.order"),items:J,"hide-details":""},null,8,["modelValue","label"])]),_:1})]),_:1}),e(ie,{class:"my-4"}),h.value?(i(),p(k,{key:0},{default:t(()=>[e(v,{cols:"12",class:"text-center"},{default:t(()=>[e(T,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):r(C).length===0?(i(),p(k,{key:1},{default:t(()=>[e(v,{cols:"12",class:"text-center"},{default:t(()=>[f("p",be,c(r(o)("projects.empty")),1)]),_:1})]),_:1})):(i(),p(k,{key:2},{default:t(()=>[(i(!0),B(X,null,W(r(C),a=>(i(),p(v,{key:a.id,cols:"12",md:"6",lg:"4"},{default:t(()=>[e(je,{project:a,onView:O},null,8,["project"])]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),e(ee,{modelValue:d.value,"onUpdate:modelValue":l[4]||(l[4]=a=>d.value=a),onSubmit:K},null,8,["modelValue"])]),_:1}))}};export{Ee as default};
