import{r as E,o as s,b as o,y as a,p as e,ap as p,aj as P,aD as N,E as h,aJ as O,aL as F,aK as I,D as k,A as b,q as C,b1 as H,aY as S,m as u,c as q,b2 as J,C as z,aI as B,w as K,k as g,H as M,ah as T,a as Y,F as G,t as Q}from"./index-5789d73a.js";import{u as R,_ as W,V as X}from"./ProjectCreateDialog-2e212306.js";import{V as Z}from"./VMenu-0b8d2dd4.js";import{V as $}from"./VList-67fea634.js";import{g as ee}from"./formatters-981de7af.js";import{V as ae}from"./VChip-7deee89e.js";import{a as _,V}from"./VRow-7265fa83.js";import{b as te}from"./VTextField-196356ff.js";import{V as D}from"./VSelect-a845b0d4.js";import{V as le}from"./VDivider-82a28f18.js";import"./VSlideGroup-d7cb865e.js";import"./ssrBoot-afa16e16.js";import"./index-6cdb1ca7.js";import"./VSpacer-a6336499.js";import"./VForm-73098b32.js";import"./VCheckboxBtn-09426770.js";import"./VDialog-27dc4e16.js";const re={__name:"MoreBtn",props:{menuList:{type:Array,required:!1},itemProps:{type:Boolean,required:!1}},setup(r){const d=r;return(m,j)=>{const f=E("IconBtn");return s(),o(f,{density:"compact",color:"disabled"},{default:a(()=>[e(p,{icon:"tabler-dots-vertical"}),d.menuList?(s(),o(Z,{key:0,activator:"parent"},{default:a(()=>[e($,{items:d.menuList,"item-props":d.itemProps},null,8,["items","item-props"])]),_:1})):P("",!0)]),_:1})}}},se={class:"mb-2"},oe={class:"d-flex mt-4 pt-1"},ie={class:"me-2"},ce={class:"text-caption"},ne={class:"me-2"},pe={class:"text-caption"},ue={key:0},de={class:"text-caption"},me=N({__name:"ProjectListItem",props:{project:{type:Object,required:!0}},emits:["view","edit","delete"],setup(r,{emit:d}){const m=r;h(()=>{switch(m.project.status){case"draft":return"warning";case"active":return"success";case"archived":return"secondary";case"completed":return"info";default:return"primary"}});const j=h(()=>new Date(parseInt(m.project.created_at)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),f=(n,i=100)=>!n||n.length<=i?n:n.substring(0,i)+"...";return(n,i)=>{const y=re;return s(),o(B,{class:"project-card h-100",onClick:i[1]||(i[1]=v=>d("view",r.project.id))},{default:a(()=>[e(O,null,{prepend:a(()=>[e(F,{color:"primary",variant:"tonal",rounded:"",size:"42",class:"me-3"},{default:a(()=>[r.project.type_of_application==="website"?(s(),o(p,{key:0,icon:"tabler-world-www"})):r.project.type_of_application==="mobile"?(s(),o(p,{key:1,icon:"tabler-device-mobile"})):r.project.type_of_application==="desktop"?(s(),o(p,{key:2,icon:"tabler-device-desktop"})):r.project.type_of_application==="api"?(s(),o(p,{key:3,icon:"tabler-api"})):(s(),o(p,{key:4,icon:"tabler-code"}))]),_:1})]),append:a(()=>[e(y,{"menu-list":[{title:"View Details",value:"view",props:{prependIcon:"tabler-eye"}}],onClick:i[0]||(i[0]=v=>d(v,r.project.id))})]),default:a(()=>[e(I,null,{default:a(()=>[k(b(r.project.name)+" ",1),e(ae,{color:C(ee)(r.project.status),size:"small",label:""},{default:a(()=>[k(b(H(r.project.status)),1)]),_:1},8,["color"])]),_:1})]),_:1}),e(S,null,{default:a(()=>[u("p",se,b(f(r.project.short_description)),1),u("div",oe,[u("div",ie,[e(p,{icon:"tabler-calendar",size:"16",class:"me-1"}),u("span",ce,b(C(j)),1)]),u("div",ne,[e(p,{icon:"tabler-code",size:"16",class:"me-1"}),u("span",pe,b(r.project.type_of_application),1)]),r.project.language?(s(),q("div",ue,[e(p,{icon:"tabler-language",size:"16",class:"me-1"}),u("span",de,b(r.project.language),1)])):P("",!0)])]),_:1}),e(J,null,{default:a(()=>[e(z,{variant:"tonal",color:"primary"},{default:a(()=>[k(" View Details ")]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-bb0b9553"]]),fe=u("h5",{class:"text-h5"},"Projects",-1),_e=u("p",{class:"text-medium-emphasis"},"No projects found. Create a new project to get started.",-1),ze={__name:"index",setup(r){const d=Q(),m=R(),j=K(),f=g(!1),n=g(!1),i=g(""),y=g("created_at"),v=g("desc");h(()=>j.is_admin()),h(()=>j.userData.role>=2);const L=h(()=>m.projects.length?m.projects.filter(c=>{if(!i.value)return!0;const l=i.value.toLowerCase();return c.name.toLowerCase().includes(l)||c.short_description.toLowerCase().includes(l)||c.type_of_application.toLowerCase().includes(l)}).sort((c,l)=>{let t=c[y.value],w=l[y.value];return typeof t=="string"&&(t=t.toLowerCase()),typeof w=="string"&&(w=w.toLowerCase()),v.value==="asc"?t>w?1:-1:t<w?1:-1}):[]),x=async()=>{f.value=!0;try{await m.fetchProjects()}catch(c){console.error("Error fetching projects:",c)}finally{f.value=!1}},U=async c=>{n.value=!1;const{data:l,error:t}=await m.createProject(c);l&&!t&&x()},A=c=>{d.push({name:"projects-id",params:{id:c}})};return M(()=>{x()}),(c,l)=>(s(),o(X,{fluid:""},{default:a(()=>[e(V,null,{default:a(()=>[e(_,{cols:"12"},{default:a(()=>[e(B,null,{default:a(()=>[e(I,{class:"d-flex align-center justify-space-between"},{default:a(()=>[fe,e(z,{color:"primary",onClick:l[0]||(l[0]=t=>n.value=!0),"prepend-icon":"tabler-plus"},{default:a(()=>[k(" Create Project ")]),_:1})]),_:1}),e(S,null,{default:a(()=>[e(V,null,{default:a(()=>[e(_,{cols:"12",md:"6"},{default:a(()=>[e(te,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=t=>i.value=t),label:"Search Projects","prepend-inner-icon":"tabler-search",clearable:"","hide-details":""},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",md:"3"},{default:a(()=>[e(D,{modelValue:y.value,"onUpdate:modelValue":l[2]||(l[2]=t=>y.value=t),label:"Sort By",items:[{title:"Name",value:"name"},{title:"Created Date",value:"created_at"},{title:"Status",value:"status"},{title:"Type",value:"type_of_application"}],"hide-details":""},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",md:"3"},{default:a(()=>[e(D,{modelValue:v.value,"onUpdate:modelValue":l[3]||(l[3]=t=>v.value=t),label:"Order",items:[{title:"Ascending",value:"asc"},{title:"Descending",value:"desc"}],"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(le,{class:"my-4"}),f.value?(s(),o(V,{key:0},{default:a(()=>[e(_,{cols:"12",class:"text-center"},{default:a(()=>[e(T,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):C(L).length===0?(s(),o(V,{key:1},{default:a(()=>[e(_,{cols:"12",class:"text-center"},{default:a(()=>[_e]),_:1})]),_:1})):(s(),o(V,{key:2},{default:a(()=>[(s(!0),q(G,null,Y(C(L),t=>(s(),o(_,{key:t.id,cols:"12",md:"6",lg:"4"},{default:a(()=>[e(me,{project:t,onView:A},null,8,["project"])]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),e(W,{modelValue:n.value,"onUpdate:modelValue":l[4]||(l[4]=t=>n.value=t),onSubmit:U},null,8,["modelValue"])]),_:1}))}};export{ze as default};
